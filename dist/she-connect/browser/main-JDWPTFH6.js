import{A as Pu,B as d0,C as f0,D as h0,E as Zr,F as Ut,a as B,b as le,c as Lm,d as P,e as n0,f as Ad,g as r0,h as i0,i as o0,j as Vm,k as jm,l as Bm,m as s0,n as a0,o as u0,p as Nu,q as Um,r as $m,s as Md,t as c0,u as l0,v as xd,w as Ge,x as Xi,y as zn,z as Rd}from"./chunk-TTXOFW3R.js";var Hm;function Nd(){return Hm}function Gn(n){let e=Hm;return Hm=n,e}var p0=Symbol("NotFound");function ls(n){return n===p0||n?.name==="\u0275NotFound"}var xt=null,Pd=!1,qm=1,L1=null,$t=Symbol("SIGNAL");function me(n){let e=xt;return xt=n,e}function Ld(){return xt}var ds={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function fs(n){if(Pd)throw new Error("");if(xt===null)return;xt.consumerOnSignalRead(n);let e=xt.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=xt.recomputing;if(r&&(t=e!==void 0?e.nextProducer:xt.producers,t!==void 0&&t.producer===n)){xt.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===xt&&(!r||j1(i,xt)))return;let o=ps(xt),s={producer:n,consumer:xt,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};xt.producersTail=s,e!==void 0?e.nextProducer=s:xt.producers=s,o&&v0(n,s)}function g0(){qm++}function Vd(n){if(!(ps(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===qm)){if(!n.producerMustRecompute(n)&&!Fu(n)){Fd(n);return}n.producerRecomputeValue(n),Fd(n)}}function zm(n){if(n.consumers===void 0)return;let e=Pd;Pd=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||V1(r)}}finally{Pd=e}}function Gm(){return xt?.consumerAllowSignalWrites!==!1}function V1(n){n.dirty=!0,zm(n),n.consumerMarkedDirty?.(n)}function Fd(n){n.dirty=!1,n.lastCleanEpoch=qm}function hs(n){return n&&m0(n),me(n)}function m0(n){n.producersTail=void 0,n.recomputing=!0}function ku(n,e){me(e),n&&y0(n)}function y0(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(ps(n))do t=Wm(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Fu(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(Vd(t),r!==t.version))return!0}return!1}function Lu(n){if(ps(n)){let e=n.producers;for(;e!==void 0;)e=Wm(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function v0(n,e){let t=n.consumersTail,r=ps(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)v0(i.producer,i)}function Wm(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!ps(e)){let o=e.producers;for(;o!==void 0;)o=Wm(o)}return t}function ps(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function jd(n){L1?.(n)}function j1(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function Bd(n,e){return Object.is(n,e)}function Ud(n,e){let t=Object.create(B1);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Vd(t),fs(t),t.value===Ou)throw t.error;return t.value};return r[$t]=t,jd(t),r}var Od=Symbol("UNSET"),kd=Symbol("COMPUTING"),Ou=Symbol("ERRORED"),B1=le(B({},ds),{value:Od,dirty:!0,error:null,equal:Bd,kind:"computed",producerMustRecompute(n){return n.value===Od||n.value===kd},producerRecomputeValue(n){if(n.value===kd)throw new Error("");let e=n.value;n.value=kd;let t=hs(n),r,i=!1;try{r=n.computation(),me(null),i=e!==Od&&e!==Ou&&r!==Ou&&n.equal(e,r)}catch(o){r=Ou,n.error=o}finally{ku(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function U1(){throw new Error}var _0=U1;function E0(n){_0(n)}function Km(n){_0=n}var $1=null;function Qm(n,e){let t=Object.create($d);t.value=n,e!==void 0&&(t.equal=e);let r=()=>w0(t);return r[$t]=t,jd(t),[r,s=>gs(t,s),s=>Ym(t,s)]}function w0(n){return fs(n),n.value}function gs(n,e){Gm()||E0(n),n.equal(n.value,e)||(n.value=e,H1(n))}function Ym(n,e){Gm()||E0(n),gs(n,e(n.value))}var $d=le(B({},ds),{equal:Bd,value:void 0,kind:"signal"});function H1(n){n.version++,g0(),zm(n),$1?.(n)}function oe(n){return typeof n=="function"}function ms(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Hd=ms(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function eo(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Qe=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(oe(r))try{r()}catch(o){e=o instanceof Hd?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{I0(o)}catch(s){e=e??[],s instanceof Hd?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Hd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)I0(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&eo(t,e)}remove(e){let{_finalizers:t}=this;t&&eo(t,e),e instanceof n&&e._removeParent(this)}};Qe.EMPTY=(()=>{let n=new Qe;return n.closed=!0,n})();var Zm=Qe.EMPTY;function qd(n){return n instanceof Qe||n&&"closed"in n&&oe(n.remove)&&oe(n.add)&&oe(n.unsubscribe)}function I0(n){oe(n)?n():n.unsubscribe()}var An={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ys={setTimeout(n,e,...t){let{delegate:r}=ys;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ys;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function zd(n){ys.setTimeout(()=>{let{onUnhandledError:e}=An;if(e)e(n);else throw n})}function Vu(){}var D0=Jm("C",void 0,void 0);function C0(n){return Jm("E",void 0,n)}function b0(n){return Jm("N",n,void 0)}function Jm(n,e,t){return{kind:n,value:e,error:t}}var to=null;function vs(n){if(An.useDeprecatedSynchronousErrorHandling){let e=!to;if(e&&(to={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=to;if(to=null,t)throw r}}else n()}function T0(n){An.useDeprecatedSynchronousErrorHandling&&to&&(to.errorThrown=!0,to.error=n)}var no=class extends Qe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,qd(e)&&e.add(this)):this.destination=G1}static create(e,t,r){return new _r(e,t,r)}next(e){this.isStopped?ey(b0(e),this):this._next(e)}error(e){this.isStopped?ey(C0(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ey(D0,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},q1=Function.prototype.bind;function Xm(n,e){return q1.call(n,e)}var ty=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Gd(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Gd(r)}else Gd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Gd(t)}}},_r=class extends no{constructor(e,t,r){super();let i;if(oe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&An.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Xm(e.next,o),error:e.error&&Xm(e.error,o),complete:e.complete&&Xm(e.complete,o)}):i=e}this.destination=new ty(i)}};function Gd(n){An.useDeprecatedSynchronousErrorHandling?T0(n):zd(n)}function z1(n){throw n}function ey(n,e){let{onStoppedNotification:t}=An;t&&ys.setTimeout(()=>t(n,e))}var G1={closed:!0,next:Vu,error:z1,complete:Vu};var _s=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ht(n){return n}function ny(...n){return ry(n)}function ry(n){return n.length===0?Ht:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ue=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=K1(t)?t:new _r(t,r,i);return vs(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=S0(r),new r((i,o)=>{let s=new _r({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[_s](){return this}pipe(...t){return ry(t)(this)}toPromise(t){return t=S0(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function S0(n){var e;return(e=n??An.Promise)!==null&&e!==void 0?e:Promise}function W1(n){return n&&oe(n.next)&&oe(n.error)&&oe(n.complete)}function K1(n){return n&&n instanceof no||W1(n)&&qd(n)}function iy(n){return oe(n?.lift)}function pe(n){return e=>{if(iy(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ge(n,e,t,r,i){return new oy(n,e,t,r,i)}var oy=class extends no{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Es(){return pe((n,e)=>{let t=null;n._refCount++;let r=ge(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var ws=class extends ue{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,iy(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Qe;let t=this.getSubject();e.add(this.source.subscribe(ge(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Qe.EMPTY)}return e}refCount(){return Es()(this)}};var A0=ms(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Le=(()=>{class n extends ue{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Wd(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new A0}next(t){vs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){vs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){vs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Zm:(this.currentObservers=null,o.push(t),new Qe(()=>{this.currentObservers=null,eo(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ue;return t.source=this,t}}return n.create=(e,t)=>new Wd(e,t),n})(),Wd=class extends Le{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Zm}};var vt=class extends Le{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ju={now(){return(ju.delegate||Date).now()},delegate:void 0};var Bu=class extends Le{constructor(e=1/0,t=1/0,r=ju){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var Kd=class extends Qe{constructor(e,t){super()}schedule(e,t=0){return this}};var Uu={setInterval(n,e,...t){let{delegate:r}=Uu;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Uu;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Is=class extends Kd{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Uu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Uu.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,eo(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Ds=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Ds.now=ju.now;var Cs=class extends Ds{constructor(e,t=Ds.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var $u=new Cs(Is);var Qd=class extends Is{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Yd=class extends Cs{};var sy=new Yd(Qd);var Rt=new ue(n=>n.complete());function M0(n){return n&&oe(n.schedule)}function ay(n){return n[n.length-1]}function Zd(n){return oe(ay(n))?n.pop():void 0}function Wn(n){return M0(ay(n))?n.pop():void 0}function x0(n,e){return typeof ay(n)=="number"?n.pop():e}var Jd=n=>n&&typeof n.length=="number"&&typeof n!="function";function Xd(n){return oe(n?.then)}function ef(n){return oe(n[_s])}function tf(n){return Symbol.asyncIterator&&oe(n?.[Symbol.asyncIterator])}function nf(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Q1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var rf=Q1();function of(n){return oe(n?.[rf])}function sf(n){return r0(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Ad(t.read());if(i)return yield Ad(void 0);yield yield Ad(r)}}finally{t.releaseLock()}})}function af(n){return oe(n?.getReader)}function Ue(n){if(n instanceof ue)return n;if(n!=null){if(ef(n))return Y1(n);if(Jd(n))return Z1(n);if(Xd(n))return J1(n);if(tf(n))return R0(n);if(of(n))return X1(n);if(af(n))return eO(n)}throw nf(n)}function Y1(n){return new ue(e=>{let t=n[_s]();if(oe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Z1(n){return new ue(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function J1(n){return new ue(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,zd)})}function X1(n){return new ue(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function R0(n){return new ue(e=>{tO(n,e).catch(t=>e.error(t))})}function eO(n){return R0(sf(n))}function tO(n,e){var t,r,i,o;return n0(this,void 0,void 0,function*(){try{for(t=i0(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Qt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Kn(n,e=0){return pe((t,r)=>{t.subscribe(ge(r,i=>Qt(r,n,()=>r.next(i),e),()=>Qt(r,n,()=>r.complete(),e),i=>Qt(r,n,()=>r.error(i),e)))})}function Er(n,e=0){return pe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function N0(n,e){return Ue(n).pipe(Er(e),Kn(e))}function P0(n,e){return Ue(n).pipe(Er(e),Kn(e))}function O0(n,e){return new ue(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function k0(n,e){return new ue(t=>{let r;return Qt(t,e,()=>{r=n[rf](),Qt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>oe(r?.return)&&r.return()})}function uf(n,e){if(!n)throw new Error("Iterable cannot be null");return new ue(t=>{Qt(t,e,()=>{let r=n[Symbol.asyncIterator]();Qt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function F0(n,e){return uf(sf(n),e)}function L0(n,e){if(n!=null){if(ef(n))return N0(n,e);if(Jd(n))return O0(n,e);if(Xd(n))return P0(n,e);if(tf(n))return uf(n,e);if(of(n))return k0(n,e);if(af(n))return F0(n,e)}throw nf(n)}function we(n,e){return e?L0(n,e):Ue(n)}function ee(...n){let e=Wn(n);return we(n,e)}function bs(n,e){let t=oe(n)?n:()=>n,r=i=>i.error(t());return new ue(e?i=>e.schedule(r,0,i):r)}function uy(n){return!!n&&(n instanceof ue||oe(n.lift)&&oe(n.subscribe))}var wr=ms(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ne(n,e){return pe((t,r)=>{let i=0;t.subscribe(ge(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:nO}=Array;function rO(n,e){return nO(e)?n(...e):n(e)}function cf(n){return ne(e=>rO(n,e))}var{isArray:iO}=Array,{getPrototypeOf:oO,prototype:sO,keys:aO}=Object;function lf(n){if(n.length===1){let e=n[0];if(iO(e))return{args:e,keys:null};if(uO(e)){let t=aO(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function uO(n){return n&&typeof n=="object"&&oO(n)===sO}function df(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Hu(...n){let e=Wn(n),t=Zd(n),{args:r,keys:i}=lf(n);if(r.length===0)return we([],e);let o=new ue(cO(r,e,i?s=>df(i,s):Ht));return t?o.pipe(cf(t)):o}function cO(n,e,t=Ht){return r=>{V0(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)V0(e,()=>{let l=we(n[u],e),f=!1;l.subscribe(ge(r,p=>{o[u]=p,f||(f=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function V0(n,e,t){n?Qt(t,n,e):e()}function j0(n,e,t,r,i,o,s,a){let u=[],l=0,f=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=M=>l<r?b(M):u.push(M),b=M=>{o&&e.next(M),l++;let x=!1;Ue(t(M,f++)).subscribe(ge(e,j=>{i?.(j),o?y(j):e.next(j)},()=>{x=!0},void 0,()=>{if(x)try{for(l--;u.length&&l<r;){let j=u.shift();s?Qt(e,s,()=>b(j)):b(j)}m()}catch(j){e.error(j)}}))};return n.subscribe(ge(e,y,()=>{p=!0,m()})),()=>{a?.()}}function Ze(n,e,t=1/0){return oe(e)?Ze((r,i)=>ne((o,s)=>e(r,o,i,s))(Ue(n(r,i))),t):(typeof e=="number"&&(t=e),pe((r,i)=>j0(r,i,n,t)))}function Jr(n=1/0){return Ze(Ht,n)}function B0(){return Jr(1)}function Ts(...n){return B0()(we(n,Wn(n)))}function qu(n){return new ue(e=>{Ue(n()).subscribe(e)})}function cy(...n){let e=Zd(n),{args:t,keys:r}=lf(n),i=new ue(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let f=0;f<s;f++){let p=!1;Ue(t[f]).subscribe(ge(o,m=>{p||(p=!0,l--),a[f]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?df(r,a):a),o.complete())}))}});return e?i.pipe(cf(e)):i}function ly(...n){let e=Wn(n),t=x0(n,1/0),r=n;return r.length?r.length===1?Ue(r[0]):Jr(t)(we(r,e)):Rt}function ct(n,e){return pe((t,r)=>{let i=0;t.subscribe(ge(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Ir(n){return pe((e,t)=>{let r=null,i=!1,o;r=e.subscribe(ge(t,void 0,void 0,s=>{o=Ue(n(s,Ir(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function U0(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(ge(s,f=>{let p=l++;u=a?n(u,f,p):(a=!0,f),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Xr(n,e){return oe(e)?Ze(n,e,1):Ze(n,1)}function ei(n){return pe((e,t)=>{let r=!1;e.subscribe(ge(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Dr(n){return n<=0?()=>Rt:pe((e,t)=>{let r=0;e.subscribe(ge(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function dy(n,e=Ht){return n=n??lO,pe((t,r)=>{let i,o=!0;t.subscribe(ge(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function lO(n,e){return n===e}function ff(n=dO){return pe((e,t)=>{let r=!1;e.subscribe(ge(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function dO(){return new wr}function zu(n){return pe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Mn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ct((i,o)=>n(i,o,r)):Ht,Dr(1),t?ei(e):ff(()=>new wr))}function Ss(n){return n<=0?()=>Rt:pe((e,t)=>{let r=[];e.subscribe(ge(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function fy(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ct((i,o)=>n(i,o,r)):Ht,Ss(1),t?ei(e):ff(()=>new wr))}function Gu(){return pe((n,e)=>{let t,r=!1;n.subscribe(ge(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function ro(n,e){return pe(U0(n,e,arguments.length>=2,!0))}function $0(n={}){let{connector:e=()=>new Le,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,l=0,f=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),s=u=void 0,f=p=!1},b=()=>{let M=s;y(),M?.unsubscribe()};return pe((M,x)=>{l++,!p&&!f&&m();let j=u=u??e();x.add(()=>{l--,l===0&&!p&&!f&&(a=hy(b,i))}),j.subscribe(x),!s&&l>0&&(s=new _r({next:Y=>j.next(Y),error:Y=>{p=!0,m(),a=hy(y,t,Y),j.error(Y)},complete:()=>{f=!0,m(),a=hy(y,r),j.complete()}}),Ue(M).subscribe(s))})(o)}}function hy(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new _r({next:()=>{r.unsubscribe(),n()}});return Ue(e(...t)).subscribe(r)}function hf(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,$0({connector:()=>new Bu(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function io(...n){let e=Wn(n);return pe((t,r)=>{(e?Ts(n,t,e):Ts(n,t)).subscribe(r)})}function $e(n,e){return pe((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(ge(r,u=>{i?.unsubscribe();let l=0,f=o++;Ue(n(u,f)).subscribe(i=ge(r,p=>r.next(e?e(u,p,f,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function pf(n,e){return oe(e)?$e(()=>n,e):$e(()=>n)}function gf(n){return pe((e,t)=>{Ue(n).subscribe(ge(t,()=>t.complete(),Vu)),!t.closed&&e.subscribe(t)})}function mt(n,e,t){let r=oe(n)||e||t?{next:n,error:e,complete:t}:n;return r?pe((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ge(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Ht}function H0(n){let e=me(null);try{return n()}finally{me(e)}}var ti=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Ty=new ti("20.3.6");var _f="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",X=class extends Error{code;constructor(e,t){super(Yu(e,t)),this.code=e}};function fO(n){return`NG0${Math.abs(n)}`}function Yu(n,e){return`${fO(n)}${e?": "+e:""}`}var Zu=globalThis;function Se(n){for(let e in n)if(n[e]===Se)return e;throw Error("")}function G0(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function br(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(br).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Sy(n,e){return n?e?`${n} ${e}`:n:e||""}var hO=Se({__forward_ref__:Se});function Ms(n){return n.__forward_ref__=Ms,n.toString=function(){return br(this())},n}function _t(n){return Ay(n)?n():n}function Ay(n){return typeof n=="function"&&n.hasOwnProperty(hO)&&n.__forward_ref__===Ms}function Z(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function wt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ju(n){return pO(n,Ef)}function My(n){return Ju(n)!==null}function pO(n,e){return n.hasOwnProperty(e)&&n[e]||null}function gO(n){let e=n?.[Ef]??null;return e||null}function gy(n){return n&&n.hasOwnProperty(yf)?n[yf]:null}var Ef=Se({\u0275prov:Se}),yf=Se({\u0275inj:Se}),Q=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Z({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function xy(n){return n&&!!n.\u0275providers}var Ry=Se({\u0275cmp:Se}),Ny=Se({\u0275dir:Se}),Py=Se({\u0275pipe:Se}),Oy=Se({\u0275mod:Se}),Ku=Se({\u0275fac:Se}),lo=Se({__NG_ELEMENT_ID__:Se}),q0=Se({__NG_ENV_ID__:Se});function wf(n){return typeof n=="string"?n:n==null?"":String(n)}function W0(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():wf(n)}var K0=Se({ngErrorCode:Se}),mO=Se({ngErrorMessage:Se}),yO=Se({ngTokenPath:Se});function ky(n,e){return Q0("",-200,e)}function If(n,e){throw new X(-201,!1)}function Q0(n,e,t){let r=new X(e,n);return r[K0]=e,r[mO]=n,t&&(r[yO]=t),r}function vO(n){return n[K0]}var my;function Y0(){return my}function sn(n){let e=my;return my=n,e}function Fy(n,e,t){let r=Ju(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;If(n,"Injector")}var _O={},oo=_O,yy="__NG_DI_FLAG__",vy=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=so(t)||0;try{return this.injector.get(e,r&8?null:oo,r)}catch(i){if(ls(i))return i;throw i}}};function EO(n,e=0){let t=Nd();if(t===void 0)throw new X(-203,!1);if(t===null)return Fy(n,void 0,e);{let r=wO(e),i=t.retrieve(n,r);if(ls(i)){if(r.optional)return null;throw i}return i}}function z(n,e=0){return(Y0()||EO)(_t(n),e)}function k(n,e){return z(n,so(e))}function so(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function wO(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function _y(n){let e=[];for(let t=0;t<n.length;t++){let r=_t(n[t]);if(Array.isArray(r)){if(r.length===0)throw new X(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=IO(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(z(i,o))}else e.push(z(r))}return e}function Z0(n,e){return n[yy]=e,n.prototype[yy]=e,n}function IO(n){return n[yy]}function ao(n,e){let t=n.hasOwnProperty(Ku);return t?n[Ku]:null}function Df(n,e){n.forEach(t=>Array.isArray(t)?Df(t,e):e(t))}function Ly(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Xu(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function J0(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function X0(n,e,t){let r=xs(n,e);return r>=0?n[r|1]=t:(r=~r,J0(n,r,e,t)),r}function Cf(n,e){let t=xs(n,e);if(t>=0)return n[t|1]}function xs(n,e){return DO(n,e,1)}function DO(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var ri={},an=[],ii=new Q(""),Vy=new Q("",-1),jy=new Q(""),Qu=class{get(e,t=oo){if(t===oo){let i=Q0("",-201);throw i.name="\u0275NotFound",i}return t}};function By(n){return n[Oy]||null}function Sr(n){return n[Ry]||null}function Uy(n){return n[Ny]||null}function eb(n){return n[Py]||null}function ec(n){return{\u0275providers:n}}function bf(...n){return{\u0275providers:$y(!0,n),\u0275fromNgModule:!0}}function $y(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Df(e,s=>{let a=s;vf(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&tb(i,o),t}function tb(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Hy(i,o=>{e(o,r)})}}function vf(n,e,t,r){if(n=_t(n),!n)return!1;let i=null,o=gy(n),s=!o&&Sr(n);if(!o&&!s){let u=n.ngModule;if(o=gy(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)vf(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Df(o.imports,f=>{vf(f,e,t,r)&&(l||=[],l.push(f))})}finally{}l!==void 0&&tb(l,e)}if(!a){let l=ao(i)||(()=>new i);e({provide:i,useFactory:l,deps:an},i),e({provide:jy,useValue:i,multi:!0},i),e({provide:ii,useValue:()=>z(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;Hy(u,f=>{e(f,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Hy(n,e){for(let t of n)xy(t)&&(t=t.\u0275providers),Array.isArray(t)?Hy(t,e):e(t)}var CO=Se({provide:String,useValue:Se});function nb(n){return n!==null&&typeof n=="object"&&CO in n}function bO(n){return!!(n&&n.useExisting)}function TO(n){return!!(n&&n.useFactory)}function uo(n){return typeof n=="function"}function rb(n){return!!n.useClass}var tc=new Q(""),mf={},z0={},py;function nc(){return py===void 0&&(py=new Qu),py}var Ve=class{},co=class extends Ve{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,wy(e,s=>this.processProvider(s)),this.records.set(Vy,As(void 0,this)),i.has("environment")&&this.records.set(Ve,As(void 0,this));let o=this.records.get(tc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(jy,an,{self:!0}))}retrieve(e,t){let r=so(t)||0;try{return this.get(e,oo,r)}catch(i){if(ls(i))return i;throw i}}destroy(){Wu(this),this._destroyed=!0;let e=me(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),me(e)}}onDestroy(e){return Wu(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Wu(this);let t=Gn(this),r=sn(void 0),i;try{return e()}finally{Gn(t),sn(r)}}get(e,t=oo,r){if(Wu(this),e.hasOwnProperty(q0))return e[q0](this);let i=so(r),o,s=Gn(this),a=sn(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let f=RO(e)&&Ju(e);f&&this.injectableDefInScope(f)?l=As(Ey(e),mf):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?nc():this.parent;return t=i&8&&t===oo?null:t,u.get(e,t)}catch(u){let l=vO(u);throw l===-200||l===-201?new X(l,null):u}finally{sn(a),Gn(s)}}resolveInjectorInitializers(){let e=me(null),t=Gn(this),r=sn(void 0),i;try{let o=this.get(ii,an,{self:!0});for(let s of o)s()}finally{Gn(t),sn(r),me(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(br(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=_t(e);let t=uo(e)?e:_t(e&&e.provide),r=AO(e);if(!uo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=As(void 0,mf,!0),i.factory=()=>_y(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=me(null);try{if(t.value===z0)throw ky(br(e));return t.value===mf&&(t.value=z0,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&xO(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{me(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=_t(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Ey(n){let e=Ju(n),t=e!==null?e.factory:ao(n);if(t!==null)return t;if(n instanceof Q)throw new X(204,!1);if(n instanceof Function)return SO(n);throw new X(204,!1)}function SO(n){if(n.length>0)throw new X(204,!1);let t=gO(n);return t!==null?()=>t.factory(n):()=>new n}function AO(n){if(nb(n))return As(void 0,n.useValue);{let e=qy(n);return As(e,mf)}}function qy(n,e,t){let r;if(uo(n)){let i=_t(n);return ao(i)||Ey(i)}else if(nb(n))r=()=>_t(n.useValue);else if(TO(n))r=()=>n.useFactory(..._y(n.deps||[]));else if(bO(n))r=(i,o)=>z(_t(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=_t(n&&(n.useClass||n.provide));if(MO(n))r=()=>new i(..._y(n.deps));else return ao(i)||Ey(i)}return r}function Wu(n){if(n.destroyed)throw new X(205,!1)}function As(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function MO(n){return!!n.deps}function xO(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function RO(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function wy(n,e){for(let t of n)Array.isArray(t)?wy(t,e):t&&xy(t)?wy(t.\u0275providers,e):e(t)}function It(n,e){let t;n instanceof co?(Wu(n),t=n):t=new vy(n);let r,i=Gn(t),o=sn(void 0);try{return e()}finally{Gn(i),sn(o)}}function ib(){return Y0()!==void 0||Nd()!=null}var Rn=0,de=1,ce=2,Et=3,vn=4,_n=5,rc=6,Rs=7,qt=8,oi=9,Qn=10,lt=11,Ns=12,zy=13,Ps=14,En=15,Os=16,fo=17,ic=18,oc=19,Gy=20,Cr=21,Tf=22,sc=23,un=24,ho=25,ac=26,cn=27,ob=1;var si=7,uc=8,cc=9,Yt=10;function Yn(n){return Array.isArray(n)&&typeof n[ob]=="object"}function Nn(n){return Array.isArray(n)&&n[ob]===!0}function Wy(n){return(n.flags&4)!==0}function ai(n){return n.componentOffset>-1}function Sf(n){return(n.flags&1)===1}function Zn(n){return!!n.template}function ks(n){return(n[ce]&512)!==0}function po(n){return(n[ce]&256)===256}var sb="svg",ab="math";function wn(n){for(;Array.isArray(n);)n=n[Rn];return n}function ub(n,e){return wn(e[n])}function Pn(n,e){return wn(e[n.index])}function Af(n,e){return n.data[e]}function cb(n,e){return n[e]}function In(n,e){let t=e[n];return Yn(t)?t:t[Rn]}function Mf(n){return(n[ce]&128)===128}function lb(n){return Nn(n[Et])}function lc(n,e){return e==null?null:n[e]}function Ky(n){n[fo]=0}function Qy(n){n[ce]&1024||(n[ce]|=1024,Mf(n)&&Fs(n))}function dc(n){return!!(n[ce]&9216||n[un]?.dirty)}function xf(n){n[Qn].changeDetectionScheduler?.notify(8),n[ce]&64&&(n[ce]|=1024),dc(n)&&Fs(n)}function Fs(n){n[Qn].changeDetectionScheduler?.notify(0);let e=ni(n);for(;e!==null&&!(e[ce]&8192||(e[ce]|=8192,!Mf(e)));)e=ni(e)}function Yy(n,e){if(po(n))throw new X(911,!1);n[Cr]===null&&(n[Cr]=[]),n[Cr].push(e)}function db(n,e){if(n[Cr]===null)return;let t=n[Cr].indexOf(e);t!==-1&&n[Cr].splice(t,1)}function ni(n){let e=n[Et];return Nn(e)?e[Et]:e}function fb(n){return n[Rs]??=[]}function hb(n){return n.cleanup??=[]}var ve={lFrame:Ab(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Iy=!1;function pb(){return ve.lFrame.elementDepthCount}function gb(){ve.lFrame.elementDepthCount++}function Zy(){ve.lFrame.elementDepthCount--}function mb(){return ve.bindingsEnabled}function yb(){return ve.skipHydrationRootTNode!==null}function Jy(n){return ve.skipHydrationRootTNode===n}function Xy(){ve.skipHydrationRootTNode=null}function qe(){return ve.lFrame.lView}function On(){return ve.lFrame.tView}function ui(n){return ve.lFrame.contextLView=n,n[qt]}function ci(n){return ve.lFrame.contextLView=null,n}function Pt(){let n=ev();for(;n!==null&&n.type===64;)n=n.parent;return n}function ev(){return ve.lFrame.currentTNode}function vb(){let n=ve.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function fc(n,e){let t=ve.lFrame;t.currentTNode=n,t.isParent=e}function tv(){return ve.lFrame.isParent}function _b(){ve.lFrame.isParent=!1}function Eb(){return ve.lFrame.contextLView}function nv(){return Iy}function rv(n){let e=Iy;return Iy=n,e}function wb(n){return ve.lFrame.bindingIndex=n}function iv(){return ve.lFrame.bindingIndex++}function Ib(n){let e=ve.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Db(){return ve.lFrame.inI18n}function Cb(n,e){let t=ve.lFrame;t.bindingIndex=t.bindingRootIndex=n,Rf(e)}function bb(){return ve.lFrame.currentDirectiveIndex}function Rf(n){ve.lFrame.currentDirectiveIndex=n}function Tb(n){let e=ve.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function ov(n){ve.lFrame.currentQueryIndex=n}function NO(n){let e=n[de];return e.type===2?e.declTNode:e.type===1?n[_n]:null}function sv(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=NO(o),i===null||(o=o[Ps],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ve.lFrame=Sb();return r.currentTNode=e,r.lView=n,!0}function Nf(n){let e=Sb(),t=n[de];ve.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Sb(){let n=ve.lFrame,e=n===null?null:n.child;return e===null?Ab(n):e}function Ab(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Mb(){let n=ve.lFrame;return ve.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var av=Mb;function Pf(){let n=Mb();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Ls(){return ve.lFrame.selectedIndex}function li(n){ve.lFrame.selectedIndex=n}function uv(){let n=ve.lFrame;return Af(n.tView,n.selectedIndex)}function xb(){return ve.lFrame.currentNamespace}var Rb=!0;function cv(){return Rb}function lv(n){Rb=n}function Dy(n,e=null,t=null,r){let i=dv(n,e,t,r);return i.resolveInjectorInitializers(),i}function dv(n,e=null,t=null,r,i=new Set){let o=[t||an,bf(n)];return r=r||(typeof n=="object"?void 0:br(n)),new co(o,e||nc(),r||null,i)}var Nt=class n{static THROW_IF_NOT_FOUND=oo;static NULL=new Qu;static create(e,t){if(Array.isArray(e))return Dy({name:""},t,e,"");{let r=e.name??"";return Dy({name:r},e.parent,e.providers,r)}}static \u0275prov=Z({token:n,providedIn:"any",factory:()=>z(Vy)});static __NG_ELEMENT_ID__=-1},nt=new Q(""),Ar=(()=>{class n{static __NG_ELEMENT_ID__=PO;static __NG_ENV_ID__=t=>t}return n})(),Cy=class extends Ar{_lView;constructor(e){super(),this._lView=e}get destroyed(){return po(this._lView)}onDestroy(e){let t=this._lView;return Yy(t,e),()=>db(t,e)}};function PO(){return new Cy(qe())}var xn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},ln=new Q("",{providedIn:"root",factory:()=>{let n=k(Ve),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(xn),e.handleError(t))}}}),Nb={provide:ii,useValue:()=>void k(xn),multi:!0};function Zt(n,e){let[t,r,i]=Qm(n,e?.equal),o=t,s=o[$t];return o.set=r,o.update=i,o.asReadonly=Pb.bind(o),o}function Pb(){let n=this[$t];if(n.readonlyFn===void 0){let e=()=>this();e[$t]=n,n.readonlyFn=e}return n.readonlyFn}var Of=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=OO}return n})();function OO(){return new Of(qe(),Pt())}var Tr=class{},kf=new Q("",{providedIn:"root",factory:()=>!1});var fv=new Q(""),hv=new Q(""),Jn=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new vt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ue(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=Z({token:n,providedIn:"root",factory:()=>new n})}return n})(),hc=(()=>{class n{internalPendingTasks=k(Jn);scheduler=k(Tr);errorHandler=k(ln);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=Z({token:n,providedIn:"root",factory:()=>new n})}return n})();function pc(...n){}var pv=(()=>{class n{static \u0275prov=Z({token:n,providedIn:"root",factory:()=>new by})}return n})(),by=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function Hs(n){return{toString:n}.toString()}var Ff="__parameters__";function qO(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function zO(n,e,t){return Hs(()=>{let r=qO(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,f){let p=u.hasOwnProperty(Ff)?u[Ff]:Object.defineProperty(u,Ff,{value:[]})[Ff];for(;p.length<=f;)p.push(null);return(p[f]=p[f]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Hv=Z0(zO("Optional"),8);function GO(n){return typeof n=="function"}var Hf=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function dT(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var wo=(()=>{let n=()=>fT;return n.ngInherit=!0,n})();function fT(n){return n.type.prototype.ngOnChanges&&(n.setInput=KO),WO}function WO(){let n=pT(this),e=n?.current;if(e){let t=n.previous;if(t===ri)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function KO(n,e,t,r,i){let o=this.declaredInputs[r],s=pT(n)||QO(n,{previous:ri,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Hf(l&&l.currentValue,t,u===ri),dT(n,e,i,t)}var hT="__ngSimpleChanges__";function pT(n){return n[hT]||null}function QO(n,e){return n[hT]=e}var Ob=[];var Me=function(n,e=null,t){for(let r=0;r<Ob.length;r++){let i=Ob[r];i(n,e,t)}};function YO(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=fT(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function ZO(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:f}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),f!=null&&(n.destroyHooks??=[]).push(t,f)}}function jf(n,e,t){gT(n,e,3,t)}function Bf(n,e,t,r){(n[ce]&3)===t&&gT(n,e,t,r)}function gv(n,e){let t=n[ce];(t&3)===e&&(t&=16383,t+=1,n[ce]=t)}function gT(n,e,t,r){let i=r!==void 0?n[fo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[fo]+=65536),(a<o||o==-1)&&(JO(n,t,e,u),n[fo]=(n[fo]&4294901760)+u+2),u++}function kb(n,e){Me(4,n,e);let t=me(null);try{e.call(n)}finally{me(t),Me(5,n,e)}}function JO(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ce]>>14<n[fo]>>16&&(n[ce]&3)===e&&(n[ce]+=16384,kb(a,o)):kb(a,o)}var js=-1,mo=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function XO(n){return(n.flags&8)!==0}function ek(n){return(n.flags&16)!==0}function tk(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];nk(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function mT(n){return n===3||n===4||n===6}function nk(n){return n.charCodeAt(0)===64}function yc(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?Fb(n,t,i,null,e[++r]):Fb(n,t,i,null,null))}}return n}function Fb(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function yT(n){return n!==js}function qf(n){return n&32767}function rk(n){return n>>16}function zf(n,e){let t=rk(n),r=e;for(;t>0;)r=r[Ps],t--;return r}var Cv=!0;function Lb(n){let e=Cv;return Cv=n,e}var ik=256,vT=ik-1,_T=5,ok=0,Xn={};function sk(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(lo)&&(r=t[lo]),r==null&&(r=t[lo]=ok++);let i=r&vT,o=1<<i;e.data[n+(i>>_T)]|=o}function Gf(n,e){let t=ET(n,e);if(t!==-1)return t;let r=e[de];r.firstCreatePass&&(n.injectorIndex=e.length,mv(r.data,n),mv(e,null),mv(r.blueprint,null));let i=qv(n,e),o=n.injectorIndex;if(yT(i)){let s=qf(i),a=zf(i,e),u=a[de].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function mv(n,e){n.push(0,0,0,0,0,0,0,0,e)}function ET(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function qv(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=bT(i),r===null)return js;if(t++,i=i[Ps],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return js}function bv(n,e,t){sk(n,e,t)}function ak(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(mT(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function wT(n,e,t){if(t&8||n!==void 0)return n;If(e,"NodeInjector")}function IT(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[oi],o=sn(void 0);try{return i?i.get(e,r,t&8):Fy(e,r,t&8)}finally{sn(o)}}return wT(r,e,t)}function DT(n,e,t,r=0,i){if(n!==null){if(e[ce]&2048&&!(r&2)){let s=fk(n,e,t,r,Xn);if(s!==Xn)return s}let o=CT(n,e,t,r,Xn);if(o!==Xn)return o}return IT(e,t,r,i)}function CT(n,e,t,r,i){let o=lk(t);if(typeof o=="function"){if(!sv(e,n,r))return r&1?wT(i,t,r):IT(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))If(t);else return s}finally{av()}}else if(typeof o=="number"){let s=null,a=ET(n,e),u=js,l=r&1?e[En][_n]:null;for((a===-1||r&4)&&(u=a===-1?qv(n,e):e[a+8],u===js||!jb(r,!1)?a=-1:(s=e[de],a=qf(u),e=zf(u,e)));a!==-1;){let f=e[de];if(Vb(o,a,f.data)){let p=uk(a,e,t,s,r,l);if(p!==Xn)return p}u=e[a+8],u!==js&&jb(r,e[de].data[a+8]===l)&&Vb(o,a,e)?(s=f,a=qf(u),e=zf(u,e)):a=-1}}return i}function uk(n,e,t,r,i,o){let s=e[de],a=s.data[n+8],u=r==null?ai(a)&&Cv:r!=s&&(a.type&3)!==0,l=i&1&&o===a,f=ck(a,s,t,u,l);return f!==null?Wf(e,s,f,a,i):Xn}function ck(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,f=o>>20,p=r?a:a+f,m=i?a+f:l;for(let y=p;y<m;y++){let b=s[y];if(y<u&&t===b||y>=u&&b.type===t)return y}if(i){let y=s[u];if(y&&Zn(y)&&y.type===t)return u}return null}function Wf(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof mo){let a=o;if(a.resolving){let y=W0(s[t]);throw ky(y)}let u=Lb(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],f,p=a.injectImpl?sn(a.injectImpl):null,m=sv(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&YO(t,s[t],e)}finally{p!==null&&sn(p),Lb(u),a.resolving=!1,av()}}return o}function lk(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(lo)?n[lo]:void 0;return typeof e=="number"?e>=0?e&vT:dk:e}function Vb(n,e,t){let r=1<<n;return!!(t[e+(n>>_T)]&r)}function jb(n,e){return!(n&2)&&!(n&1&&e)}var go=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return DT(this._tNode,this._lView,e,so(r),t)}};function dk(){return new go(Pt(),qe())}function Ic(n){return Hs(()=>{let e=n.prototype.constructor,t=e[Ku]||Tv(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Ku]||Tv(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Tv(n){return Ay(n)?()=>{let e=Tv(_t(n));return e&&e()}:ao(n)}function fk(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ce]&2048&&!ks(s);){let a=CT(o,s,t,r|2,Xn);if(a!==Xn)return a;let u=o.parent;if(!u){let l=s[Gy];if(l){let f=l.get(t,Xn,r);if(f!==Xn)return f}u=bT(s),s=s[Ps]}o=u}return i}function bT(n){let e=n[de],t=e.type;return t===2?e.declTNode:t===1?n[_n]:null}function Dc(n){return ak(Pt(),n)}function hk(){return zv(Pt(),qe())}function zv(n,e){return new Io(Pn(n,e))}var Io=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=hk}return n})();function TT(n){return(n.flags&128)===128}var Gv=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(Gv||{}),ST=new Map,pk=0;function gk(){return pk++}function mk(n){ST.set(n[oc],n)}function Sv(n){ST.delete(n[oc])}var Bb="__ngContext__";function vc(n,e){Yn(e)?(n[Bb]=e[oc],mk(e)):n[Bb]=e}function AT(n){return xT(n[Ns])}function MT(n){return xT(n[vn])}function xT(n){for(;n!==null&&!Nn(n);)n=n[vn];return n}var Av;function Wv(n){Av=n}function RT(){if(Av!==void 0)return Av;if(typeof document<"u")return document;throw new X(210,!1)}var sh=new Q("",{providedIn:"root",factory:()=>yk}),yk="ng",ah=new Q(""),Dn=new Q("",{providedIn:"platform",factory:()=>"unknown"});var uh=new Q("",{providedIn:"root",factory:()=>RT().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var vk="h",_k="b";var NT=!1,PT=new Q("",{providedIn:"root",factory:()=>NT});var Kv=new Q("");var Ek=(n,e,t,r)=>{};function wk(n,e,t,r){Ek(n,e,t,r)}function Qv(n){return(n.flags&32)===32}var Ik=()=>null;function OT(n,e,t=!1){return Ik(n,e,t)}function kT(n,e){let t=n.contentQueries;if(t!==null){let r=me(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];ov(o),a.contentQueries(2,e[s],s)}}}finally{me(r)}}}function Mv(n,e,t){ov(0);let r=me(null);try{e(n,t)}finally{me(r)}}function FT(n,e,t){if(Wy(e)){let r=me(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{me(r)}}}var Mr=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(Mr||{});var Lf;function Dk(){if(Lf===void 0&&(Lf=null,Zu.trustedTypes))try{Lf=Zu.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Lf}function Ub(n){return Dk()?.createScriptURL(n)||n}var Kf=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${_f})`}};function Cc(n){return n instanceof Kf?n.changingThisBreaksApplicationSecurity:n}function Yv(n,e){let t=LT(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${_f})`)}return t===e}function LT(n){return n instanceof Kf&&n.getTypeName()||null}var Ck=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function VT(n){return n=String(n),n.match(Ck)?n:"unsafe:"+n}var ch=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(ch||{});function jT(n){let e=UT();return e?e.sanitize(ch.URL,n)||"":Yv(n,"URL")?Cc(n):VT(wf(n))}function BT(n){let e=UT();if(e)return Ub(e.sanitize(ch.RESOURCE_URL,n)||"");if(Yv(n,"ResourceURL"))return Ub(Cc(n));throw new X(904,!1)}function bk(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?BT:jT}function Zv(n,e,t){return bk(e,t)(n)}function UT(){let n=qe();return n&&n[Qn].sanitizer}function $T(n){return n instanceof Function?n():n}function Tk(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var HT="ng-template";function Sk(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Tk(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Jv(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Jv(n){return n.type===4&&n.value!==HT}function Ak(n,e,t){let r=n.type===4&&!t?HT:n.value;return e===r}function Mk(n,e,t){let r=4,i=n.attrs,o=i!==null?Nk(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!kn(r)&&!kn(u))return!1;if(s&&kn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!Ak(n,u,t)||u===""&&e.length===1){if(kn(r))return!1;s=!0}}else if(r&8){if(i===null||!Sk(n,i,u,t)){if(kn(r))return!1;s=!0}}else{let l=e[++a],f=xk(u,i,Jv(n),t);if(f===-1){if(kn(r))return!1;s=!0;continue}if(l!==""){let p;if(f>o?p="":p=i[f+1].toLowerCase(),r&2&&l!==p){if(kn(r))return!1;s=!0}}}}return kn(r)||s}function kn(n){return(n&1)===0}function xk(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Pk(e,n)}function Rk(n,e,t=!1){for(let r=0;r<e.length;r++)if(Mk(n,e[r],t))return!0;return!1}function Nk(n){for(let e=0;e<n.length;e++){let t=n[e];if(mT(t))return e}return n.length}function Pk(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function $b(n,e){return n?":not("+e.trim()+")":e}function Ok(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!kn(s)&&(e+=$b(o,i),i=""),r=s,o=o||!kn(r);t++}return i!==""&&(e+=$b(o,i)),e}function kk(n){return n.map(Ok).join(",")}function Fk(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!kn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var qs={};function Lk(n,e){return n.createText(e)}function qT(n,e,t){return n.createElement(e,t)}function Qf(n,e,t,r,i){n.insertBefore(e,t,r,i)}function zT(n,e,t){n.appendChild(e,t)}function Hb(n,e,t,r,i){r!==null?Qf(n,e,t,r,i):zT(n,e,t)}function Vk(n,e,t,r){n.removeChild(null,e,t,r)}function jk(n,e,t){n.setAttribute(e,"style",t)}function Bk(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function GT(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&tk(n,e,r),i!==null&&Bk(n,e,i),o!==null&&jk(n,e,o)}function WT(n,e,t,r,i,o,s,a,u,l,f){let p=cn+r,m=p+i,y=Uk(p,m),b=typeof l=="function"?l():l;return y[de]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:b,incompleteFirstPass:!1,ssrId:f}}function Uk(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:qs);return t}function $k(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=WT(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function KT(n,e,t,r,i,o,s,a,u,l,f){let p=e.blueprint.slice();return p[Rn]=i,p[ce]=r|4|128|8|64|1024,(l!==null||n&&n[ce]&2048)&&(p[ce]|=2048),Ky(p),p[Et]=p[Ps]=n,p[qt]=t,p[Qn]=s||n&&n[Qn],p[lt]=a||n&&n[lt],p[oi]=u||n&&n[oi]||null,p[_n]=o,p[oc]=gk(),p[rc]=f,p[Gy]=l,p[En]=e.type==2?n[En]:p,p}function Hk(n,e,t){let r=Pn(e,n),i=$k(t),o=n[Qn].rendererFactory,s=ZT(n,KT(n,i,null,QT(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function QT(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function YT(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function ZT(n,e){return n[Ns]?n[zy][vn]=e:n[Ns]=e,n[zy]=e,e}function di(n=1){JT(On(),qe(),Ls()+n,!1)}function JT(n,e,t,r){if(!r)if((e[ce]&3)===3){let o=n.preOrderCheckHooks;o!==null&&jf(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Bf(e,o,0,t)}li(t)}var lh=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(lh||{});function xv(n,e,t,r){let i=me(null);try{let[o,s,a]=n.inputs[t],u=null;(s&lh.SignalBased)!==0&&(u=e[o][$t]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):dT(e,u,o,r)}finally{me(i)}}var xr=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(xr||{}),qk;function Xv(n,e){return qk(n,e)}var Bs=new Set,dh=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(dh||{}),Do=new Q(""),qb=new Set;function zs(n){qb.has(n)||(qb.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var XT=!1,Rv=class extends Le{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,ib()&&(this.destroyRef=k(Ar,{optional:!0})??void 0,this.pendingTasks=k(Jn,{optional:!0})??void 0)}emit(e){let t=me(null);try{super.next(e)}finally{me(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Qe&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},dt=Rv;function eS(n){let e,t;function r(){n=pc;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function zb(n){return queueMicrotask(()=>n()),()=>{n=pc}}var e_="isAngularZone",Yf=e_+"_ID",zk=0,Ae=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new dt(!1);onMicrotaskEmpty=new dt(!1);onStable=new dt(!1);onError=new dt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=XT}=e;if(typeof Zone>"u")throw new X(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,Kk(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(e_)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new X(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new X(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Gk,pc,pc);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Gk={};function t_(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Wk(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){eS(()=>{n.callbackScheduled=!1,Nv(n),n.isCheckStableRunning=!0,t_(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Nv(n)}function Kk(n){let e=()=>{Wk(n)},t=zk++;n._inner=n._inner.fork({name:"angular",properties:{[e_]:!0,[Yf]:t,[Yf+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(Qk(u))return r.invokeTask(o,s,a,u);try{return Gb(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Wb(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return Gb(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Yk(u)&&e(),Wb(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Nv(n),t_(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Nv(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Gb(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Wb(n){n._nesting--,t_(n)}var Zf=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new dt;onMicrotaskEmpty=new dt;onStable=new dt;onError=new dt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function Qk(n){return tS(n,"__ignore_ng_zone__")}function Yk(n){return tS(n,"__scheduler_tick__")}function tS(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var n_=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=Z({token:n,providedIn:"root",factory:()=>new n})}return n})(),nS=[0,1,2,3],rS=(()=>{class n{ngZone=k(Ae);scheduler=k(Tr);errorHandler=k(xn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){k(Do,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Me(16),this.executing=!0;for(let r of nS)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Me(17)}register(t){let{view:r}=t;r!==void 0?((r[ho]??=[]).push(t),Fs(r),r[ce]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(dh.AFTER_NEXT_RENDER,t):t()}static \u0275prov=Z({token:n,providedIn:"root",factory:()=>new n})}return n})(),Jf=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[ho];e&&(this.view[ho]=e.filter(t=>t!==this))}};function fh(n,e){let t=e?.injector??k(Nt);return zs("NgAfterNextRender"),Jk(n,t,e,!0)}function Zk(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function Jk(n,e,t,r){let i=e.get(n_);i.impl??=e.get(rS);let o=e.get(Do,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(Ar):null,a=e.get(Of,null,{optional:!0}),u=new Jf(i.impl,Zk(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}var Xk=new Q("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function iS(n,e){let t=n.get(Xk);if(Array.isArray(e))for(let r of e)t.queue.add(r);else t.queue.add(e);t.scheduler&&t.scheduler(n)}function eF(n,e){for(let[t,r]of e)iS(n,r.animateFns)}function Kb(n,e,t,r){let i=n?.[ac]?.enter;e!==null&&i&&i.has(t.index)&&eF(r,i)}function Vs(n,e,t,r,i,o,s,a){if(i!=null){let u,l=!1;Nn(i)?u=i:Yn(i)&&(l=!0,i=i[Rn]);let f=wn(i);n===0&&r!==null?(Kb(a,r,o,t),s==null?zT(e,r,f):Qf(e,r,f,s||null,!0)):n===1&&r!==null?(Kb(a,r,o,t),Qf(e,r,f,s||null,!0)):n===2?Qb(a,o,t,p=>{Vk(e,f,l,p)}):n===3&&Qb(a,o,t,()=>{e.destroyNode(f)}),u!=null&&hF(e,n,t,u,o,r,s)}}function tF(n,e){oS(n,e),e[Rn]=null,e[_n]=null}function nF(n,e,t,r,i,o){r[Rn]=i,r[_n]=e,hh(n,r,t,1,i,o)}function oS(n,e){e[Qn].changeDetectionScheduler?.notify(9),hh(n,e,e[lt],2,null,null)}function rF(n){let e=n[Ns];if(!e)return yv(n[de],n);for(;e;){let t=null;if(Yn(e))t=e[Ns];else{let r=e[Yt];r&&(t=r)}if(!t){for(;e&&!e[vn]&&e!==n;)Yn(e)&&yv(e[de],e),e=e[Et];e===null&&(e=n),Yn(e)&&yv(e[de],e),t=e&&e[vn]}e=t}}function r_(n,e){let t=n[cc],r=t.indexOf(e);t.splice(r,1)}function sS(n,e){if(po(e))return;let t=e[lt];t.destroyNode&&hh(n,e,t,3,null,null),rF(e)}function yv(n,e){if(po(e))return;let t=me(null);try{e[ce]&=-129,e[ce]|=256,e[un]&&Lu(e[un]),sF(n,e),oF(n,e),e[de].type===1&&e[lt].destroy();let r=e[Os];if(r!==null&&Nn(e[Et])){r!==e[Et]&&r_(r,e);let i=e[ic];i!==null&&i.detachView(n)}Sv(e)}finally{me(t)}}function Qb(n,e,t,r){let i=n?.[ac];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);if(i.skipLeaveAnimations)return i.skipLeaveAnimations=!1,r(!1);n&&Bs.add(n),iS(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s)for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:f}=l();a.push(f)}i.running=Promise.allSettled(a),iF(n,r)}else n&&Bs.delete(n),r(!1)})}function iF(n,e){let t=n[ac]?.running;if(t){t.then(()=>{n[ac].running=void 0,Bs.delete(n),e(!0)});return}e(!1)}function oF(n,e){let t=n.cleanup,r=e[Rs];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Rs]=null);let i=e[Cr];if(i!==null){e[Cr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[sc];if(o!==null){e[sc]=null;for(let s of o)s.destroy()}}function sF(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof mo)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Me(4,a,u);try{u.call(a)}finally{Me(5,a,u)}}else{Me(4,i,o);try{o.call(i)}finally{Me(5,i,o)}}}}}function aF(n,e,t){return uF(n,e.parent,t)}function uF(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Rn];if(ai(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Mr.None||i===Mr.Emulated)return null}return Pn(r,t)}function cF(n,e,t){return dF(n,e,t)}function lF(n,e,t){return n.type&40?Pn(n,t):null}var dF=lF,Yb;function aS(n,e,t,r){let i=aF(n,r,e),o=e[lt],s=r.parent||e[_n],a=cF(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)Hb(o,i,t[u],a,!1);else Hb(o,i,t,a,!1);Yb!==void 0&&Yb(o,r,e,t,i)}function gc(n,e){if(e!==null){let t=e.type;if(t&3)return Pn(e,n);if(t&4)return Pv(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return gc(n,r);{let i=n[e.index];return Nn(i)?Pv(-1,i):wn(i)}}else{if(t&128)return gc(n,e.next);if(t&32)return Xv(e,n)()||wn(n[e.index]);{let r=uS(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ni(n[En]);return gc(i,r)}else return gc(n,e.next)}}}return null}function uS(n,e){if(e!==null){let r=n[En][_n],i=e.projection;return r.projection[i]}return null}function Pv(n,e){let t=Yt+n+1;if(t<e.length){let r=e[t],i=r[de].firstChild;if(i!==null)return gc(r,i)}return e[si]}function i_(n,e,t,r,i,o,s){for(;t!=null;){let a=r[oi];if(t.type===128){t=t.next;continue}let u=r[t.index],l=t.type;if(s&&e===0&&(u&&vc(wn(u),r),t.flags|=2),!Qv(t))if(l&8)i_(n,e,t.child,r,i,o,!1),Vs(e,n,a,i,u,t,o,r);else if(l&32){let f=Xv(t,r),p;for(;p=f();)Vs(e,n,a,i,p,t,o,r);Vs(e,n,a,i,u,t,o,r)}else l&16?fF(n,e,r,t,i,o):Vs(e,n,a,i,u,t,o,r);t=s?t.projectionNext:t.next}}function hh(n,e,t,r,i,o){i_(t,r,n.firstChild,e,i,o,!1)}function fF(n,e,t,r,i,o){let s=t[En],u=s[_n].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let f=u[l];Vs(e,n,t[oi],i,f,r,o,t)}else{let l=u,f=s[Et];TT(r)&&(l.flags|=128),i_(n,e,l,f,i,o,!0)}}function hF(n,e,t,r,i,o,s){let a=r[si],u=wn(r);a!==u&&Vs(e,n,t,o,a,i,s);for(let l=Yt;l<r.length;l++){let f=r[l];hh(f[de],f,n,e,o,a)}}function pF(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:xr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=xr.Important),n.setStyle(t,r,i,o))}}function cS(n,e,t,r,i){let o=Ls(),s=r&2;try{li(-1),s&&e.length>cn&&JT(n,e,cn,!1),Me(s?2:0,i,t),t(r,i)}finally{li(o),Me(s?3:1,i,t)}}function lS(n,e,t){IF(n,e,t),(t.flags&64)===64&&DF(n,e,t)}function dS(n,e,t=Pn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function gF(n,e,t,r){let o=r.get(PT,NT)||t===Mr.ShadowDom,s=n.selectRootElement(e,o);return mF(s),s}function mF(n){yF(n)}var yF=()=>null;function vF(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function _F(n,e,t,r,i,o){let s=e[de];if(o_(n,s,e,t,r)){ai(n)&&wF(e,n.index);return}n.type&3&&(t=vF(t)),EF(n,e,t,r,i,o)}function EF(n,e,t,r,i,o){if(n.type&3){let s=Pn(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function wF(n,e){let t=In(e,n);t[ce]&16||(t[ce]|=64)}function IF(n,e,t){let r=t.directiveStart,i=t.directiveEnd;ai(t)&&Hk(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Gf(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=Wf(e,n,s,t);if(vc(u,e),o!==null&&AF(e,s-r,u,a,t,o),Zn(a)){let l=In(t.index,e);l[qt]=Wf(e,n,s,t)}}}function DF(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=bb();try{li(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Rf(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&CF(u,l)}}finally{li(-1),Rf(s)}}function CF(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function bF(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];Rk(e,o.selectors,!1)&&(r??=[],Zn(o)?r.unshift(o):r.push(o))}return r}function TF(n,e,t,r,i,o){let s=Pn(n,e);SF(e[lt],s,o,n.value,t,r,i)}function SF(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?wf(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function AF(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];xv(r,t,u,l)}}function fS(n,e,t,r,i){let o=cn+t,s=e[de],a=i(s,e,n,r,t);e[o]=a,fc(n,!0);let u=n.type===2;return u?(GT(e[lt],a,n),(pb()===0||Sf(n))&&vc(a,e),gb()):vc(a,e),cv()&&(!u||!Qv(n))&&aS(s,e,a,n),n}function hS(n){let e=n;return tv()?_b():(e=e.parent,fc(e,!1)),e}function MF(n,e){let t=n[oi];if(!t)return;let r;try{r=t.get(ln,null)}catch{r=null}r?.(e)}function o_(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],f=s[u+1],p=e.data[l];xv(p,t[l],f,i),a=!0}if(o)for(let u of o){let l=t[u],f=e.data[u];xv(f,l,r,i),a=!0}return a}function xF(n,e){let t=In(e,n),r=t[de];RF(r,t);let i=t[Rn];i!==null&&t[rc]===null&&(t[rc]=OT(i,t[oi])),Me(18),pS(r,t,t[qt]),Me(19,t[qt])}function RF(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function pS(n,e,t){Nf(e);try{let r=n.viewQuery;r!==null&&Mv(1,r,t);let i=n.template;i!==null&&cS(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[ic]?.finishViewCreation(n),n.staticContentQueries&&kT(n,e),n.staticViewQueries&&Mv(2,n.viewQuery,t);let o=n.components;o!==null&&NF(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ce]&=-5,Pf()}}function NF(n,e){for(let t=0;t<e.length;t++)xF(n,e[t])}function Zb(n,e){return!e||e.firstChild===null||TT(n)}function _c(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(wn(o)),Nn(o)&&gS(o,r);let s=t.type;if(s&8)_c(n,e,t.child,r);else if(s&32){let a=Xv(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=uS(e,t);if(Array.isArray(a))r.push(...a);else{let u=ni(e[En]);_c(u[de],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function gS(n,e){for(let t=Yt;t<n.length;t++){let r=n[t],i=r[de].firstChild;i!==null&&_c(r[de],r,i,e)}n[si]!==n[Rn]&&e.push(n[si])}function mS(n){if(n[ho]!==null){for(let e of n[ho])e.impl.addSequence(e);n[ho].length=0}}var yS=[];function PF(n){return n[un]??OF(n)}function OF(n){let e=yS.pop()??Object.create(FF);return e.lView=n,e}function kF(n){n.lView[un]!==n&&(n.lView=null,yS.push(n))}var FF=le(B({},ds),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Fs(n.lView)},consumerOnSignalRead(){this.lView[un]=this}});function LF(n){let e=n[un]??Object.create(VF);return e.lView=n,e}var VF=le(B({},ds),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=ni(n.lView);for(;e&&!vS(e[de]);)e=ni(e);e&&Qy(e)},consumerOnSignalRead(){this.lView[un]=this}});function vS(n){return n.type!==2}function _S(n){if(n[sc]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[sc])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[ce]&8192)}}var jF=100;function ES(n,e=0){let r=n[Qn].rendererFactory,i=!1;i||r.begin?.();try{BF(n,e)}finally{i||r.end?.()}}function BF(n,e){let t=nv();try{rv(!0),Ov(n,e);let r=0;for(;dc(n);){if(r===jF)throw new X(103,!1);r++,Ov(n,1)}}finally{rv(t)}}function UF(n,e,t,r){if(po(e))return;let i=e[ce],o=!1,s=!1;Nf(e);let a=!0,u=null,l=null;o||(vS(n)?(l=PF(e),u=hs(l)):Ld()===null?(a=!1,l=LF(e),u=hs(l)):e[un]&&(Lu(e[un]),e[un]=null));try{Ky(e),wb(n.bindingStartIndex),t!==null&&cS(n,e,t,2,r);let f=(i&3)===3;if(!o)if(f){let y=n.preOrderCheckHooks;y!==null&&jf(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Bf(e,y,0,null),gv(e,0)}if(s||$F(e),_S(e),wS(e,0),n.contentQueries!==null&&kT(n,e),!o)if(f){let y=n.contentCheckHooks;y!==null&&jf(e,y)}else{let y=n.contentHooks;y!==null&&Bf(e,y,1),gv(e,1)}qF(n,e);let p=n.components;p!==null&&DS(e,p,0);let m=n.viewQuery;if(m!==null&&Mv(2,m,r),!o)if(f){let y=n.viewCheckHooks;y!==null&&jf(e,y)}else{let y=n.viewHooks;y!==null&&Bf(e,y,2),gv(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Tf]){for(let y of e[Tf])y();e[Tf]=null}o||(mS(e),e[ce]&=-73)}catch(f){throw o||Fs(e),f}finally{l!==null&&(ku(l,u),a&&kF(l)),Pf()}}function wS(n,e){for(let t=AT(n);t!==null;t=MT(t))for(let r=Yt;r<t.length;r++){let i=t[r];IS(i,e)}}function $F(n){for(let e=AT(n);e!==null;e=MT(e)){if(!(e[ce]&2))continue;let t=e[cc];for(let r=0;r<t.length;r++){let i=t[r];Qy(i)}}}function HF(n,e,t){Me(18);let r=In(e,n);IS(r,t),Me(19,r[qt])}function IS(n,e){Mf(n)&&Ov(n,e)}function Ov(n,e){let r=n[de],i=n[ce],o=n[un],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Fu(o)),s||=!1,o&&(o.dirty=!1),n[ce]&=-9217,s)UF(r,n,r.template,n[qt]);else if(i&8192){let a=me(null);try{_S(n),wS(n,1);let u=r.components;u!==null&&DS(n,u,1),mS(n)}finally{me(a)}}}function DS(n,e,t){for(let r=0;r<e.length;r++)HF(n,e[r],t)}function qF(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)li(~i);else{let o=i,s=t[++r],a=t[++r];Cb(s,o);let u=e[o];Me(24,u),a(2,u),Me(25,u)}}}finally{li(-1)}}function s_(n,e){let t=nv()?64:1088;for(n[Qn].changeDetectionScheduler?.notify(e);n;){n[ce]|=t;let r=ni(n);if(ks(n)&&!r)return n;n=r}return null}function zF(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function GF(n,e,t,r=!0){let i=e[de];if(WF(i,e,n,t),r){let s=Pv(t,n),a=e[lt],u=a.parentNode(n[si]);u!==null&&nF(i,n[_n],a,e,u,s)}let o=e[rc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function kv(n,e){if(n.length<=Yt)return;let t=Yt+e,r=n[t];if(r){let i=r[Os];i!==null&&i!==n&&r_(i,r),e>0&&(n[t-1][vn]=r[vn]);let o=Xu(n,Yt+e);tF(r[de],r);let s=o[ic];s!==null&&s.detachView(o[de]),r[Et]=null,r[vn]=null,r[ce]&=-129}return r}function WF(n,e,t,r){let i=Yt+r,o=t.length;r>0&&(t[i-1][vn]=e),r<o-Yt?(e[vn]=t[i],Ly(t,Yt+r,e)):(t.push(e),e[vn]=null),e[Et]=t;let s=e[Os];s!==null&&t!==s&&CS(s,e);let a=e[ic];a!==null&&a.insertView(n),xf(e),e[ce]|=128}function CS(n,e){let t=n[cc],r=e[Et];if(Yn(r))n[ce]|=2;else{let i=r[Et][En];e[En]!==i&&(n[ce]|=2)}t===null?n[cc]=[e]:t.push(e)}var yo=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[de];return _c(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[qt]}set context(e){this._lView[qt]=e}get destroyed(){return po(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Et];if(Nn(e)){let t=e[uc],r=t?t.indexOf(this):-1;r>-1&&(kv(e,r),Xu(t,r))}this._attachedToViewContainer=!1}sS(this._lView[de],this._lView)}onDestroy(e){Yy(this._lView,e)}markForCheck(){s_(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ce]&=-129}reattach(){xf(this._lView),this._lView[ce]|=128}detectChanges(){this._lView[ce]|=1024,ES(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new X(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ks(this._lView),t=this._lView[Os];t!==null&&!e&&r_(t,this._lView),oS(this._lView[de],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new X(902,!1);this._appRef=e;let t=ks(this._lView),r=this._lView[Os];r!==null&&!t&&CS(r,this._lView),xf(this._lView)}};function a_(n,e,t,r,i){let o=n.data[e];if(o===null)o=KF(n,e,t,r,i),Db()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=vb();o.injectorIndex=s===null?-1:s.injectorIndex}return fc(o,!0),o}function KF(n,e,t,r,i){let o=ev(),s=tv(),a=s?o:o&&o.parent,u=n.data[e]=YF(n,a,t,e,r,i);return QF(n,u,o,s),u}function QF(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function YF(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return yb()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var U6=new RegExp(`^(\\d+)*(${_k}|${vk})*(.*)`);var ZF=()=>null;function Jb(n,e){return ZF(n,e)}var bS=class{},ph=class{},Fv=class{resolveComponentFactory(e){throw new X(917,!1)}},bc=class{static NULL=new Fv},vo=class{},Gs=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>JF()}return n})();function JF(){let n=qe(),e=Pt(),t=In(e.index,n);return(Yn(t)?t:n)[lt]}var TS=(()=>{class n{static \u0275prov=Z({token:n,providedIn:"root",factory:()=>null})}return n})();var Uf={},Lv=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Uf,r);return i!==Uf||t===Uf?i:this.parentInjector.get(e,t,r)}};function Xf(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Sy(i,a);else if(o==2){let u=a,l=e[++s];r=Sy(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Ie(n,e=0){let t=qe();if(t===null)return z(n,e);let r=Pt();return DT(r,t,_t(n),e)}function u_(){let n="invalid";throw new Error(n)}function XF(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,u=null,l=null;for(let f of s)if(f.resolveHostDirectives!==null){[a,u,l]=f.resolveHostDirectives(s);break}nL(n,e,t,a,o,u,l)}o!==null&&r!==null&&eL(t,r,o)}function eL(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new X(-301,!1);r.push(e[i],o)}}function tL(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function nL(n,e,t,r,i,o,s){let a=r.length,u=!1;for(let m=0;m<a;m++){let y=r[m];!u&&Zn(y)&&(u=!0,tL(n,t,m)),bv(Gf(t,e),n,y.type)}uL(t,n.data.length,a);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,f=!1,p=YT(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(t.mergedAttrs=yc(t.mergedAttrs,y.hostAttrs),iL(n,t,e,p,y),aL(p,y,i),s!==null&&s.has(y)){let[M,x]=s.get(y);t.directiveToIndex.set(y.type,[p,M+t.directiveStart,x+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let b=y.type.prototype;!l&&(b.ngOnChanges||b.ngOnInit||b.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!f&&(b.ngOnChanges||b.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),f=!0),p++}rL(n,t,o)}function rL(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))Xb(0,e,i,r),Xb(1,e,i,r),tT(e,r,!1);else{let o=t.get(i);eT(0,e,o,r),eT(1,e,o,r),tT(e,r,!0)}}}function Xb(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),SS(e,o)}}function eT(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),SS(e,s)}}function SS(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function tT(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Jv(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let f of l)if(f===e){s??=[],s.push(u,r[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let f=0;f<l.length;f+=2)if(l[f]===e){s??=[],s.push(l[f+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function iL(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ao(i.type,!0)),s=new mo(o,Zn(i),Ie,null);n.blueprint[r]=s,t[r]=s,oL(n,e,r,YT(n,t,i.hostVars,qs),i)}function oL(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;sL(s)!=a&&s.push(a),s.push(t,r,o)}}function sL(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function aL(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Zn(e)&&(t[""]=n)}}function uL(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function AS(n,e,t,r,i,o,s,a){let u=e[de],l=u.consts,f=lc(l,s),p=a_(u,n,t,r,f);return o&&XF(u,e,p,lc(l,a),i),p.mergedAttrs=yc(p.mergedAttrs,p.attrs),p.attrs!==null&&Xf(p,p.attrs,!1),p.mergedAttrs!==null&&Xf(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function MS(n,e){ZO(n,e),Wy(e)&&n.queries.elementEnd(e)}function cL(n,e,t,r,i,o){let s=e.consts,a=lc(s,i),u=a_(e,n,t,r,a);if(u.mergedAttrs=yc(u.mergedAttrs,u.attrs),o!=null){let l=lc(s,o);u.localNames=[];for(let f=0;f<l.length;f+=2)u.localNames.push(l[f],-1)}return u.attrs!==null&&Xf(u,u.attrs,!1),u.mergedAttrs!==null&&Xf(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function c_(n,e,t){if(t===qs)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function $f(n,e,t){return function r(i){let o=ai(n)?In(n.index,e):e;s_(o,5);let s=e[qt],a=nT(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)a=nT(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function nT(n,e,t,r){let i=me(null);try{return Me(6,e,t),t(r)!==!1}catch(o){return MF(n,o),!1}finally{Me(7,e,t),me(i)}}function xS(n,e,t,r,i,o,s,a){let u=Sf(n),l=!1,f=null;if(!r&&u&&(f=dL(e,t,o,n.index)),f!==null){let p=f.__ngLastListenerFn__||f;p.__ngNextListenerFn__=s,f.__ngLastListenerFn__=s,l=!0}else{let p=Pn(n,t),m=r?r(p):p;wk(t,m,o,a);let y=i.listen(m,o,a);if(!lL(o)){let b=r?M=>r(wn(M[n.index])):n.index;RS(b,e,t,o,a,y,!1)}}return l}function lL(n){return n.startsWith("animation")||n.startsWith("transition")}function dL(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Rs],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function RS(n,e,t,r,i,o,s){let a=e.firstCreatePass?hb(e):null,u=fb(t),l=u.length;u.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function rT(n,e,t,r,i,o){let s=e[t],a=e[de],l=a.data[t].outputs[r],p=s[l].subscribe(o);RS(n.index,a,e,i,o,p,!0)}var Vv=Symbol("BINDING");var eh=class extends bc{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Sr(e);return new _o(t,this.ngModule)}};function fL(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&lh.SignalBased)!==0};return i&&(o.transform=i),o})}function hL(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function pL(n,e,t){let r=e instanceof Ve?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Lv(t,r):t}function gL(n){let e=n.get(vo,null);if(e===null)throw new X(407,!1);let t=n.get(TS,null),r=n.get(Tr,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function mL(n,e){let t=NS(n);return qT(e,t,t==="svg"?sb:t==="math"?ab:null)}function NS(n){return(n.selectors[0][0]||"div").toLowerCase()}var _o=class extends ph{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=fL(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=hL(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=kk(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){Me(22);let a=me(null);try{let u=this.componentDef,l=yL(r,u,s,o),f=pL(u,i||this.ngModule,e),p=gL(f),m=p.rendererFactory.createRenderer(null,u),y=r?gF(m,r,u.encapsulation,f):mL(u,m),b=s?.some(iT)||o?.some(j=>typeof j!="function"&&j.bindings.some(iT)),M=KT(null,l,null,512|QT(u),null,null,p,m,f,null,OT(y,f,!0));M[cn]=y,Nf(M);let x=null;try{let j=AS(cn,M,2,"#host",()=>l.directiveRegistry,!0,0);GT(m,y,j),vc(y,M),lS(l,M,j),FT(l,j,M),MS(l,j),t!==void 0&&_L(j,this.ngContentSelectors,t),x=In(j.index,M),M[qt]=x[qt],pS(l,M,null)}catch(j){throw x!==null&&Sv(x),Sv(M),j}finally{Me(23),Pf()}return new th(this.componentType,M,!!b)}finally{me(a)}}};function yL(n,e,t,r){let i=n?["ng-version","20.3.6"]:Fk(e.selectors[0]),o=null,s=null,a=0;if(t)for(let f of t)a+=f[Vv].requiredVars,f.create&&(f.targetIdx=0,(o??=[]).push(f)),f.update&&(f.targetIdx=0,(s??=[]).push(f));if(r)for(let f=0;f<r.length;f++){let p=r[f];if(typeof p!="function")for(let m of p.bindings){a+=m[Vv].requiredVars;let y=f+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let f of r){let p=typeof f=="function"?f:f.type,m=Uy(p);u.push(m)}return WT(0,null,vL(o,s),1,a,u,null,null,null,[i],null)}function vL(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function iT(n){let e=n[Vv].kind;return e==="input"||e==="twoWay"}var th=class extends bS{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Af(t[de],cn),this.location=zv(this._tNode,t),this.instance=In(this._tNode.index,t)[qt],this.hostView=this.changeDetectorRef=new yo(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=o_(r,i[de],i,e,t);this.previousInputValues.set(e,t);let s=In(r.index,i);s_(s,1)}get injector(){return new go(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function _L(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Tc=(()=>{class n{static __NG_ELEMENT_ID__=EL}return n})();function EL(){let n=Pt();return IL(n,qe())}var wL=Tc,PS=class extends wL{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return zv(this._hostTNode,this._hostLView)}get injector(){return new go(this._hostTNode,this._hostLView)}get parentInjector(){let e=qv(this._hostTNode,this._hostLView);if(yT(e)){let t=zf(e,this._hostLView),r=qf(e),i=t[de].data[r+8];return new go(i,t)}else return new go(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=oT(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Yt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Jb(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,Zb(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let u=e&&!GO(e),l;if(u)l=t;else{let x=t||{};l=x.index,r=x.injector,i=x.projectableNodes,o=x.environmentInjector||x.ngModuleRef,s=x.directives,a=x.bindings}let f=u?e:new _o(Sr(e)),p=r||this.parentInjector;if(!o&&f.ngModule==null){let j=(u?p:this.parentInjector).get(Ve,null);j&&(o=j)}let m=Sr(f.componentType??{}),y=Jb(this._lContainer,m?.id??null),b=y?.firstChild??null,M=f.create(p,i,b,o,s,a);return this.insertImpl(M.hostView,l,Zb(this._hostTNode,y)),M}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(lb(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Et],l=new PS(u,u[_n],u[Et]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return GF(s,i,o,r),e.attachToViewContainerRef(),Ly(vv(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=oT(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=kv(this._lContainer,t);r&&(Xu(vv(this._lContainer),t),sS(r[de],r))}detach(e){let t=this._adjustIndex(e,-1),r=kv(this._lContainer,t);return r&&Xu(vv(this._lContainer),t)!=null?new yo(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function oT(n){return n[uc]}function vv(n){return n[uc]||(n[uc]=[])}function IL(n,e){let t,r=e[n.index];return Nn(r)?t=r:(t=zF(r,e,null,n),e[n.index]=t,ZT(e,t)),CL(t,e,n,r),new PS(t,n,e)}function DL(n,e){let t=n[lt],r=t.createComment(""),i=Pn(e,n),o=t.parentNode(i);return Qf(t,o,r,t.nextSibling(i),!1),r}var CL=bL;function bL(n,e,t,r){if(n[si])return;let i;t.type&8?i=wn(r):i=DL(e,t),n[si]=i}var Us=class{},gh=class{};var nh=class extends Us{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new eh(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=By(e);this._bootstrapComponents=$T(o.bootstrap),this._r3Injector=dv(e,t,[{provide:Us,useValue:this},{provide:bc,useValue:this.componentFactoryResolver},...r],br(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},rh=class extends gh{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new nh(this.moduleType,e,[])}};var Ec=class extends Us{injector;componentFactoryResolver=new eh(this);instance=null;constructor(e){super();let t=new co([...e.providers,{provide:Us,useValue:this},{provide:bc,useValue:this.componentFactoryResolver}],e.parent||nc(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ws(n,e,t=null){return new Ec({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var TL=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=$y(!1,t.type),i=r.length>0?Ws([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Z({token:n,providedIn:"environment",factory:()=>new n(z(Ve))})}return n})();function _e(n){return Hs(()=>{let e=OS(n),t=le(B({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Gv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(TL).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Mr.Emulated,styles:n.styles||an,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&zs("NgStandalone"),kS(t);let r=n.dependencies;return t.directiveDefs=sT(r,SL),t.pipeDefs=sT(r,eb),t.id=xL(t),t})}function SL(n){return Sr(n)||Uy(n)}function Ot(n){return Hs(()=>({type:n.type,bootstrap:n.bootstrap||an,declarations:n.declarations||an,imports:n.imports||an,exports:n.exports||an,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function AL(n,e){if(n==null)return ri;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=lh.None,u=null),t[o]=[r,a,u],e[o]=s}return t}function ML(n){if(n==null)return ri;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function er(n){return Hs(()=>{let e=OS(n);return kS(e),e})}function OS(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||ri,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||an,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:AL(n.inputs,e),outputs:ML(n.outputs),debugInfo:null}}function kS(n){n.features?.forEach(e=>e(n))}function sT(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function xL(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function RL(n){return Object.getPrototypeOf(n.prototype).constructor}function Sc(n){let e=RL(n.type),t=!0,r=[n];for(;e;){let i;if(Zn(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new X(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=_v(n.inputs),s.declaredInputs=_v(n.declaredInputs),s.outputs=_v(n.outputs);let a=i.hostBindings;a&&FL(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&OL(n,u),l&&kL(n,l),NL(n,i),G0(n.outputs,i.outputs),Zn(i)&&i.data.animation){let f=n.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Sc&&(t=!1)}}e=Object.getPrototypeOf(e)}PL(r)}function NL(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function PL(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=yc(i.hostAttrs,t=yc(t,i.hostAttrs))}}function _v(n){return n===ri?{}:n===an?[]:n}function OL(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function kL(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function FL(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var l_=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var d_=new Q("");function Co(n){return!!n&&typeof n.then=="function"}function FS(n){return!!n&&typeof n.subscribe=="function"}var f_=new Q("");function mh(n){return ec([{provide:f_,multi:!0,useValue:n}])}var h_=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=k(f_,{optional:!0})??[];injector=k(Nt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=It(this.injector,i);if(Co(o))t.push(o);else if(FS(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ac=new Q("");function LS(){Km(()=>{let n="";throw new X(600,n)})}function VS(n){return n.isBoundToModule}var LL=10;var fi=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=k(ln);afterRenderManager=k(n_);zonelessEnabled=k(kf);rootEffectScheduler=k(pv);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Le;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=k(Jn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ne(t=>!t))}constructor(){k(Do,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=k(Ve);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Nt.NULL){return this._injector.get(Ae).run(()=>{Me(10);let s=t instanceof ph;if(!this._injector.get(h_).done){let b="";throw new X(405,b)}let u;s?u=t:u=this._injector.get(bc).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let l=VS(u)?void 0:this._injector.get(Us),f=r||u.selector,p=u.create(i,[],f,l),m=p.location.nativeElement,y=p.injector.get(d_,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),mc(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),Me(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Me(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(dh.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new X(101,!1);let t=me(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,me(t),this.afterTick.next(),Me(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(vo,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<LL;)Me(14),this.synchronizeOnce(),Me(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!dc(i))continue;let o=r&&!this.zonelessEnabled?0:1;ES(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>dc(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;mc(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Ac,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>mc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new X(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mc(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Mc(n,e,t,r){let i=qe(),o=iv();if(c_(i,o,e)){let s=On(),a=uv();TF(a,i,n,e,t,r)}return Mc}var K6=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function Rr(n,e,t){let r=qe(),i=iv();if(c_(r,i,e)){let o=On(),s=uv();_F(s,r,n,e,r[lt],t)}return Rr}function aT(n,e,t,r,i){o_(e,n,t,i?"class":"style",r)}function $(n,e,t,r){let i=qe(),o=i[de],s=n+cn,a=o.firstCreatePass?AS(s,i,2,e,bF,mb(),t,r):o.data[s];if(fS(a,i,n,e,jS),Sf(a)){let u=i[de];lS(u,i,a),FT(u,a,i)}return r!=null&&dS(i,a),$}function H(){let n=On(),e=Pt(),t=hS(e);return n.firstCreatePass&&MS(n,t),Jy(t)&&Xy(),Zy(),t.classesWithoutHost!=null&&XO(t)&&aT(n,t,qe(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&ek(t)&&aT(n,t,qe(),t.stylesWithoutHost,!1),H}function Fe(n,e,t,r){return $(n,e,t,r),H(),Fe}function L(n,e,t,r){let i=qe(),o=i[de],s=n+cn,a=o.firstCreatePass?cL(s,o,2,e,t,r):o.data[s];return fS(a,i,n,e,jS),r!=null&&dS(i,a),L}function V(){let n=Pt(),e=hS(n);return Jy(e)&&Xy(),Zy(),V}function xe(n,e,t,r){return L(n,e,t,r),V(),xe}var jS=(n,e,t,r,i)=>(lv(!0),qT(e[lt],r,xb()));function bo(){return qe()}var xc="en-US";var VL=xc;function BS(n){typeof n=="string"&&(VL=n.toLowerCase().replace(/_/g,"-"))}function Cn(n,e,t){let r=qe(),i=On(),o=Pt();return jL(i,r,r[lt],o,n,e,t),Cn}function yh(n,e,t){let r=qe(),i=On(),o=Pt();return(o.type&3||t)&&xS(o,i,r,t,r[lt],n,e,$f(o,r,e)),yh}function jL(n,e,t,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=$f(r,e,o),xS(r,n,e,s,t,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],f=r.hostDirectiveOutputs?.[i];if(f&&f.length)for(let p=0;p<f.length;p+=2){let m=f[p],y=f[p+1];u??=$f(r,e,o),rT(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=$f(r,e,o),rT(r,e,p,i,i,u)}}function Nr(n){let e=Eb();return cb(e,cn+n)}function Vf(n,e){return n<<17|e<<2}function Eo(n){return n>>17&32767}function BL(n){return(n&2)==2}function UL(n,e){return n&131071|e<<17}function jv(n){return n|2}function $s(n){return(n&131068)>>2}function Ev(n,e){return n&-131069|e<<2}function $L(n){return(n&1)===1}function Bv(n){return n|1}function HL(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Eo(s),u=$s(s);n[r]=t;let l=!1,f;if(Array.isArray(t)){let p=t;f=p[1],(f===null||xs(p,f)>0)&&(l=!0)}else f=t;if(i)if(u!==0){let m=Eo(n[a+1]);n[r+1]=Vf(m,a),m!==0&&(n[m+1]=Ev(n[m+1],r)),n[a+1]=UL(n[a+1],r)}else n[r+1]=Vf(a,0),a!==0&&(n[a+1]=Ev(n[a+1],r)),a=r;else n[r+1]=Vf(u,0),a===0?a=r:n[u+1]=Ev(n[u+1],r),u=r;l&&(n[r+1]=jv(n[r+1])),uT(n,f,r,!0),uT(n,f,r,!1),qL(e,f,n,r,o),s=Vf(a,u),o?e.classBindings=s:e.styleBindings=s}function qL(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&xs(o,e)>=0&&(t[r+1]=Bv(t[r+1]))}function uT(n,e,t,r){let i=n[t+1],o=e===null,s=r?Eo(i):$s(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];zL(u,e)&&(a=!0,n[s+1]=r?Bv(l):jv(l)),s=r?Eo(l):$s(l)}a&&(n[t+1]=r?jv(i):Bv(i))}function zL(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?xs(n,e)>=0:!1}function vh(n,e){return GL(n,e,null,!0),vh}function GL(n,e,t,r){let i=qe(),o=On(),s=Ib(2);if(o.firstUpdatePass&&KL(o,n,s,r),e!==qs&&c_(i,s,e)){let a=o.data[Ls()];XL(o,a,i,i[lt],n,i[s+1]=eV(e,t),r,s)}}function WL(n,e){return e>=n.expandoStartIndex}function KL(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Ls()],s=WL(n,t);tV(o,r)&&e===null&&!s&&(e=!1),e=QL(i,o,e,r),HL(i,o,e,t,s,r)}}function QL(n,e,t,r){let i=Tb(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=wv(null,n,e,t,r),t=wc(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=wv(i,n,e,t,r),o===null){let u=YL(n,e,r);u!==void 0&&Array.isArray(u)&&(u=wv(null,n,e,u[1],r),u=wc(u,e.attrs,r),ZL(n,e,r,u))}else o=JL(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function YL(n,e,t){let r=t?e.classBindings:e.styleBindings;if($s(r)!==0)return n[Eo(r)]}function ZL(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Eo(i)]=r}function JL(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=wc(r,s,t)}return wc(r,e.attrs,t)}function wv(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=wc(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function wc(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),X0(n,s,t?!0:e[++o]))}return n===void 0?null:n}function XL(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],f=$L(l)?cT(u,e,t,i,$s(l),s):void 0;if(!ih(f)){ih(o)||BL(l)&&(o=cT(u,null,t,i,a,s));let p=ub(Ls(),t);pF(r,s,p,i,o)}}function cT(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),f=l?u[1]:u,p=f===null,m=t[i+1];m===qs&&(m=p?an:void 0);let y=p?Cf(m,r):f===r?m:void 0;if(l&&!ih(y)&&(y=Cf(u,r)),ih(y)&&(a=y,s))return a;let b=n[i+1];i=s?Eo(b):$s(b)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Cf(u,r))}return a}function ih(n){return n!==void 0}function eV(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=br(Cc(n)))),n}function tV(n,e){return(n.flags&(e?8:16))!==0}function T(n,e=""){let t=qe(),r=On(),i=n+cn,o=r.firstCreatePass?a_(r,i,1,e,null):r.data[i],s=nV(r,t,o,e,n);t[i]=s,cv()&&aS(r,t,s,o),fc(o,!1)}var nV=(n,e,t,r,i)=>(lv(!0),Lk(e[lt],r));function rV(n,e,t){let r=On();if(r.firstCreatePass){let i=Zn(n);Uv(t,r.data,r.blueprint,i,!0),Uv(e,r.data,r.blueprint,i,!1)}}function Uv(n,e,t,r,i){if(n=_t(n),Array.isArray(n))for(let o=0;o<n.length;o++)Uv(n[o],e,t,r,i);else{let o=On(),s=qe(),a=Pt(),u=uo(n)?n:_t(n.provide),l=qy(n),f=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(uo(n)||!n.multi){let y=new mo(l,i,Ie,null),b=Dv(u,e,i?f:f+m,p);b===-1?(bv(Gf(a,s),o,u),Iv(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[b]=y,s[b]=y)}else{let y=Dv(u,e,f+m,p),b=Dv(u,e,f,f+m),M=y>=0&&t[y],x=b>=0&&t[b];if(i&&!x||!i&&!M){bv(Gf(a,s),o,u);let j=sV(i?oV:iV,t.length,i,r,l,n);!i&&x&&(t[b].providerFactory=j),Iv(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(j),s.push(j)}else{let j=US(t[i?b:y],l,!i&&r);Iv(o,n,y>-1?y:b,j)}!i&&r&&x&&t[b].componentProviders++}}}function Iv(n,e,t,r){let i=uo(e),o=rb(e);if(i||o){let u=(o?_t(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let f=l.indexOf(t);f===-1?l.push(t,[r,u]):l[f+1].push(r,u)}else l.push(t,u)}}}function US(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Dv(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function iV(n,e,t,r,i){return $v(this.multi,[])}function oV(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=Wf(r,r[de],this.providerFactory.index,i);s=u.slice(0,a),$v(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],$v(o,s);return s}function $v(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function sV(n,e,t,r,i,o){let s=new mo(n,t,Ie,null);return s.multi=[],s.index=e,s.componentProviders=0,US(s,i,r&&!t),s}function p_(n,e=[]){return t=>{t.providersResolver=(r,i)=>rV(r,i?i(n):n,e)}}var oh=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},g_=(()=>{class n{compileModuleSync(t){return new rh(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=By(t),o=$T(i.declarations).reduce((s,a)=>{let u=Sr(a);return u&&s.push(new _o(u)),s},[]);return new oh(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var aV=(()=>{class n{zone=k(Ae);changeDetectionScheduler=k(Tr);applicationRef=k(fi);applicationErrorHandler=k(ln);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $S({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ae(le(B({},HS()),{scheduleInRootZone:t})),[{provide:Ae,useFactory:n},{provide:ii,multi:!0,useFactory:()=>{let r=k(aV,{optional:!0});return()=>r.initialize()}},{provide:ii,multi:!0,useFactory:()=>{let r=k(uV);return()=>{r.initialize()}}},e===!0?{provide:fv,useValue:!0}:[],{provide:hv,useValue:t??XT},{provide:ln,useFactory:()=>{let r=k(Ae),i=k(Ve),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(xn),o.handleError(s))})}}}]}function HS(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var uV=(()=>{class n{subscription=new Qe;initialized=!1;zone=k(Ae);pendingTasks=k(Jn);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ae.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ae.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var qS=(()=>{class n{applicationErrorHandler=k(ln);appRef=k(fi);taskService=k(Jn);ngZone=k(Ae);zonelessEnabled=k(kf);tracing=k(Do,{optional:!0});disableScheduling=k(fv,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Qe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Yf):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(hv,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Zf||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?zb:eS;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Yf+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,zb(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cV(){return typeof $localize<"u"&&$localize.locale||xc}var m_=new Q("",{providedIn:"root",factory:()=>k(m_,{optional:!0,skipSelf:!0})||cV()});function Dt(n){return H0(n)}function Ks(n,e){return Ud(n,e?.equal)}var zS=class{[$t];constructor(e){this[$t]=e}destroy(){this[$t].destroy()}};var KS=Symbol("InputSignalNode#UNSET"),IV=le(B({},$d),{transformFn:void 0,applyValueToInputSignal(n,e){gs(n,e)}});function QS(n,e){let t=Object.create(IV);t.value=n,t.transformFn=e?.transform;function r(){if(fs(t),t.value===KS){let i=null;throw new X(-950,i)}return t.value}return r[$t]=t,r}var Eh=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Dc(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},DV=new Q("");DV.__NG_ELEMENT_ID__=n=>{let e=Pt();if(e===null)throw new X(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new X(204,!1)};function GS(n,e){return QS(n,e)}function CV(n){return QS(KS,n)}var YS=(GS.required=CV,GS);var y_=new Q(""),bV=new Q("");function Rc(n){return!n.moduleRef}function TV(n){let e=Rc(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ae);return t.run(()=>{Rc(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(ln),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Rc(n)){let o=()=>e.destroy(),s=n.platformInjector.get(y_);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(y_);s.add(o),n.moduleRef.onDestroy(()=>{mc(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return AV(r,t,()=>{let o=e.get(Jn),s=o.add(),a=e.get(h_);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(m_,xc);if(BS(u||xc),!e.get(bV,!0))return Rc(n)?e.get(fi):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Rc(n)){let f=e.get(fi);return n.rootComponent!==void 0&&f.bootstrap(n.rootComponent),f}else return SV?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var SV;function AV(n,e,t){try{let r=t();return Co(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var _h=null;function MV(n=[],e){return Nt.create({name:e,providers:[{provide:tc,useValue:"platform"},{provide:y_,useValue:new Set([()=>_h=null])},...n]})}function xV(n=[]){if(_h)return _h;let e=MV(n);return _h=e,LS(),RV(e),e}function RV(n){let e=n.get(ah,null);It(n,()=>{e?.forEach(t=>t())})}function Nc(){return!1}var Qs=(()=>{class n{static __NG_ELEMENT_ID__=NV}return n})();function NV(n){return PV(Pt(),qe(),(n&16)===16)}function PV(n,e,t){if(ai(n)&&!t){let r=In(n.index,e);return new yo(r,r)}else if(n.type&175){let r=e[En];return new yo(r,e)}return null}function ZS(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;Me(8);try{let o=i?.injector??xV(r),s=[$S({}),{provide:Tr,useExisting:qS},Nb,...t||[]],a=new Ec({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return TV({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Me(9)}}function Ys(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function JS(n){let e=Sr(n);if(!e)return null;let t=new _o(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var tA=null;function Pr(){return tA}function v_(n){tA??=n}var Pc=class{},Oc=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>k(nA),providedIn:"platform"})}return n})(),__=new Q(""),nA=(()=>{class n extends Oc{_location;_history;_doc=k(nt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Pr().getBaseHref(this._doc)}onPopState(t){let r=Pr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Pr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function wh(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function XS(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Fn(n){return n&&n[0]!=="?"?`?${n}`:n}var Ln=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>k(Dh),providedIn:"root"})}return n})(),Ih=new Q(""),Dh=(()=>{class n extends Ln{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??k(nt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return wh(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Fn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Fn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Fn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(z(Oc),z(Ih,8))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hi=(()=>{class n{_subject=new Le;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=FV(XS(eA(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Fn(r))}normalize(t){return n.stripTrailingSlash(kV(this._basePath,eA(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Fn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Fn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Fn;static joinWithSlash=wh;static stripTrailingSlash=XS;static \u0275fac=function(r){return new(r||n)(z(Ln))};static \u0275prov=Z({token:n,factory:()=>OV(),providedIn:"root"})}return n})();function OV(){return new hi(z(Ln))}function kV(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function eA(n){return n.replace(/\/index.html$/,"")}function FV(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var E_=(()=>{class n extends Ln{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=wh(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Fn(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Fn(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(z(Oc),z(Ih,8))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})();var Jt=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ot({type:n});static \u0275inj=wt({})}return n})();function w_(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var kc=class{};var rA="browser",VV="server";function Ch(n){return n===VV}var iA=(()=>{class n{static \u0275prov=Z({token:n,providedIn:"root",factory:()=>new I_(k(nt),window)})}return n})(),I_=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(le(B({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=jV(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(Yu(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(le(B({},t),{left:i-s[0],top:o-s[1]}))}};function jV(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Fc=class{_doc;constructor(e){this._doc=e}manager},bh=(()=>{class n extends Fc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(z(nt))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),Sh=new Q(""),S_=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof bh));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof bh);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new X(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(z(Sh),z(Ae))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),D_="ng-app-id";function oA(n){for(let e of n)e.remove()}function sA(n,e){let t=e.createElement("style");return t.textContent=n,t}function UV(n,e,t,r){let i=n.head?.querySelectorAll(`style[${D_}="${e}"],link[${D_}="${e}"]`);if(i)for(let o of i)o.removeAttribute(D_),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function b_(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var A_=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,UV(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,sA);r?.forEach(i=>this.addUsage(i,this.external,b_))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(oA(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])oA(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,sA(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,b_(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(z(nt),z(sh),z(uh,8),z(Dn))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),C_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},M_=/%COMP%/g;var uA="%COMP%",$V=`_nghost-${uA}`,HV=`_ngcontent-${uA}`,qV=!0,zV=new Q("",{providedIn:"root",factory:()=>qV});function GV(n){return HV.replace(M_,n)}function WV(n){return $V.replace(M_,n)}function cA(n,e){return e.map(t=>t.replace(M_,n))}var x_=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u,l=null,f=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=f,this.platformIsServer=!1,this.defaultRenderer=new Lc(t,s,u,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Th?i.applyToHost(t):i instanceof Vc&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case Mr.Emulated:o=new Th(u,l,r,this.appId,f,s,a,p,m);break;case Mr.ShadowDom:return new T_(u,l,t,r,s,a,this.nonce,p,m);default:o=new Vc(u,l,r,f,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(z(S_),z(A_),z(sh),z(zV),z(nt),z(Dn),z(Ae),z(uh),z(Do,8))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),Lc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(C_[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(aA(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(aA(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new X(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=C_[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=C_[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(xr.DashCase|xr.Important)?e.style.setProperty(t,r,i&xr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&xr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Pr().getGlobalEventTarget(this.doc,e),!e))throw new X(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function aA(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var T_=class extends Lc{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=i.styles;f=cA(i.id,f);for(let m of f){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=m,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let m of p){let y=b_(m,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Vc=class extends Lc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let f=r.styles;this.styles=l?cA(l,f):f,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Bs.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Th=class extends Vc{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let f=i+"-"+r.id;super(e,t,r,o,s,a,u,l,f),this.contentAttr=GV(f),this.hostAttr=WV(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Ah=class n extends Pc{supportsDOMEvents=!0;static makeCurrent(){v_(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=KV();return t==null?null:QV(t)}resetBaseElement(){jc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return w_(document.cookie,e)}},jc=null;function KV(){return jc=jc||document.head.querySelector("base"),jc?jc.getAttribute("href"):null}function QV(n){return new URL(n,document.baseURI).pathname}var YV=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),lA=["alt","control","meta","shift"],ZV={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},JV={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},dA=(()=>{class n extends Fc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Pr().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),lA.forEach(l=>{let f=r.indexOf(l);f>-1&&(r.splice(f,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=ZV[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),lA.forEach(s=>{if(s!==i){let a=JV[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(z(nt))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})();function R_(n,e,t){let r=B({rootComponent:n,platformRef:t?.platformRef},XV(e));return ZS(r)}function XV(n){return{appProviders:[...i2,...n?.providers??[]],platformProviders:r2}}function e2(){Ah.makeCurrent()}function t2(){return new xn}function n2(){return Wv(document),document}var r2=[{provide:Dn,useValue:rA},{provide:ah,useValue:e2,multi:!0},{provide:nt,useFactory:n2}];var i2=[{provide:tc,useValue:"root"},{provide:xn,useFactory:t2},{provide:Sh,useClass:bh,multi:!0,deps:[nt]},{provide:Sh,useClass:dA,multi:!0,deps:[nt]},x_,A_,S_,{provide:vo,useExisting:x_},{provide:kc,useClass:YV},[]];var fA=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(z(nt))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var fe="primary",Jc=Symbol("RouteTitle"),F_=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ao(n){return new F_(n)}function EA(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function s2(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!tr(n[t],e[t]))return!1;return!0}function tr(n,e){let t=n?L_(n):void 0,r=e?L_(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!wA(n[i],e[i]))return!1;return!0}function L_(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function wA(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function IA(n){return n.length>0?n[n.length-1]:null}function Or(n){return uy(n)?n:Co(n)?we(Promise.resolve(n)):ee(n)}var a2={exact:CA,subset:bA},DA={exact:u2,subset:c2,ignored:()=>!0};function hA(n,e,t){return a2[t.paths](n.root,e.root,t.matrixParams)&&DA[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function u2(n,e){return tr(n,e)}function CA(n,e,t){if(!To(n.segments,e.segments)||!Rh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!CA(n.children[r],e.children[r],t))return!1;return!0}function c2(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>wA(n[t],e[t]))}function bA(n,e,t){return TA(n,e,e.segments,t)}function TA(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!To(i,t)||e.hasChildren()||!Rh(i,t,r))}else if(n.segments.length===t.length){if(!To(n.segments,t)||!Rh(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!bA(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!To(n.segments,i)||!Rh(n.segments,i,r)||!n.children[fe]?!1:TA(n.children[fe],e,o,r)}}function Rh(n,e,t){return e.every((r,i)=>DA[t](n[i].parameters,r.parameters))}var rr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Te([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ao(this.queryParams),this._queryParamMap}toString(){return f2.serialize(this)}},Te=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Nh(this)}},pi=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ao(this.parameters),this._parameterMap}toString(){return AA(this)}};function l2(n,e){return To(n,e)&&n.every((t,r)=>tr(t.parameters,e[r].parameters))}function To(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function d2(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===fe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==fe&&(t=t.concat(e(i,r)))}),t}var Mo=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>new gi,providedIn:"root"})}return n})(),gi=class{parse(e){let t=new j_(e);return new rr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Bc(e.root,!0)}`,r=g2(e.queryParams),i=typeof e.fragment=="string"?`#${h2(e.fragment)}`:"";return`${t}${r}${i}`}},f2=new gi;function Nh(n){return n.segments.map(e=>AA(e)).join("/")}function Bc(n,e){if(!n.hasChildren())return Nh(n);if(e){let t=n.children[fe]?Bc(n.children[fe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==fe&&r.push(`${i}:${Bc(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=d2(n,(r,i)=>i===fe?[Bc(n.children[fe],!1)]:[`${i}:${Bc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[fe]!=null?`${Nh(n)}/${t[0]}`:`${Nh(n)}/(${t.join("//")})`}}function SA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Mh(n){return SA(n).replace(/%3B/gi,";")}function h2(n){return encodeURI(n)}function V_(n){return SA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ph(n){return decodeURIComponent(n)}function pA(n){return Ph(n.replace(/\+/g,"%20"))}function AA(n){return`${V_(n.path)}${p2(n.parameters)}`}function p2(n){return Object.entries(n).map(([e,t])=>`;${V_(e)}=${V_(t)}`).join("")}function g2(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Mh(t)}=${Mh(i)}`).join("&"):`${Mh(t)}=${Mh(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var m2=/^[^\/()?;#]+/;function N_(n){let e=n.match(m2);return e?e[0]:""}var y2=/^[^\/()?;=#]+/;function v2(n){let e=n.match(y2);return e?e[0]:""}var _2=/^[^=?&#]+/;function E2(n){let e=n.match(_2);return e?e[0]:""}var w2=/^[^&#]+/;function I2(n){let e=n.match(w2);return e?e[0]:""}var j_=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Te([],{}):new Te([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[fe]=new Te(e,t)),r}parseSegment(){let e=N_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new X(4009,!1);return this.capture(e),new pi(Ph(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=v2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=N_(this.remaining);i&&(r=i,this.capture(r))}e[Ph(t)]=Ph(r)}parseQueryParam(e){let t=E2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=I2(this.remaining);s&&(r=s,this.capture(r))}let i=pA(t),o=pA(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=N_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new X(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=fe);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[fe]:new Te([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new X(4011,!1)}};function MA(n){return n.segments.length>0?new Te([],{[fe]:n}):n}function xA(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=xA(i);if(r===fe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Te(n.segments,e);return D2(t)}function D2(n){if(n.numberOfChildren===1&&n.children[fe]){let e=n.children[fe];return new Te(n.segments.concat(e.segments),e.children)}return n}function mi(n){return n instanceof rr}function RA(n,e,t=null,r=null){let i=NA(n);return PA(i,e,t,r)}function NA(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new Te(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=MA(r);return e??i}function PA(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return P_(i,i,i,t,r);let o=C2(e);if(o.toRoot())return P_(i,i,new Te([],{}),t,r);let s=b2(o,i,n),a=s.processChildren?$c(s.segmentGroup,s.index,o.commands):kA(s.segmentGroup,s.index,o.commands);return P_(i,s.segmentGroup,a,t,r)}function Oh(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function qc(n){return typeof n=="object"&&n!=null&&n.outlets}function P_(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(f=>`${f}`):`${l}`});let s;n===e?s=t:s=OA(n,e,t);let a=MA(xA(s));return new rr(a,o,i)}function OA(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=OA(o,e,t)}),new Te(n.segments,r)}var kh=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Oh(r[0]))throw new X(4003,!1);let i=r.find(qc);if(i&&i!==IA(r))throw new X(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function C2(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new kh(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new kh(t,e,r)}var Xs=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function b2(n,e,t){if(n.isAbsolute)return new Xs(e,!0,0);if(!t)return new Xs(e,!1,NaN);if(t.parent===null)return new Xs(t,!0,0);let r=Oh(n.commands[0])?0:1,i=t.segments.length-1+r;return T2(t,i,n.numberOfDoubleDots)}function T2(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new X(4005,!1);i=r.segments.length}return new Xs(r,!1,i-o)}function S2(n){return qc(n[0])?n[0].outlets:{[fe]:n}}function kA(n,e,t){if(n??=new Te([],{}),n.segments.length===0&&n.hasChildren())return $c(n,e,t);let r=A2(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Te(n.segments.slice(0,r.pathIndex),{});return o.children[fe]=new Te(n.segments.slice(r.pathIndex),n.children),$c(o,0,i)}else return r.match&&i.length===0?new Te(n.segments,{}):r.match&&!n.hasChildren()?B_(n,e,t):r.match?$c(n,0,i):B_(n,e,t)}function $c(n,e,t){if(t.length===0)return new Te(n.segments,{});{let r=S2(t),i={};if(Object.keys(r).some(o=>o!==fe)&&n.children[fe]&&n.numberOfChildren===1&&n.children[fe].segments.length===0){let o=$c(n.children[fe],e,t);return new Te(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=kA(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Te(n.segments,i)}}function A2(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(qc(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!mA(u,l,s))return o;r+=2}else{if(!mA(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function B_(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(qc(o)){let u=M2(o.outlets);return new Te(r,u)}if(i===0&&Oh(t[0])){let u=n.segments[e];r.push(new pi(u.path,gA(t[0]))),i++;continue}let s=qc(o)?o.outlets[fe]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Oh(a)?(r.push(new pi(s,gA(a))),i+=2):(r.push(new pi(s,{})),i++)}return new Te(r,{})}function M2(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=B_(new Te([],{}),0,r))}),e}function gA(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function mA(n,e,t){return n==t.path&&tr(e,t.parameters)}var ea="imperative",ft=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(ft||{}),fn=class{id;url;constructor(e,t){this.id=e,this.url=t}},yi=class extends fn{type=ft.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},bn=class extends fn{urlAfterRedirects;type=ft.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},zt=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(zt||{}),na=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(na||{}),nr=class extends fn{reason;code;type=ft.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ir=class extends fn{reason;code;type=ft.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},ra=class extends fn{error;target;type=ft.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},zc=class extends fn{urlAfterRedirects;state;type=ft.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fh=class extends fn{urlAfterRedirects;state;type=ft.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Lh=class extends fn{urlAfterRedirects;state;shouldActivate;type=ft.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Vh=class extends fn{urlAfterRedirects;state;type=ft.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jh=class extends fn{urlAfterRedirects;state;type=ft.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bh=class{route;type=ft.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Uh=class{route;type=ft.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},$h=class{snapshot;type=ft.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hh=class{snapshot;type=ft.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qh=class{snapshot;type=ft.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zh=class{snapshot;type=ft.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ia=class{routerEvent;position;anchor;type=ft.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Gc=class{},oa=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function x2(n){return!(n instanceof Gc)&&!(n instanceof oa)}function R2(n,e){return n.providers&&!n._injector&&(n._injector=Ws(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Vn(n){return n.outlet||fe}function N2(n,e){let t=n.filter(r=>Vn(r)===e);return t.push(...n.filter(r=>Vn(r)!==e)),t}function ua(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Gh=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return ua(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new xo(this.rootInjector)}},xo=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Gh(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(z(Ve))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Wh=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=U_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=U_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=$_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return $_(e,this._root).map(t=>t.value)}};function U_(n,e){if(n===e.value)return e;for(let t of e.children){let r=U_(n,t);if(r)return r}return null}function $_(n,e){if(n===e.value)return[e];for(let t of e.children){let r=$_(n,t);if(r.length)return r.unshift(e),r}return[]}var dn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Js(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Wc=class extends Wh{snapshot;constructor(e,t){super(e),this.snapshot=t,Y_(this,e)}toString(){return this.snapshot.toString()}};function FA(n){let e=P2(n),t=new vt([new pi("",{})]),r=new vt({}),i=new vt({}),o=new vt({}),s=new vt(""),a=new or(t,r,o,s,i,fe,n,e.root);return a.snapshot=e.root,new Wc(new dn(a,[]),e)}function P2(n){let e={},t={},r={},o=new So([],e,r,"",t,fe,n,null,{});return new Kc("",new dn(o,[]))}var or=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ne(l=>l[Jc]))??ee(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ne(e=>Ao(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ne(e=>Ao(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Kh(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:B(B({},e.params),n.params),data:B(B({},e.data),n.data),resolve:B(B(B(B({},n.data),e.data),i?.data),n._resolvedData)}:r={params:B({},n.params),data:B({},n.data),resolve:B(B({},n.data),n._resolvedData??{})},i&&VA(i)&&(r.resolve[Jc]=i.title),r}var So=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Jc]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ao(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ao(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Kc=class extends Wh{url;constructor(e,t){super(t),this.url=e,Y_(this,t)}toString(){return LA(this._root)}};function Y_(n,e){e.value._routerState=n,e.children.forEach(t=>Y_(n,t))}function LA(n){let e=n.children.length>0?` { ${n.children.map(LA).join(", ")} } `:"";return`${n.value}${e}`}function O_(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,tr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),tr(e.params,t.params)||n.paramsSubject.next(t.params),s2(e.url,t.url)||n.urlSubject.next(t.url),tr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function H_(n,e){let t=tr(n.params,e.params)&&l2(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||H_(n.parent,e.parent))}function VA(n){return typeof n.title=="string"||n.title===null}var jA=new Q(""),Xc=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=fe;activateEvents=new dt;deactivateEvents=new dt;attachEvents=new dt;detachEvents=new dt;routerOutletData=YS(void 0);parentContexts=k(xo);location=k(Tc);changeDetector=k(Qs);inputBinder=k(el,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new X(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new X(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new X(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new X(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new q_(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=er({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[wo]})}return n})(),q_=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===or?this.route:e===xo?this.childContexts:e===jA?this.outletData:this.parent.get(e,t)}},el=new Q(""),Z_=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Hu([r.queryParams,r.params,r.data]).pipe($e(([o,s,a],u)=>(a=B(B(B({},o),s),a),u===0?ee(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=JS(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),J_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=_e({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Fe(0,"router-outlet")},dependencies:[Xc],encapsulation:2})}return n})();function X_(n){let e=n.children&&n.children.map(X_),t=e?le(B({},n),{children:e}):B({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==fe&&(t.component=J_),t}function O2(n,e,t){let r=Qc(n,e._root,t?t._root:void 0);return new Wc(r,e)}function Qc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=k2(n,e,t);return new dn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Qc(n,a)),s}}let r=F2(e.value),i=e.children.map(o=>Qc(n,o));return new dn(r,i)}}function k2(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Qc(n,r,i);return Qc(n,r)})}function F2(n){return new or(new vt(n.url),new vt(n.params),new vt(n.queryParams),new vt(n.fragment),new vt(n.data),n.outlet,n.component,n)}var sa=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},BA="ngNavigationCancelingError";function Qh(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=mi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=UA(!1,zt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function UA(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[BA]=!0,t.cancellationCode=e,t}function L2(n){return $A(n)&&mi(n.url)}function $A(n){return!!n&&n[BA]}var V2=(n,e,t,r)=>ne(i=>(new z_(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),z_=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),O_(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Js(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Js(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Js(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Js(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new zh(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Hh(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(O_(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),O_(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Yh=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ta=class{component;route;constructor(e,t){this.component=e,this.route=t}};function j2(n,e,t){let r=n._root,i=e?e._root:null;return Uc(r,i,t,[r.value])}function B2(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ca(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!My(n)?n:e.get(n):r}function Uc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Js(e);return n.children.forEach(s=>{U2(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Hc(a,t.getContext(s),i)),i}function U2(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=$2(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Yh(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Uc(n,e,a?a.children:null,r,i):Uc(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ta(a.outlet.component,s))}else s&&Hc(e,a,i),i.canActivateChecks.push(new Yh(r)),o.component?Uc(n,null,a?a.children:null,r,i):Uc(n,null,t,r,i);return i}function $2(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!To(n.url,e.url);case"pathParamsOrQueryParamsChange":return!To(n.url,e.url)||!tr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!H_(n,e)||!tr(n.queryParams,e.queryParams);case"paramsChange":default:return!H_(n,e)}}function Hc(n,e,t){let r=Js(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Hc(s,e.children.getContext(o),t):Hc(s,null,t):Hc(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ta(e.outlet.component,i)):t.canDeactivateChecks.push(new ta(null,i)):t.canDeactivateChecks.push(new ta(null,i))}function tl(n){return typeof n=="function"}function H2(n){return typeof n=="boolean"}function q2(n){return n&&tl(n.canLoad)}function z2(n){return n&&tl(n.canActivate)}function G2(n){return n&&tl(n.canActivateChild)}function W2(n){return n&&tl(n.canDeactivate)}function K2(n){return n&&tl(n.canMatch)}function HA(n){return n instanceof wr||n?.name==="EmptyError"}var xh=Symbol("INITIAL_VALUE");function aa(){return $e(n=>Hu(n.map(e=>e.pipe(Dr(1),io(xh)))).pipe(ne(e=>{for(let t of e)if(t!==!0){if(t===xh)return xh;if(t===!1||Q2(t))return t}return!0}),ct(e=>e!==xh),Dr(1)))}function Q2(n){return mi(n)||n instanceof sa}function Y2(n,e){return Ze(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ee(le(B({},t),{guardsResult:!0})):Z2(s,r,i,n).pipe(Ze(a=>a&&H2(a)?J2(r,o,n,e):ee(a)),ne(a=>le(B({},t),{guardsResult:a})))})}function Z2(n,e,t,r){return we(n).pipe(Ze(i=>rj(i.component,i.route,t,e,r)),Mn(i=>i!==!0,!0))}function J2(n,e,t,r){return we(e).pipe(Xr(i=>Ts(ej(i.route.parent,r),X2(i.route,r),nj(n,i.path,t),tj(n,i.route,t))),Mn(i=>i!==!0,!0))}function X2(n,e){return n!==null&&e&&e(new qh(n)),ee(!0)}function ej(n,e){return n!==null&&e&&e(new $h(n)),ee(!0)}function tj(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ee(!0);let i=r.map(o=>qu(()=>{let s=ua(e)??t,a=ca(o,s),u=z2(a)?a.canActivate(e,n):It(s,()=>a(e,n));return Or(u).pipe(Mn())}));return ee(i).pipe(aa())}function nj(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>B2(s)).filter(s=>s!==null).map(s=>qu(()=>{let a=s.guards.map(u=>{let l=ua(s.node)??t,f=ca(u,l),p=G2(f)?f.canActivateChild(r,n):It(l,()=>f(r,n));return Or(p).pipe(Mn())});return ee(a).pipe(aa())}));return ee(o).pipe(aa())}function rj(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ee(!0);let s=o.map(a=>{let u=ua(e)??i,l=ca(a,u),f=W2(l)?l.canDeactivate(n,e,t,r):It(u,()=>l(n,e,t,r));return Or(f).pipe(Mn())});return ee(s).pipe(aa())}function ij(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ee(!0);let o=i.map(s=>{let a=ca(s,n),u=q2(a)?a.canLoad(e,t):It(n,()=>a(e,t));return Or(u)});return ee(o).pipe(aa(),qA(r))}function qA(n){return ny(mt(e=>{if(typeof e!="boolean")throw Qh(n,e)}),ne(e=>e===!0))}function oj(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ee(!0);let o=i.map(s=>{let a=ca(s,n),u=K2(a)?a.canMatch(e,t):It(n,()=>a(e,t));return Or(u)});return ee(o).pipe(aa(),qA(r))}var Yc=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Zc=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Zs(n){return bs(new Yc(n))}function sj(n){return bs(new X(4e3,!1))}function aj(n){return bs(UA(!1,zt.GuardRejected))}var G_=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ee(r);if(i.numberOfChildren>1||!i.children[fe])return sj(`${e.redirectTo}`);i=i.children[fe]}}applyRedirectCommands(e,t,r,i,o){return uj(t,i,o).pipe(ne(s=>{if(s instanceof rr)throw new Zc(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Zc(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new rr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Te(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new X(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function uj(n,e,t){if(typeof n=="string")return ee(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:f,title:p}=e;return Or(It(t,()=>r({params:l,data:f,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var W_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function cj(n,e,t,r,i){let o=zA(n,e,t);return o.matched?(r=R2(e,r),oj(r,e,t,i).pipe(ne(s=>s===!0?o:B({},W_)))):ee(o)}function zA(n,e,t){if(e.path==="**")return lj(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?B({},W_):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||EA)(t,n,e);if(!i)return B({},W_);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?B(B({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function lj(n){return{matched:!0,parameters:n.length>0?IA(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function yA(n,e,t,r){return t.length>0&&hj(n,t,r)?{segmentGroup:new Te(e,fj(r,new Te(t,n.children))),slicedSegments:[]}:t.length===0&&pj(n,t,r)?{segmentGroup:new Te(n.segments,dj(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Te(n.segments,n.children),slicedSegments:t}}function dj(n,e,t,r){let i={};for(let o of t)if(Jh(n,e,o)&&!r[Vn(o)]){let s=new Te([],{});i[Vn(o)]=s}return B(B({},r),i)}function fj(n,e){let t={};t[fe]=e;for(let r of n)if(r.path===""&&Vn(r)!==fe){let i=new Te([],{});t[Vn(r)]=i}return t}function hj(n,e,t){return t.some(r=>Jh(n,e,r)&&Vn(r)!==fe)}function pj(n,e,t){return t.some(r=>Jh(n,e,r))}function Jh(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function gj(n,e,t){return e.length===0&&!n.children[t]}var K_=class{};function mj(n,e,t,r,i,o,s="emptyOnly"){return new Q_(n,e,t,r,i,s,o).recognize()}var yj=31,Q_=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new G_(this.urlSerializer,this.urlTree)}noMatchError(e){return new X(4002,`'${e.segmentGroup}'`)}recognize(){let e=yA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ne(({children:t,rootSnapshot:r})=>{let i=new dn(r,t),o=new Kc("",i),s=RA(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new So([],Object.freeze({}),Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),fe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,fe,t).pipe(ne(r=>({children:r,rootSnapshot:t})),Ir(r=>{if(r instanceof Zc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Yc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(ne(s=>s instanceof dn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return we(o).pipe(Xr(s=>{let a=r.children[s],u=N2(t,s);return this.processSegmentGroup(e,u,a,s,i)}),ro((s,a)=>(s.push(...a),s)),ei(null),fy(),Ze(s=>{if(s===null)return Zs(r);let a=GA(s);return vj(a),ee(a)}))}processSegment(e,t,r,i,o,s,a){return we(t).pipe(Xr(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(Ir(l=>{if(l instanceof Yc)return ee(null);throw l}))),Mn(u=>!!u),Ir(u=>{if(HA(u))return gj(r,i,o)?ee(new K_):Zs(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return Vn(r)!==s&&(s===fe||!Jh(i,o,r))?Zs(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):Zs(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:f,positionalParamSegments:p,remainingSegments:m}=zA(t,i,o);if(!u)return Zs(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>yj&&(this.allowRedirects=!1));let y=new So(o,l,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,vA(i),Vn(i),i.component??i._loadedComponent??null,i,_A(i)),b=Kh(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(b.params),y.data=Object.freeze(b.data),this.applyRedirects.applyRedirectCommands(f,i.redirectTo,p,y,e).pipe($e(x=>this.applyRedirects.lineralizeSegments(i,x)),Ze(x=>this.processSegment(e,r,t,x.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=cj(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe($e(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe($e(({routes:l})=>{let f=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,b=new So(m,p,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,vA(r),Vn(r),r.component??r._loadedComponent??null,r,_A(r)),M=Kh(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(M.params),b.data=Object.freeze(M.data);let{segmentGroup:x,slicedSegments:j}=yA(t,m,y,l);if(j.length===0&&x.hasChildren())return this.processChildren(f,l,x,b).pipe(ne(U=>new dn(b,U)));if(l.length===0&&j.length===0)return ee(new dn(b,[]));let Y=Vn(r)===o;return this.processSegment(f,l,x,j,Y?fe:o,!0,b).pipe(ne(U=>new dn(b,U instanceof dn?[U]:[])))}))):Zs(t)))}getChildConfig(e,t,r){return t.children?ee({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ee({routes:t._loadedRoutes,injector:t._loadedInjector}):ij(e,t,r,this.urlSerializer).pipe(Ze(i=>i?this.configLoader.loadChildren(e,t).pipe(mt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):aj(t))):ee({routes:[],injector:e})}};function vj(n){n.sort((e,t)=>e.value.outlet===fe?-1:t.value.outlet===fe?1:e.value.outlet.localeCompare(t.value.outlet))}function _j(n){let e=n.value.routeConfig;return e&&e.path===""}function GA(n){let e=[],t=new Set;for(let r of n){if(!_j(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=GA(r.children);e.push(new dn(r.value,i))}return e.filter(r=>!t.has(r))}function vA(n){return n.data||{}}function _A(n){return n.resolve||{}}function Ej(n,e,t,r,i,o){return Ze(s=>mj(n,e,t,r,s.extractedUrl,i,o).pipe(ne(({state:a,tree:u})=>le(B({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function wj(n,e){return Ze(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ee(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of WA(u))s.add(l);let a=0;return we(s).pipe(Xr(u=>o.has(u)?Ij(u,r,n,e):(u.data=Kh(u,u.parent,n).resolve,ee(void 0))),mt(()=>a++),Ss(1),Ze(u=>a===s.size?ee(t):Rt))})}function WA(n){let e=n.children.map(t=>WA(t)).flat();return[n,...e]}function Ij(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!VA(i)&&(o[Jc]=i.title),qu(()=>(n.data=Kh(n,n.parent,t).resolve,Dj(o,n,e,r).pipe(ne(s=>(n._resolvedData=s,n.data=B(B({},n.data),s),null)))))}function Dj(n,e,t,r){let i=L_(n);if(i.length===0)return ee({});let o={};return we(i).pipe(Ze(s=>Cj(n[s],e,t,r).pipe(Mn(),mt(a=>{if(a instanceof sa)throw Qh(new gi,a);o[s]=a}))),Ss(1),ne(()=>o),Ir(s=>HA(s)?Rt:bs(s)))}function Cj(n,e,t,r){let i=ua(e)??r,o=ca(n,i),s=o.resolve?o.resolve(e,t):It(i,()=>o(e,t));return Or(s)}function k_(n){return $e(e=>{let t=n(e);return t?we(t).pipe(ne(()=>e)):ee(e)})}var eE=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===fe);return r}getResolvedTitleForRoute(t){return t.data[Jc]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>k(KA),providedIn:"root"})}return n})(),KA=(()=>{class n extends eE{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(z(fA))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vi=new Q("",{providedIn:"root",factory:()=>({})}),Ro=new Q(""),Xh=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=k(g_);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ee(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Or(It(t,()=>r.loadComponent())).pipe(ne(YA),$e(ZA),mt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),zu(()=>{this.componentLoaders.delete(r)})),o=new ws(i,()=>new Le).pipe(Es());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ee({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=QA(r,this.compiler,t,this.onLoadEndListener).pipe(zu(()=>{this.childrenLoaders.delete(r)})),s=new ws(o,()=>new Le).pipe(Es());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function QA(n,e,t,r){return Or(It(t,()=>n.loadChildren())).pipe(ne(YA),$e(ZA),Ze(i=>i instanceof gh||Array.isArray(i)?ee(i):we(e.compileModuleAsync(i))),ne(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Ro,[],{optional:!0,self:!0}).flat()),{routes:s.map(X_),injector:o}}))}function bj(n){return n&&typeof n=="object"&&"default"in n}function YA(n){return bj(n)?n.default:n}function ZA(n){return ee(n)}var ep=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>k(Tj),providedIn:"root"})}return n})(),Tj=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),tE=new Q(""),nE=new Q("");function JA(n,e,t){let r=n.get(nE),i=n.get(nt);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),Sj(n)));a.ready.catch(l=>{});let{onViewTransitionCreated:u}=r;return u&&It(n,()=>u({transition:a,from:e,to:t})),s}function Sj(n){return new Promise(e=>{fh({read:()=>setTimeout(e)},{injector:n})})}var rE=new Q(""),tp=(()=>{class n{currentNavigation=Zt(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Le;transitionAbortWithErrorSubject=new Le;configLoader=k(Xh);environmentInjector=k(Ve);destroyRef=k(Ar);urlSerializer=k(Mo);rootContexts=k(xo);location=k(hi);inputBindingEnabled=k(el,{optional:!0})!==null;titleStrategy=k(eE);options=k(vi,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=k(ep);createViewTransition=k(tE,{optional:!0});navigationErrorHandler=k(rE,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ee(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Bh(i)),r=i=>this.events.next(new Uh(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;Dt(()=>{this.transitions?.next(le(B({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new vt(null),this.transitions.pipe(ct(r=>r!==null),$e(r=>{let i=!1;return ee(r).pipe($e(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",zt.SupersededByNewNavigation),Rt;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?le(B({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new ir(o.id,this.urlSerializer.serialize(o.rawUrl),"",na.IgnoredSameUrlNavigation)),o.resolve(!1),Rt;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return ee(o).pipe($e(u=>(this.events.next(new yi(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Rt:Promise.resolve(u))),Ej(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),mt(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(f=>(f.finalUrl=u.urlAfterRedirects,f));let l=new zc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:f,restoredState:p,extras:m}=o,y=new yi(u,this.urlSerializer.serialize(l),f,p);this.events.next(y);let b=FA(this.rootComponentType).snapshot;return this.currentTransition=r=le(B({},o),{targetSnapshot:b,urlAfterRedirects:l,extras:le(B({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(M=>(M.finalUrl=l,M)),ee(r)}else return this.events.next(new ir(o.id,this.urlSerializer.serialize(o.extractedUrl),"",na.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Rt}),mt(o=>{let s=new Fh(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),ne(o=>(this.currentTransition=r=le(B({},o),{guards:j2(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),Y2(this.environmentInjector,o=>this.events.next(o)),mt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Qh(this.urlSerializer,o.guardsResult);let s=new Lh(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),ct(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",zt.GuardRejected),!1)),k_(o=>{if(o.guards.canActivateChecks.length!==0)return ee(o).pipe(mt(s=>{let a=new Vh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),$e(s=>{let a=!1;return ee(s).pipe(wj(this.paramsInheritanceStrategy,this.environmentInjector),mt({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",zt.NoDataFromResolver)}}))}),mt(s=>{let a=new jh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),k_(o=>{let s=a=>{let u=[];if(a.routeConfig?.loadComponent){let l=ua(a)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(mt(f=>{a.component=f}),ne(()=>{})))}for(let l of a.children)u.push(...s(l));return u};return Hu(s(o.targetSnapshot.root)).pipe(ei(null),Dr(1))}),k_(()=>this.afterPreactivation()),$e(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?we(a).pipe(ne(()=>r)):ee(r)}),ne(o=>{let s=O2(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=le(B({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),mt(()=>{this.events.next(new Gc)}),V2(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Dr(1),gf(new ue(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(ct(()=>!i&&!r.targetRouterState),mt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",zt.Aborted)}))),mt({next:o=>{i=!0,this.lastSuccessfulNavigation=Dt(this.currentNavigation),this.events.next(new bn(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),gf(this.transitionAbortWithErrorSubject.pipe(mt(o=>{throw o}))),zu(()=>{i||this.cancelNavigationTransition(r,"",zt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Ir(o=>{if(this.destroyed)return r.resolve(!1),Rt;if(i=!0,$A(o))this.events.next(new nr(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),L2(o)?this.events.next(new oa(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new ra(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=It(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof sa){let{message:u,cancellationCode:l}=Qh(this.urlSerializer,a);this.events.next(new nr(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new oa(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Rt}))}))}cancelNavigationTransition(t,r,i){let o=new nr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Dt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Aj(n){return n!==ea}var XA=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>k(Mj),providedIn:"root"})}return n})(),Zh=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Mj=(()=>{class n extends Zh{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ic(n)))(i||n)}})();static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),eM=(()=>{class n{urlSerializer=k(Mo);options=k(vi,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=k(hi);urlHandlingStrategy=k(ep);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new rr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof rr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=FA(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>k(xj),providedIn:"root"})}return n})(),xj=(()=>{class n extends eM{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof yi?this.updateStateMemento():t instanceof ir?this.commitTransition(r):t instanceof zc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Gc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof nr&&t.code!==zt.SupersededByNewNavigation&&t.code!==zt.Redirect?this.restoreHistory(r):t instanceof ra?this.restoreHistory(r,!0):t instanceof bn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,u=B(B({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",u)}else{let a=B(B({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ic(n)))(i||n)}})();static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function np(n,e){n.events.pipe(ct(t=>t instanceof bn||t instanceof nr||t instanceof ra||t instanceof ir),ne(t=>t instanceof bn||t instanceof ir?0:(t instanceof nr?t.code===zt.Redirect||t.code===zt.SupersededByNewNavigation:!1)?2:1),ct(t=>t!==2),Dr(1)).subscribe(()=>{e()})}var Rj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Nj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},rt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=k(l_);stateManager=k(eM);options=k(vi,{optional:!0})||{};pendingTasks=k(Jn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=k(tp);urlSerializer=k(Mo);location=k(hi);urlHandlingStrategy=k(ep);injector=k(Ve);_events=new Le;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=k(XA);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=k(Ro,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!k(el,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Qe;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Dt(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof nr&&r.code!==zt.Redirect&&r.code!==zt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof bn)this.navigated=!0;else if(r instanceof oa){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=B({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Aj(i.source)},s);this.scheduleNavigation(a,ea,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}x2(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ea,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=B({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(ln)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Dt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(X_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,f=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":f=B(B({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=NA(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return PA(p,t,f,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=mi(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,ea,null,r)}navigate(t,r={skipLocationChange:!1}){return Pj(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=B({},Rj):r===!1?i=B({},Nj):i=r,mi(t))return hA(this.currentUrlTree,t,i);let o=this.parseUrl(t);return hA(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let f=this.pendingTasks.add();return np(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Pj(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new X(4008,!1)}var _i=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Zt(null);get href(){return Dt(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Le;applicationErrorHandler=k(ln);options=k(vi,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(k(new Eh("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof bn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(mi(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:mi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(Ie(rt),Ie(or),Dc("tabindex"),Ie(Gs),Ie(Io),Ie(Ln))};static \u0275dir=er({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Cn("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Mc("href",i.reactiveHref(),Zv)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Ys],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Ys],replaceUrl:[2,"replaceUrl","replaceUrl",Ys],routerLink:"routerLink"},features:[wo]})}return n})();var nl=class{};var tM=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ct(t=>t instanceof bn),Xr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Ws(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return we(i).pipe(Jr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=ee(null);let o=i.pipe(Ze(s=>s===null?ee(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(t,r);return we([o,s]).pipe(Jr())}else return o})}static \u0275fac=function(r){return new(r||n)(z(rt),z(Ve),z(nl),z(Xh))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nM=new Q(""),Oj=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=ea;restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof yi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof bn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof ir&&t.code===na.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{if(!(t instanceof ia))return;let r={behavior:"instant"};t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position,r):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>P(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new ia(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){u_()};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})();function oE(n,...e){return ec([{provide:Ro,multi:!0,useValue:n},[],{provide:or,useFactory:rM,deps:[rt]},{provide:Ac,multi:!0,useFactory:iM},e.map(t=>t.\u0275providers)])}function rM(n){return n.routerState.root}function rl(n,e){return{\u0275kind:n,\u0275providers:e}}function iM(){let n=k(Nt);return e=>{let t=n.get(fi);if(e!==t.components[0])return;let r=n.get(rt),i=n.get(oM);n.get(sE)===1&&r.initialNavigation(),n.get(uM,null,{optional:!0})?.setUpPreloading(),n.get(nM,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var oM=new Q("",{factory:()=>new Le}),sE=new Q("",{providedIn:"root",factory:()=>1});function sM(){let n=[{provide:Kv,useValue:!0},{provide:sE,useValue:0},mh(()=>{let e=k(Nt);return e.get(__,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(rt),o=e.get(oM);np(i,()=>{r(!0)}),e.get(tp).afterPreactivation=()=>(r(!0),o.closed?ee(void 0):o),i.initialNavigation()}))})];return rl(2,n)}function aM(){let n=[mh(()=>{k(rt).setUpLocationChangeListener()}),{provide:sE,useValue:2}];return rl(3,n)}var uM=new Q("");function cM(n){return rl(0,[{provide:uM,useExisting:tM},{provide:nl,useExisting:n}])}function lM(){return rl(8,[Z_,{provide:el,useExisting:Z_}])}function dM(n){zs("NgRouterViewTransitions");let e=[{provide:tE,useValue:JA},{provide:nE,useValue:B({skipNextTransition:!!n?.skipInitialTransition},n)}];return rl(9,e)}var fM=[hi,{provide:Mo,useClass:gi},rt,xo,{provide:or,useFactory:rM,deps:[rt]},Xh,[]],ht=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[fM,[],{provide:Ro,multi:!0,useValue:t},[],r?.errorHandler?{provide:rE,useValue:r.errorHandler}:[],{provide:vi,useValue:r||{}},r?.useHash?Fj():Lj(),kj(),r?.preloadingStrategy?cM(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?Vj(r):[],r?.bindToComponentInputs?lM().\u0275providers:[],r?.enableViewTransitions?dM().\u0275providers:[],jj()]}}static forChild(t){return{ngModule:n,providers:[{provide:Ro,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ot({type:n});static \u0275inj=wt({})}return n})();function kj(){return{provide:nM,useFactory:()=>{let n=k(iA),e=k(Ae),t=k(vi),r=k(tp),i=k(Mo);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Oj(i,r,n,e,t)}}}function Fj(){return{provide:Ln,useClass:E_}}function Lj(){return{provide:Ln,useClass:Dh}}function Vj(n){return[n.initialNavigation==="disabled"?aM().\u0275providers:[],n.initialNavigation==="enabledBlocking"?sM().\u0275providers:[]]}var iE=new Q("");function jj(){return[{provide:iE,useFactory:iM},{provide:Ac,multi:!0,useExisting:iE}]}var rp=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=_e({type:n,selectors:[["app-nav"]],decls:41,vars:0,consts:[[1,"navbar","navbar-expand-lg","py-3","shadow-sm","bgnav"],[1,"container-fluid"],[1,"d-flex","align-items-center"],["src","logo.jpg","alt","logo","height","40","width","40",1,"me-2","rounded-circle"],["routerLink","/",1,"navbar-brand","fw-bold","fs-4","text-body"],["type","button","data-bs-toggle","collapse","data-bs-target","#navMenu",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navMenu",1,"collapse","navbar-collapse"],[1,"navbar-nav","ms-auto","align-items-center"],[1,"nav-item","px-2"],["routerLink","/",1,"nav-link"],["routerLink","/about",1,"nav-link"],["routerLink","/login",1,"nav-link"],["routerLink","/register",1,"nav-link"],[1,"nav-item","dropdown","px-2"],["role","button","data-bs-toggle","dropdown",1,"nav-link","dropdown-toggle"],[1,"dropdown-menu","dropdown-menu-end"],["routerLink","/profile",1,"dropdown-item"],["routerLink","/edit",1,"dropdown-item"],["routerLink","/addprofile",1,"dropdown-item"],["routerLink","/settings",1,"dropdown-item"],["routerLink","/login",1,"dropdown-item","text-danger"]],template:function(t,r){t&1&&($(0,"nav",0)(1,"div",1)(2,"div",2),Fe(3,"img",3),$(4,"a",4),T(5,"SheConnect"),H()(),$(6,"button",5),Fe(7,"span",6),H(),$(8,"div",7)(9,"ul",8)(10,"li",9)(11,"a",10),T(12,"Home"),H()(),$(13,"li",9)(14,"a",11),T(15,"About"),H()(),$(16,"li",9)(17,"a",12),T(18,"Login"),H()(),$(19,"li",9)(20,"a",13),T(21,"Sign Up"),H()(),$(22,"li",14)(23,"a",15),T(24,"Profile"),H(),$(25,"ul",16)(26,"li")(27,"a",17),T(28,"Profile"),H()(),$(29,"li")(30,"a",18),T(31,"Edit"),H()(),$(32,"li")(33,"a",19),T(34,"Add Profile"),H()(),$(35,"li")(36,"a",20),T(37,"Settings"),H()(),$(38,"li")(39,"a",21),T(40,"Logout"),H()()()()()()()())},dependencies:[Jt,ht,_i],styles:[".bgnav[_ngcontent-%COMP%]{background:#fff0f3;box-shadow:0 2px 8px #ff9daa4d;border-bottom:2px solid rgba(255,192,203,.3)}.navbar-brand[_ngcontent-%COMP%]{font-family:Playfair Display,serif;letter-spacing:1px}.nav-link[_ngcontent-%COMP%]{color:#000!important;font-weight:500;transition:all .3s ease}.nav-link[_ngcontent-%COMP%]:hover{color:#d67fa1!important;transform:translateY(-1px);text-shadow:0 1px 2px rgba(0,0,0,.1)}.dropdown-menu[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 2px 10px #0000001a}"]})};var Bj=new Q(""),Uj=new Q("");function yM(n){return n!=null}function vM(n){return Co(n)?we(n):n}function _M(n){let e={};return n.forEach(t=>{e=t!=null?B(B({},e),t):e}),Object.keys(e).length===0?null:e}function EM(n,e){return e.map(t=>t(n))}function $j(n){return!n.validate}function wM(n){return n.map(e=>$j(e)?e:t=>e.validate(t))}function Hj(n){if(!n)return null;let e=n.filter(yM);return e.length==0?null:function(t){return _M(EM(t,e))}}function hE(n){return n!=null?Hj(wM(n)):null}function qj(n){if(!n)return null;let e=n.filter(yM);return e.length==0?null:function(t){let r=EM(t,e).map(vM);return cy(r).pipe(ne(_M))}}function pE(n){return n!=null?qj(wM(n)):null}function hM(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function zj(n){return n._rawValidators}function Gj(n){return n._rawAsyncValidators}function aE(n){return n?Array.isArray(n)?n:[n]:[]}function op(n,e){return Array.isArray(n)?n.includes(e):n===e}function pM(n,e){let t=aE(e);return aE(n).forEach(i=>{op(t,i)||t.push(i)}),t}function gM(n,e){return aE(e).filter(t=>!op(n,t))}var uE=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=hE(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=pE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},cl=class extends uE{name;get formDirective(){return null}get path(){return null}};var cE=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Wj={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Zee=le(B({},Wj),{"[class.ng-submitted]":"isSubmitted"});var up=(()=>{class n extends cE{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Ie(cl,10))};static \u0275dir=er({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&vh("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Sc]})}return n})();var il="VALID",ip="INVALID",la="PENDING",ol="DISABLED",wi=class{},sp=class extends wi{value;source;constructor(e,t){super(),this.value=e,this.source=t}},al=class extends wi{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},ul=class extends wi{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},da=class extends wi{status;source;constructor(e,t){super(),this.status=e,this.source=t}},lE=class extends wi{source;constructor(e){super(),this.source=e}},dE=class extends wi{source;constructor(e){super(),this.source=e}};function Kj(n){return(gE(n)?n.validators:n)||null}function Qj(n){return Array.isArray(n)?hE(n):n||null}function Yj(n,e){return(gE(e)?e.asyncValidators:n)||null}function Zj(n){return Array.isArray(n)?pE(n):n||null}function gE(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Jj(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new X(1e3,"");if(!r[t])throw new X(1001,"")}function Xj(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new X(1002,"")})}var fE=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Dt(this.statusReactive)}set status(e){Dt(()=>this.statusReactive.set(e))}_status=Ks(()=>this.statusReactive());statusReactive=Zt(void 0);get valid(){return this.status===il}get invalid(){return this.status===ip}get pending(){return this.status==la}get disabled(){return this.status===ol}get enabled(){return this.status!==ol}errors;get pristine(){return Dt(this.pristineReactive)}set pristine(e){Dt(()=>this.pristineReactive.set(e))}_pristine=Ks(()=>this.pristineReactive());pristineReactive=Zt(!0);get dirty(){return!this.pristine}get touched(){return Dt(this.touchedReactive)}set touched(e){Dt(()=>this.touchedReactive.set(e))}_touched=Ks(()=>this.touchedReactive());touchedReactive=Zt(!1);get untouched(){return!this.touched}_events=new Le;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(pM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(pM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(gM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(gM(e,this._rawAsyncValidators))}hasValidator(e){return op(this._rawValidators,e)}hasAsyncValidator(e){return op(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(le(B({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new ul(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new ul(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(le(B({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new al(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new al(!0,r))}markAsPending(e={}){this.status=la;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new da(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(le(B({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ol,this.errors=null,this._forEachChild(i=>{i.disable(le(B({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new sp(this.value,r)),this._events.next(new da(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(le(B({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=il,this._forEachChild(r=>{r.enable(le(B({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(le(B({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===il||this.status===la)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new sp(this.value,t)),this._events.next(new da(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(le(B({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ol:il}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=la,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=vM(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new da(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new dt,this.statusChanges=new dt}_calculateStatus(){return this._allControlsDisabled()?ol:this.errors?ip:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(la)?la:this._anyControlsHaveStatus(ip)?ip:il}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new al(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new ul(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){gE(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Qj(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Zj(this._rawAsyncValidators)}},ap=class extends fE{constructor(e,t,r){super(Kj(t),Yj(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Xj(this,!0,e),Object.keys(e).forEach(r=>{Jj(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new dE(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var IM=new Q("",{providedIn:"root",factory:()=>mE}),mE="always";function eB(n,e,t=mE){DM(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),nB(n,e),iB(n,e),rB(n,e),tB(n,e)}function mM(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function tB(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function DM(n,e){let t=zj(n);e.validator!==null?n.setValidators(hM(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=Gj(n);e.asyncValidator!==null?n.setAsyncValidators(hM(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();mM(e._rawValidators,i),mM(e._rawAsyncValidators,i)}function nB(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&CM(n,e)})}function rB(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&CM(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function CM(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function iB(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function oB(n,e){n==null,DM(n,e)}function sB(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}var aB={provide:cl,useExisting:Ms(()=>ll)},sl=Promise.resolve(),ll=(()=>{class n extends cl{callSetDisabledState;get submitted(){return Dt(this.submittedReactive)}_submitted=Ks(()=>this.submittedReactive());submittedReactive=Zt(!1);_directives=new Set;form;ngSubmit=new dt;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new ap({},hE(t),pE(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){sl.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),eB(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){sl.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){sl.then(()=>{let r=this._findContainer(t.path),i=new ap({});oB(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){sl.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){sl.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),sB(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new lE(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(Ie(Bj,10),Ie(Uj,10),Ie(IM,8))};static \u0275dir=er({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Cn("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[p_([aB]),Sc]})}return n})();var cp=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=er({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var uB=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ot({type:n});static \u0275inj=wt({})}return n})();var fa=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:IM,useValue:t.callSetDisabledState??mE}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ot({type:n});static \u0275inj=wt({imports:[uB]})}return n})();var lp=class n{title=Zt("she-connect");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=_e({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){t&1&&Fe(0,"app-nav")(1,"router-outlet")},dependencies:[Jt,fa,rp,ht,Xc],encapsulation:2})};var ha=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=_e({type:n,selectors:[["app-header"]],decls:131,vars:6,consts:[[1,"header-section","text-center"],[1,"header-container"],[1,"header-title"],[1,"divider"],[1,"header-text"],[1,"daily-quote"],[1,"container","text-center","py-5"],[1,"row","g-4"],[1,"col-md-4"],[1,"feature-card","p-4","shadow-sm"],[1,"btn","btn-outline-light","mt-3","px-4",3,"routerLink"],[1,"feature-card"],[1,"lead"],[1,"container","bg"],[1,"text-center"],[1,"row","g-4","justify-content-center"],[1,"card"],["src","beach.jpg","alt","Post Image",1,"card-img-top"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"post-actions","mt-3"],[1,"like-button"],[1,"material-icons"],[1,"like-count"],[1,"comment-button"],[1,"comment-count"]],template:function(t,r){t&1&&($(0,"div",0)(1,"div",1)(2,"h1",2),T(3,"Welcome Back, User \u{1F49C}"),H(),Fe(4,"div",3),$(5,"p",4),T(6," Recovery is more than safety \u2014 it\u2019s healing. Explore tools to support your emotional well-being and rediscover your strength. "),H(),$(7,"blockquote",5),T(8," \u201CEvery day is a new beginning. Take a deep breath, smile, and start again.\u201D "),H()()(),$(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"h3"),T(14,"Create a Post"),H(),$(15,"a",10),T(16,"Create"),H()()(),$(17,"div",8)(18,"div",9)(19,"h3"),T(20,"Events"),H(),$(21,"a",10),T(22,"View"),H()()(),$(23,"div",8)(24,"div",9)(25,"h3"),T(26,"Progress"),H(),$(27,"a",10),T(28,"progress"),H()()()()(),$(29,"div",6)(30,"div",7)(31,"div",8)(32,"div",9)(33,"h3"),T(34,"Guides & Resources"),H(),$(35,"a",10),T(36,"View"),H()()(),$(37,"div",8)(38,"div",9)(39,"h3"),T(40,"Join a Program"),H(),$(41,"a",10),T(42,"Join"),H()()(),$(43,"div",8)(44,"div",9)(45,"h3"),T(46,"Find a Mentor"),H(),$(47,"a",10),T(48,"Find"),H()()()()(),$(49,"div",6)(50,"div",7)(51,"div",8)(52,"div",11)(53,"h3"),T(54,"\u{1F48C} Users Joined"),H(),$(55,"p",12),T(56,"1,254"),H()()(),$(57,"div",8)(58,"div",11)(59,"h3"),T(60,"\u{1F4C5} Events Hosted"),H(),$(61,"p",12),T(62,"42"),H()()(),$(63,"div",8)(64,"div",11)(65,"h3"),T(66,"\u{1F4DD} Posts Created"),H(),$(67,"p",12),T(68,"3,512"),H()()()()(),$(69,"div",13),Fe(70,"hr"),$(71,"h1",14),T(72,"Content Forum"),H(),$(73,"div",15)(74,"div",8)(75,"div",16),Fe(76,"img",17),$(77,"div",18)(78,"h5",19),T(79,"User123"),H(),$(80,"p",20),T(81,"A day in my life"),H(),$(82,"div",21)(83,"button",22)(84,"span",23),T(85,"\u2764"),H()(),$(86,"span",24),T(87,"0"),H(),$(88,"button",25)(89,"span",23),T(90,"\u{1F5E8}"),H()(),$(91,"span",26),T(92,"0"),H()()()()(),$(93,"div",8)(94,"div",16),Fe(95,"img",17),$(96,"div",18)(97,"h5",19),T(98,"User456"),H(),$(99,"p",20),T(100,"My weekend getaway"),H(),$(101,"div",21)(102,"button",22)(103,"span",23),T(104,"\u2764"),H()(),$(105,"span",24),T(106,"0"),H(),$(107,"button",25)(108,"span",23),T(109,"\u{1F5E8}"),H()(),$(110,"span",26),T(111,"0"),H()()()()(),$(112,"div",8)(113,"div",16),Fe(114,"img",17),$(115,"div",18)(116,"h5",19),T(117,"User789"),H(),$(118,"p",20),T(119,"Tips for mindfulness"),H(),$(120,"div",21)(121,"button",22)(122,"span",23),T(123,"\u2764"),H()(),$(124,"span",24),T(125,"0"),H(),$(126,"button",25)(127,"span",23),T(128,"\u{1F5E8}"),H()(),$(129,"span",26),T(130,"0"),H()()()()()()()),t&2&&(di(15),Rr("routerLink","/createpost"),di(6),Rr("routerLink","/events"),di(6),Rr("routerLink","/progress"),di(8),Rr("routerLink","/resources"),di(6),Rr("routerLink","/joinprogram"),di(6),Rr("routerLink","/findmentor"))},dependencies:[ht,_i],styles:["[_ngcontent-%COMP%]:root{--primary: #d6a4e7;--secondary: #a37edc;--accent: #ffffff;--text: #3e3050;--bg-light: #faf6ff;--gradient: linear-gradient(135deg, var(--primary), var(--secondary))}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;background-color:var(--bg-light);color:var(--text);line-height:1.6;scroll-behavior:smooth}.header-section[_ngcontent-%COMP%]{background:linear-gradient(145deg,#ffe3ec,#ffedf2);color:#3e3050;text-align:center;padding:80px 20px 60px;border-radius:0 0 20px 20px;box-shadow:0 6px 25px #ffb8c973;position:relative;overflow:hidden;margin-top:0;z-index:1}.header-container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto}.header-title[_ngcontent-%COMP%]{font-family:Playfair Display,serif;font-size:2.8rem;font-weight:700;color:#d67fa1;margin-bottom:.5rem}.divider[_ngcontent-%COMP%]{width:80px;height:4px;background-color:#d67fa1;border-radius:10px;margin:1rem auto 2rem}.header-text[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-size:1.15rem;line-height:1.7;opacity:.95;margin-bottom:2.5rem}.daily-quote[_ngcontent-%COMP%]{font-style:italic;font-size:1.15rem;opacity:.85;max-width:700px;margin:1rem auto 0;color:#d67fa1}.header-section[_ngcontent-%COMP%]:before{width:200px;height:200px;background:#ffd6e0;top:-50px;left:-50px}.header-section[_ngcontent-%COMP%]:after{width:300px;height:300px;background:#ffb6cc;bottom:-100px;right:-80px}@media (max-width: 768px){.header-title[_ngcontent-%COMP%]{font-size:2.2rem}.header-text[_ngcontent-%COMP%]{font-size:1rem}}.container.text-center.py-5[_ngcontent-%COMP%]{padding-top:60px;padding-bottom:60px}.feature-card[_ngcontent-%COMP%]{background:linear-gradient(145deg,#fff0f5,#ffe8f2);border-radius:20px;transition:all .3s ease;text-align:center;padding:2rem 1rem;box-shadow:0 6px 20px #ffafca80;border:1px solid #ffd6e0}.feature-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:12px 12px 28px #d67fa1}.feature-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#d67fa1;font-weight:600;margin-bottom:1rem}.feature-card[_ngcontent-%COMP%]   a.btn[_ngcontent-%COMP%]{background-color:#ffd6e0;color:#3e3050;border:none;font-weight:600;transition:.3s}.feature-card[_ngcontent-%COMP%]   a.btn[_ngcontent-%COMP%]:hover{background-color:#ffb6cc;color:#fff}.container.bg[_ngcontent-%COMP%]{background:#fff0f5;padding:60px 20px;margin-bottom:80px;box-shadow:0 6px 25px #ffb8c973;border-radius:20px;border:1px solid #ffd6e0}.container.bg[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#d67fa1;font-weight:700;margin-bottom:2rem}.card[_ngcontent-%COMP%]{border:none;border-radius:20px;overflow:hidden;box-shadow:0 8px 24px #a37edc1f;transition:transform .3s ease,box-shadow .3s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 12px 28px #ffb6cc}.card-img-top[_ngcontent-%COMP%]{border-bottom:1px solid #ffd6e0;height:180px;object-fit:cover}.card-body[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#a37edc;font-weight:600;margin-bottom:.5rem}.card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem;color:#3e3050}.post-actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;gap:10px}.post-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#ffd6e0;border-radius:50%;width:36px;height:36px;padding:0;border:none;transition:background .3s ease}.post-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#d67fa1;color:#fff}.post-actions[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem;color:#3e3050}"]})};var dp=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=_e({type:n,selectors:[["app-home"]],decls:1,vars:0,template:function(t,r){t&1&&Fe(0,"app-header")},dependencies:[ha,Jt,ht],encapsulation:2})};function Xt(n){n===void 0&&(n=k(Nt));let e=n.get(hc);return t=>new ue(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var cB="firebase",lB="11.10.0";Zr(cB,lB,"app");var Ii=new ti("ANGULARFIRE2_VERSION");var TM=(n,e)=>{let t=e?[e]:h0(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},yE=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(yE||{}),bte=Nc()&&typeof Zone<"u"?yE.WARN:yE.SILENT;var fp=class{zone;delegate;constructor(e,t=sy){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},dl=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=k(Ae);this.outsideAngular=t.runOutsideAngular(()=>new fp(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new fp(typeof Zone>"u"?void 0:Zone.current,$u))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var hB=new Map,pB={activated:!1,tokenObservers:[]},gB={initialized:!1,enabled:!1};function jn(n){return hB.get(n)||Object.assign({},pB)}function RM(){return gB}var mB="https://content-firebaseappcheck.googleapis.com/v1";var yB="exchangeDebugToken",AM={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Nte=1440*60*1e3;var EE=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return P(this,null,function*(){this.stop();try{this.pending=new jm,this.pending.promise.catch(t=>{}),yield vB(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new jm,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function vB(n){return new Promise(e=>{setTimeout(e,n)})}var _B={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Di=new l0("appCheck","AppCheck",_B);function NM(n){if(!jn(n).activated)throw Di.create("use-before-activation",{appName:n.name})}function PM(r,i){return P(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw Di.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw Di.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw Di.create("fetch-parse-error",{originalErrorMessage:y?.message})}let f=l.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw Di.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(f[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function OM(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${mB}/projects/${t}/apps/${r}:${yB}?key=${i}`,body:{debug_token:e}}}var EB="firebase-app-check-database",wB=1,wE="firebase-app-check-store";var hp=null;function IB(){return hp||(hp=new Promise((n,e)=>{try{let t=indexedDB.open(EB,wB);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Di.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(wE,{keyPath:"compositeKey"})}}}catch(t){e(Di.create("storage-open",{originalErrorMessage:t?.message}))}}),hp)}function DB(n,e){return CB(bB(n),e)}function CB(n,e){return P(this,null,function*(){let r=(yield IB()).transaction(wE,"readwrite"),o=r.objectStore(wE).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Di.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function bB(n){return`${n.options.appId}-${n.name}`}var fl=new Rd("@firebase/app-check");function vE(n,e){return Md()?DB(n,e).catch(t=>{fl.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function kM(){return RM().enabled}function FM(){return P(this,null,function*(){let n=RM();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var TB={error:"UNKNOWN_ERROR"};function SB(n){return o0.encodeString(JSON.stringify(n),!1)}function IE(n,e=!1,t=!1){return P(this,null,function*(){let r=n.app;NM(r);let i=jn(r),o=i.token,s;if(o&&!hl(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(hl(l)?o=l:yield vE(r,void 0))}if(!e&&o&&hl(o))return{token:o.token};let a=!1;if(kM())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=PM(OM(r,yield FM()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield vE(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?fl.warn(l.message):t&&fl.error(l),_E(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield jn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?fl.warn(l.message):t&&fl.error(l),s=l}let u;return o?s?hl(o)?u={token:o.token,internalError:s}:u=_E(s):(u={token:o.token},i.token=o,yield vE(r,o)):u=_E(s),a&&RB(r,u),u})}function AB(n){return P(this,null,function*(){let e=n.app;NM(e);let{provider:t}=jn(e);if(kM()){let r=yield FM(),{token:i}=yield PM(OM(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function MB(n,e,t,r){let{app:i}=n,o=jn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&hl(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),MM(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>MM(n))}function LM(n,e){let t=jn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function MM(n){let{app:e}=n,t=jn(e),r=t.tokenRefresher;r||(r=xB(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function xB(n){let{app:e}=n;return new EE(()=>P(null,null,function*(){let t=jn(e),r;if(t.token?r=yield IE(n,!0):r=yield IE(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=jn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},AM.RETRIAL_MIN_WAIT,AM.RETRIAL_MAX_WAIT)}function RB(n,e){let t=jn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function hl(n){return n.expireTimeMillis-Date.now()>0}function _E(n){return{token:SB(TB),error:n}}var DE=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=jn(this.app);for(let t of e)LM(this.app,t.next);return Promise.resolve()}};function NB(n,e){return new DE(n,e)}function PB(n){return{getToken:e=>IE(n,e),getLimitedUseToken:()=>AB(n),addTokenListener:e=>MB(n,"INTERNAL",e),removeTokenListener:e=>LM(n.app,e)}}var OB="@firebase/app-check",kB="0.10.1";var FB="app-check",xM="app-check-internal";function LB(){Pu(new Xi(FB,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return NB(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(xM).initialize()})),Pu(new Xi(xM,n=>{let e=n.getProvider("app-check").getImmediate();return PB(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Zr(OB,kB)}LB();var VB="app-check";var pa=class{constructor(){return TM(VB)}};var jB=["localhost","0.0.0.0","127.0.0.1"],Wte=typeof window<"u"&&jB.includes(window.location.hostname);var BB="firebase",UB="11.10.0";Ut.registerVersion(BB,UB,"app-compat");var $B=["ngOnDestroy"],BM=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if($B.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(f=>{let p=f?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var pp=class{constructor(e){return e}},ga=new Q("angularfire2.app.options"),ma=new Q("angularfire2.app.name");function pl(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=Ut.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Ut.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;HB("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new pp(s)}var HB=(n,...e)=>{Nc()&&typeof console<"u"&&console[n](...e)},qB={provide:pp,useFactory:pl,deps:[ga,Ae,[new Hv,ma]]},UM=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:ga,useValue:t},{provide:ma,useValue:r}]}}constructor(t){Ut.registerVersion("angularfire",Ii.full,"core"),Ut.registerVersion("angularfire",Ii.full,"app-compat"),Ut.registerVersion("angular",Ty.full,t.toString())}static \u0275fac=function(r){return new(r||n)(z(Dn))};static \u0275mod=Ot({type:n});static \u0275inj=wt({providers:[qB]})}return n})();function gp(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return zB(i,s)||(jM("error",`${e} was already initialized on the ${t} Firebase App with different settings.${GB?" You may need to reload as Firebase is not HMR aware.":""}`),jM("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function zB(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var GB=typeof module<"u"&&!!module.hot,jM=(n,...e)=>{Nc()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var CE=new Q("angularfire2.auth.use-emulator"),bE=new Q("angularfire2.auth.settings"),TE=new Q("angularfire2.auth.tenant-id"),SE=new Q("angularfire2.auth.langugage-code"),AE=new Q("angularfire2.auth.use-device-language"),ME=new Q("angularfire.auth.persistence"),xE=(n,e,t,r,i,o,s,a)=>gp(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[l,f]of Object.entries(s))u.settings[l]=f;return a&&u.setPersistence(a),u},[t,r,i,o,s,a]),hn=(()=>{class n{injector=k(Ve);authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,u,l,f,p,m,y){let b=new Le,M=ee(void 0).pipe(Kn(s.outsideAngular),$e(()=>o.runOutsideAngular(()=>import("./chunk-G7CESZM4.js"))),ne(()=>pl(t,o,r)),ne(x=>xE(x,o,a,l,f,p,u,m)),hf({bufferSize:1,refCount:!1}));if(Ch(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ee(null);else{M.pipe(Mn()).subscribe();let x=M.pipe($e(U=>U.getRedirectResult().then(re=>re,()=>null)),Xt(this.injector),hf({bufferSize:1,refCount:!1})),j=M.pipe($e(U=>new ue(re=>({unsubscribe:o.runOutsideAngular(()=>U.onAuthStateChanged(se=>re.next(se),se=>re.error(se),()=>re.complete()))})))),Y=M.pipe($e(U=>new ue(re=>({unsubscribe:o.runOutsideAngular(()=>U.onIdTokenChanged(se=>re.next(se),se=>re.error(se),()=>re.complete()))}))));this.authState=x.pipe(pf(j),Er(s.outsideAngular),Kn(s.insideAngular)),this.user=x.pipe(pf(Y),Er(s.outsideAngular),Kn(s.insideAngular)),this.idToken=this.user.pipe($e(U=>U?we(U.getIdToken()):ee(null))),this.idTokenResult=this.user.pipe($e(U=>U?we(U.getIdTokenResult()):ee(null))),this.credential=ly(x,b,this.authState.pipe(ct(U=>!U))).pipe(ne(U=>U?.user?U:null),Er(s.outsideAngular),Kn(s.insideAngular))}return BM(this,M,o,{spy:{apply:(x,j,Y)=>{(x.startsWith("signIn")||x.startsWith("createUser"))&&Y.then(U=>b.next(U))}}})}static \u0275fac=function(r){return new(r||n)(z(ga),z(ma,8),z(Dn),z(Ae),z(dl),z(CE,8),z(bE,8),z(TE,8),z(SE,8),z(AE,8),z(ME,8),z(pa,8))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),mp=(()=>{class n{constructor(){Ut.registerVersion("angularfire",Ii.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ot({type:n});static \u0275inj=wt({providers:[hn]})}return n})();var $M=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},HM={};var kr,RE;(function(){var n;function e(w,v){function E(){}E.prototype=v.prototype,w.D=v.prototype,w.prototype=new E,w.prototype.constructor=w,w.C=function(I,D,S){for(var _=Array(arguments.length-2),mr=2;mr<arguments.length;mr++)_[mr-2]=arguments[mr];return v.prototype[D].apply(I,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,v,E){E||(E=0);var I=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)I[D]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(D=0;16>D;++D)I[D]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=w.g[0],E=w.g[1],D=w.g[2];var S=w.g[3],_=v+(S^E&(D^S))+I[0]+3614090360&4294967295;v=E+(_<<7&4294967295|_>>>25),_=S+(D^v&(E^D))+I[1]+3905402710&4294967295,S=v+(_<<12&4294967295|_>>>20),_=D+(E^S&(v^E))+I[2]+606105819&4294967295,D=S+(_<<17&4294967295|_>>>15),_=E+(v^D&(S^v))+I[3]+3250441966&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(S^E&(D^S))+I[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=S+(D^v&(E^D))+I[5]+1200080426&4294967295,S=v+(_<<12&4294967295|_>>>20),_=D+(E^S&(v^E))+I[6]+2821735955&4294967295,D=S+(_<<17&4294967295|_>>>15),_=E+(v^D&(S^v))+I[7]+4249261313&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(S^E&(D^S))+I[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=S+(D^v&(E^D))+I[9]+2336552879&4294967295,S=v+(_<<12&4294967295|_>>>20),_=D+(E^S&(v^E))+I[10]+4294925233&4294967295,D=S+(_<<17&4294967295|_>>>15),_=E+(v^D&(S^v))+I[11]+2304563134&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(S^E&(D^S))+I[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=S+(D^v&(E^D))+I[13]+4254626195&4294967295,S=v+(_<<12&4294967295|_>>>20),_=D+(E^S&(v^E))+I[14]+2792965006&4294967295,D=S+(_<<17&4294967295|_>>>15),_=E+(v^D&(S^v))+I[15]+1236535329&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(D^S&(E^D))+I[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=S+(E^D&(v^E))+I[6]+3225465664&4294967295,S=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(S^v))+I[11]+643717713&4294967295,D=S+(_<<14&4294967295|_>>>18),_=E+(S^v&(D^S))+I[0]+3921069994&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^S&(E^D))+I[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=S+(E^D&(v^E))+I[10]+38016083&4294967295,S=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(S^v))+I[15]+3634488961&4294967295,D=S+(_<<14&4294967295|_>>>18),_=E+(S^v&(D^S))+I[4]+3889429448&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^S&(E^D))+I[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=S+(E^D&(v^E))+I[14]+3275163606&4294967295,S=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(S^v))+I[3]+4107603335&4294967295,D=S+(_<<14&4294967295|_>>>18),_=E+(S^v&(D^S))+I[8]+1163531501&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^S&(E^D))+I[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=S+(E^D&(v^E))+I[2]+4243563512&4294967295,S=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(S^v))+I[7]+1735328473&4294967295,D=S+(_<<14&4294967295|_>>>18),_=E+(S^v&(D^S))+I[12]+2368359562&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(E^D^S)+I[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=S+(v^E^D)+I[8]+2272392833&4294967295,S=v+(_<<11&4294967295|_>>>21),_=D+(S^v^E)+I[11]+1839030562&4294967295,D=S+(_<<16&4294967295|_>>>16),_=E+(D^S^v)+I[14]+4259657740&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^S)+I[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=S+(v^E^D)+I[4]+1272893353&4294967295,S=v+(_<<11&4294967295|_>>>21),_=D+(S^v^E)+I[7]+4139469664&4294967295,D=S+(_<<16&4294967295|_>>>16),_=E+(D^S^v)+I[10]+3200236656&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^S)+I[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=S+(v^E^D)+I[0]+3936430074&4294967295,S=v+(_<<11&4294967295|_>>>21),_=D+(S^v^E)+I[3]+3572445317&4294967295,D=S+(_<<16&4294967295|_>>>16),_=E+(D^S^v)+I[6]+76029189&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^S)+I[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=S+(v^E^D)+I[12]+3873151461&4294967295,S=v+(_<<11&4294967295|_>>>21),_=D+(S^v^E)+I[15]+530742520&4294967295,D=S+(_<<16&4294967295|_>>>16),_=E+(D^S^v)+I[2]+3299628645&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(D^(E|~S))+I[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=S+(E^(v|~D))+I[7]+1126891415&4294967295,S=v+(_<<10&4294967295|_>>>22),_=D+(v^(S|~E))+I[14]+2878612391&4294967295,D=S+(_<<15&4294967295|_>>>17),_=E+(S^(D|~v))+I[5]+4237533241&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~S))+I[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=S+(E^(v|~D))+I[3]+2399980690&4294967295,S=v+(_<<10&4294967295|_>>>22),_=D+(v^(S|~E))+I[10]+4293915773&4294967295,D=S+(_<<15&4294967295|_>>>17),_=E+(S^(D|~v))+I[1]+2240044497&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~S))+I[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=S+(E^(v|~D))+I[15]+4264355552&4294967295,S=v+(_<<10&4294967295|_>>>22),_=D+(v^(S|~E))+I[6]+2734768916&4294967295,D=S+(_<<15&4294967295|_>>>17),_=E+(S^(D|~v))+I[13]+1309151649&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~S))+I[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=S+(E^(v|~D))+I[11]+3174756917&4294967295,S=v+(_<<10&4294967295|_>>>22),_=D+(v^(S|~E))+I[2]+718787259&4294967295,D=S+(_<<15&4294967295|_>>>17),_=E+(S^(D|~v))+I[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,w.g[2]=w.g[2]+D&4294967295,w.g[3]=w.g[3]+S&4294967295}r.prototype.u=function(w,v){v===void 0&&(v=w.length);for(var E=v-this.blockSize,I=this.B,D=this.h,S=0;S<v;){if(D==0)for(;S<=E;)i(this,w,S),S+=this.blockSize;if(typeof w=="string"){for(;S<v;)if(I[D++]=w.charCodeAt(S++),D==this.blockSize){i(this,I),D=0;break}}else for(;S<v;)if(I[D++]=w[S++],D==this.blockSize){i(this,I),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;var E=8*this.o;for(v=w.length-8;v<w.length;++v)w[v]=E&255,E/=256;for(this.u(w),w=Array(16),v=E=0;4>v;++v)for(var I=0;32>I;I+=8)w[E++]=this.g[v]>>>I&255;return w};function o(w,v){var E=a;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=v(w)}function s(w,v){this.h=v;for(var E=[],I=!0,D=w.length-1;0<=D;D--){var S=w[D]|0;I&&S==v||(E[D]=S,I=!1)}this.g=E}var a={};function u(w){return-128<=w&&128>w?o(w,function(v){return new s([v|0],0>v?-1:0)}):new s([w|0],0>w?-1:0)}function l(w){if(isNaN(w)||!isFinite(w))return p;if(0>w)return x(l(-w));for(var v=[],E=1,I=0;w>=E;I++)v[I]=w/E|0,E*=4294967296;return new s(v,0)}function f(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return x(f(w.substring(1),v));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(v,8)),I=p,D=0;D<w.length;D+=8){var S=Math.min(8,w.length-D),_=parseInt(w.substring(D,D+S),v);8>S?(S=l(Math.pow(v,S)),I=I.j(S).add(l(_))):(I=I.j(E),I=I.add(l(_)))}return I}var p=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(M(this))return-x(this).m();for(var w=0,v=1,E=0;E<this.g.length;E++){var I=this.i(E);w+=(0<=I?I:4294967296+I)*v,v*=4294967296}return w},n.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(b(this))return"0";if(M(this))return"-"+x(this).toString(w);for(var v=l(Math.pow(w,6)),E=this,I="";;){var D=re(E,v).g;E=j(E,D.j(v));var S=((0<E.g.length?E.g[0]:E.h)>>>0).toString(w);if(E=D,b(E))return S+I;for(;6>S.length;)S="0"+S;I=S+I}},n.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function b(w){if(w.h!=0)return!1;for(var v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function M(w){return w.h==-1}n.l=function(w){return w=j(this,w),M(w)?-1:b(w)?0:1};function x(w){for(var v=w.g.length,E=[],I=0;I<v;I++)E[I]=~w.g[I];return new s(E,~w.h).add(m)}n.abs=function(){return M(this)?x(this):this},n.add=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0,D=0;D<=v;D++){var S=I+(this.i(D)&65535)+(w.i(D)&65535),_=(S>>>16)+(this.i(D)>>>16)+(w.i(D)>>>16);I=_>>>16,S&=65535,_&=65535,E[D]=_<<16|S}return new s(E,E[E.length-1]&-2147483648?-1:0)};function j(w,v){return w.add(x(v))}n.j=function(w){if(b(this)||b(w))return p;if(M(this))return M(w)?x(this).j(x(w)):x(x(this).j(w));if(M(w))return x(this.j(x(w)));if(0>this.l(y)&&0>w.l(y))return l(this.m()*w.m());for(var v=this.g.length+w.g.length,E=[],I=0;I<2*v;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(var D=0;D<w.g.length;D++){var S=this.i(I)>>>16,_=this.i(I)&65535,mr=w.i(D)>>>16,hu=w.i(D)&65535;E[2*I+2*D]+=_*hu,Y(E,2*I+2*D),E[2*I+2*D+1]+=S*hu,Y(E,2*I+2*D+1),E[2*I+2*D+1]+=_*mr,Y(E,2*I+2*D+1),E[2*I+2*D+2]+=S*mr,Y(E,2*I+2*D+2)}for(I=0;I<v;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=v;I<2*v;I++)E[I]=0;return new s(E,0)};function Y(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function U(w,v){this.g=w,this.h=v}function re(w,v){if(b(v))throw Error("division by zero");if(b(w))return new U(p,p);if(M(w))return v=re(x(w),v),new U(x(v.g),x(v.h));if(M(v))return v=re(w,x(v)),new U(x(v.g),v.h);if(30<w.g.length){if(M(w)||M(v))throw Error("slowDivide_ only works with positive integers.");for(var E=m,I=v;0>=I.l(w);)E=se(E),I=se(I);var D=ae(E,1),S=ae(I,1);for(I=ae(I,2),E=ae(E,2);!b(I);){var _=S.add(I);0>=_.l(w)&&(D=D.add(E),S=_),I=ae(I,1),E=ae(E,1)}return v=j(w,D.j(v)),new U(D,v)}for(D=p;0<=w.l(v);){for(E=Math.max(1,Math.floor(w.m()/v.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),S=l(E),_=S.j(v);M(_)||0<_.l(w);)E-=I,S=l(E),_=S.j(v);b(S)&&(S=m),D=D.add(S),w=j(w,_)}return new U(D,w)}n.A=function(w){return re(this,w).h},n.and=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)&w.i(I);return new s(E,this.h&w.h)},n.or=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)|w.i(I);return new s(E,this.h|w.h)},n.xor=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)^w.i(I);return new s(E,this.h^w.h)};function se(w){for(var v=w.g.length+1,E=[],I=0;I<v;I++)E[I]=w.i(I)<<1|w.i(I-1)>>>31;return new s(E,w.h)}function ae(w,v){var E=v>>5;v%=32;for(var I=w.g.length-E,D=[],S=0;S<I;S++)D[S]=0<v?w.i(S+E)>>>v|w.i(S+E+1)<<32-v:w.i(S+E);return new s(D,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,RE=HM.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=f,kr=HM.Integer=s}).apply(typeof $M<"u"?$M:typeof self<"u"?self:typeof window<"u"?window:{});var yp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fr={};var NE,WB,va,PE,gl,vp,OE,kE,FE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,h){return c==Array.prototype||c==Object.prototype||(c[d]=h.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof yp=="object"&&yp];for(var d=0;d<c.length;++d){var h=c[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var h=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var C=c[g];if(!(C in h))break e;h=h[C]}c=c[c.length-1],g=h[c],d=d(g),d!=g&&d!=null&&e(h,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var h=0,g=!1,C={next:function(){if(!g&&h<c.length){var N=h++;return{value:d(N,c[N]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,h){return h})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function f(c,d,h){return c.call.apply(c.bind,arguments)}function p(c,d,h){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function m(c,d,h){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,m.apply(null,arguments)}function y(c,d){var h=Array.prototype.slice.call(arguments,1);return function(){var g=h.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function b(c,d){function h(){}h.prototype=d.prototype,c.aa=d.prototype,c.prototype=new h,c.prototype.constructor=c,c.Qb=function(g,C,N){for(var q=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)q[ke-2]=arguments[ke];return d.prototype[C].apply(g,q)}}function M(c){let d=c.length;if(0<d){let h=Array(d);for(let g=0;g<d;g++)h[g]=c[g];return h}return[]}function x(c,d){for(let h=1;h<arguments.length;h++){let g=arguments[h];if(u(g)){let C=c.length||0,N=g.length||0;c.length=C+N;for(let q=0;q<N;q++)c[C+q]=g[q]}else c.push(g)}}class j{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function Y(c){return/^[\s\xa0]*$/.test(c)}function U(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function re(c){return re[" "](c),c}re[" "]=function(){};var se=U().indexOf("Gecko")!=-1&&!(U().toLowerCase().indexOf("webkit")!=-1&&U().indexOf("Edge")==-1)&&!(U().indexOf("Trident")!=-1||U().indexOf("MSIE")!=-1)&&U().indexOf("Edge")==-1;function ae(c,d,h){for(let g in c)d.call(h,c[g],g,c)}function w(c,d){for(let h in c)d.call(void 0,c[h],h,c)}function v(c){let d={};for(let h in c)d[h]=c[h];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,d){let h,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(h in g)c[h]=g[h];for(let N=0;N<E.length;N++)h=E[N],Object.prototype.hasOwnProperty.call(g,h)&&(c[h]=g[h])}}function D(c){var d=1;c=c.split(":");let h=[];for(;0<d&&c.length;)h.push(c.shift()),d--;return c.length&&h.push(c.join(":")),h}function S(c){a.setTimeout(()=>{throw c},0)}function _(){var c=fm;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class mr{constructor(){this.h=this.g=null}add(d,h){let g=hu.get();g.set(d,h),this.h?this.h.next=g:this.g=g,this.h=g}}var hu=new j(()=>new r1,c=>c.reset());class r1{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let pu,gu=!1,fm=new mr,tC=()=>{let c=a.Promise.resolve(void 0);pu=()=>{c.then(i1)}};var i1=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(h){S(h)}var d=hu;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}gu=!1};function Wr(){this.s=this.s,this.C=this.C}Wr.prototype.s=!1,Wr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Wr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Tt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Tt.prototype.h=function(){this.defaultPrevented=!0};var o1=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let h=()=>{};a.addEventListener("test",h,d),a.removeEventListener("test",h,d)}catch{}return c})();function mu(c,d){if(Tt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var h=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(se){e:{try{re(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else h=="mouseover"?d=c.fromElement:h=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:s1[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&mu.aa.h.call(this)}}b(mu,Tt);var s1={2:"touch",3:"pen",4:"mouse"};mu.prototype.h=function(){mu.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var yu="closure_listenable_"+(1e6*Math.random()|0),a1=0;function u1(c,d,h,g,C){this.listener=c,this.proxy=null,this.src=d,this.type=h,this.capture=!!g,this.ha=C,this.key=++a1,this.da=this.fa=!1}function dd(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function fd(c){this.src=c,this.g={},this.h=0}fd.prototype.add=function(c,d,h,g,C){var N=c.toString();c=this.g[N],c||(c=this.g[N]=[],this.h++);var q=pm(c,d,g,C);return-1<q?(d=c[q],h||(d.fa=!1)):(d=new u1(d,this.src,N,!!g,C),d.fa=h,c.push(d)),d};function hm(c,d){var h=d.type;if(h in c.g){var g=c.g[h],C=Array.prototype.indexOf.call(g,d,void 0),N;(N=0<=C)&&Array.prototype.splice.call(g,C,1),N&&(dd(d),c.g[h].length==0&&(delete c.g[h],c.h--))}}function pm(c,d,h,g){for(var C=0;C<c.length;++C){var N=c[C];if(!N.da&&N.listener==d&&N.capture==!!h&&N.ha==g)return C}return-1}var gm="closure_lm_"+(1e6*Math.random()|0),mm={};function nC(c,d,h,g,C){if(g&&g.once)return iC(c,d,h,g,C);if(Array.isArray(d)){for(var N=0;N<d.length;N++)nC(c,d[N],h,g,C);return null}return h=Em(h),c&&c[yu]?c.K(d,h,l(g)?!!g.capture:!!g,C):rC(c,d,h,!1,g,C)}function rC(c,d,h,g,C,N){if(!d)throw Error("Invalid event type");var q=l(C)?!!C.capture:!!C,ke=vm(c);if(ke||(c[gm]=ke=new fd(c)),h=ke.add(d,h,g,q,N),h.proxy)return h;if(g=c1(),h.proxy=g,g.src=c,g.listener=h,c.addEventListener)o1||(C=q),C===void 0&&(C=!1),c.addEventListener(d.toString(),g,C);else if(c.attachEvent)c.attachEvent(sC(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return h}function c1(){function c(h){return d.call(c.src,c.listener,h)}let d=l1;return c}function iC(c,d,h,g,C){if(Array.isArray(d)){for(var N=0;N<d.length;N++)iC(c,d[N],h,g,C);return null}return h=Em(h),c&&c[yu]?c.L(d,h,l(g)?!!g.capture:!!g,C):rC(c,d,h,!0,g,C)}function oC(c,d,h,g,C){if(Array.isArray(d))for(var N=0;N<d.length;N++)oC(c,d[N],h,g,C);else g=l(g)?!!g.capture:!!g,h=Em(h),c&&c[yu]?(c=c.i,d=String(d).toString(),d in c.g&&(N=c.g[d],h=pm(N,h,g,C),-1<h&&(dd(N[h]),Array.prototype.splice.call(N,h,1),N.length==0&&(delete c.g[d],c.h--)))):c&&(c=vm(c))&&(d=c.g[d.toString()],c=-1,d&&(c=pm(d,h,g,C)),(h=-1<c?d[c]:null)&&ym(h))}function ym(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[yu])hm(d.i,c);else{var h=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(h,g,c.capture):d.detachEvent?d.detachEvent(sC(h),g):d.addListener&&d.removeListener&&d.removeListener(g),(h=vm(d))?(hm(h,c),h.h==0&&(h.src=null,d[gm]=null)):dd(c)}}}function sC(c){return c in mm?mm[c]:mm[c]="on"+c}function l1(c,d){if(c.da)c=!0;else{d=new mu(d,this);var h=c.listener,g=c.ha||c.src;c.fa&&ym(c),c=h.call(g,d)}return c}function vm(c){return c=c[gm],c instanceof fd?c:null}var _m="__closure_events_fn_"+(1e9*Math.random()>>>0);function Em(c){return typeof c=="function"?c:(c[_m]||(c[_m]=function(d){return c.handleEvent(d)}),c[_m])}function St(){Wr.call(this),this.i=new fd(this),this.M=this,this.F=null}b(St,Wr),St.prototype[yu]=!0,St.prototype.removeEventListener=function(c,d,h,g){oC(this,c,d,h,g)};function jt(c,d){var h,g=c.F;if(g)for(h=[];g;g=g.F)h.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new Tt(d,c);else if(d instanceof Tt)d.target=d.target||c;else{var C=d;d=new Tt(g,c),I(d,C)}if(C=!0,h)for(var N=h.length-1;0<=N;N--){var q=d.g=h[N];C=hd(q,g,!0,d)&&C}if(q=d.g=c,C=hd(q,g,!0,d)&&C,C=hd(q,g,!1,d)&&C,h)for(N=0;N<h.length;N++)q=d.g=h[N],C=hd(q,g,!1,d)&&C}St.prototype.N=function(){if(St.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var h=c.g[d],g=0;g<h.length;g++)dd(h[g]);delete c.g[d],c.h--}}this.F=null},St.prototype.K=function(c,d,h,g){return this.i.add(String(c),d,!1,h,g)},St.prototype.L=function(c,d,h,g){return this.i.add(String(c),d,!0,h,g)};function hd(c,d,h,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,N=0;N<d.length;++N){var q=d[N];if(q&&!q.da&&q.capture==h){var ke=q.listener,yt=q.ha||q.src;q.fa&&hm(c.i,q),C=ke.call(yt,g)!==!1&&C}}return C&&!g.defaultPrevented}function aC(c,d,h){if(typeof c=="function")h&&(c=m(c,h));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function uC(c){c.g=aC(()=>{c.g=null,c.i&&(c.i=!1,uC(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class d1 extends Wr{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:uC(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vu(c){Wr.call(this),this.h=c,this.g={}}b(vu,Wr);var cC=[];function lC(c){ae(c.g,function(d,h){this.g.hasOwnProperty(h)&&ym(d)},c),c.g={}}vu.prototype.N=function(){vu.aa.N.call(this),lC(this)},vu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wm=a.JSON.stringify,f1=a.JSON.parse,h1=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Im(){}Im.prototype.h=null;function dC(c){return c.h||(c.h=c.i())}function fC(){}var _u={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Dm(){Tt.call(this,"d")}b(Dm,Tt);function Cm(){Tt.call(this,"c")}b(Cm,Tt);var Qi={},hC=null;function pd(){return hC=hC||new St}Qi.La="serverreachability";function pC(c){Tt.call(this,Qi.La,c)}b(pC,Tt);function Eu(c){let d=pd();jt(d,new pC(d))}Qi.STAT_EVENT="statevent";function gC(c,d){Tt.call(this,Qi.STAT_EVENT,c),this.stat=d}b(gC,Tt);function Bt(c){let d=pd();jt(d,new gC(d,c))}Qi.Ma="timingevent";function mC(c,d){Tt.call(this,Qi.Ma,c),this.size=d}b(mC,Tt);function wu(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Iu(){this.g=!0}Iu.prototype.xa=function(){this.g=!1};function p1(c,d,h,g,C,N){c.info(function(){if(c.g)if(N)for(var q="",ke=N.split("&"),yt=0;yt<ke.length;yt++){var be=ke[yt].split("=");if(1<be.length){var At=be[0];be=be[1];var Mt=At.split("_");q=2<=Mt.length&&Mt[1]=="type"?q+(At+"="+be+"&"):q+(At+"=redacted&")}}else q=null;else q=N;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+h+`
`+q})}function g1(c,d,h,g,C,N,q){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+h+`
`+N+" "+q})}function ss(c,d,h,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+y1(c,h)+(g?" "+g:"")})}function m1(c,d){c.info(function(){return"TIMEOUT: "+d})}Iu.prototype.info=function(){};function y1(c,d){if(!c.g)return d;if(!d)return null;try{var h=JSON.parse(d);if(h){for(c=0;c<h.length;c++)if(Array.isArray(h[c])){var g=h[c];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var N=C[0];if(N!="noop"&&N!="stop"&&N!="close")for(var q=1;q<C.length;q++)C[q]=""}}}}return wm(h)}catch{return d}}var gd={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},yC={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bm;function md(){}b(md,Im),md.prototype.g=function(){return new XMLHttpRequest},md.prototype.i=function(){return{}},bm=new md;function Kr(c,d,h,g){this.j=c,this.i=d,this.l=h,this.R=g||1,this.U=new vu(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vC}function vC(){this.i=null,this.g="",this.h=!1}var _C={},Tm={};function Sm(c,d,h){c.L=1,c.v=Ed(yr(d)),c.m=h,c.P=!0,EC(c,null)}function EC(c,d){c.F=Date.now(),yd(c),c.A=yr(c.v);var h=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),OC(h.i,"t",g),c.C=0,h=c.j.J,c.h=new vC,c.g=JC(c.j,h?d:null,!c.m),0<c.O&&(c.M=new d1(m(c.Y,c,c.g),c.O)),d=c.U,h=c.g,g=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(cC[0]=C.toString()),C=cC);for(var N=0;N<C.length;N++){var q=nC(h,C[N],g||d.handleEvent,!1,d.h||d);if(!q)break;d.g[q.key]=q}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Eu(),p1(c.i,c.u,c.A,c.l,c.R,c.m)}Kr.prototype.ca=function(c){c=c.target;let d=this.M;d&&vr(c)==3?d.j():this.Y(c)},Kr.prototype.Y=function(c){try{if(c==this.g)e:{let Mt=vr(this.g);var d=this.g.Ba();let cs=this.g.Z();if(!(3>Mt)&&(Mt!=3||this.g&&(this.h.h||this.g.oa()||UC(this.g)))){this.J||Mt!=4||d==7||(d==8||0>=cs?Eu(3):Eu(2)),Am(this);var h=this.g.Z();this.X=h;t:if(wC(this)){var g=UC(this.g);c="";var C=g.length,N=vr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yi(this),Du(this);var q="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(N&&d==C-1)});g.length=0,this.h.g+=c,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=h==200,g1(this.i,this.u,this.A,this.l,this.R,Mt,h),this.o){if(this.T&&!this.K){t:{if(this.g){var ke,yt=this.g;if((ke=yt.g?yt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(ke)){var be=ke;break t}}be=null}if(h=be)ss(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mm(this,h);else{this.o=!1,this.s=3,Bt(12),Yi(this),Du(this);break e}}if(this.P){h=!0;let Sn;for(;!this.J&&this.C<q.length;)if(Sn=v1(this,q),Sn==Tm){Mt==4&&(this.s=4,Bt(14),h=!1),ss(this.i,this.l,null,"[Incomplete Response]");break}else if(Sn==_C){this.s=4,Bt(15),ss(this.i,this.l,q,"[Invalid Chunk]"),h=!1;break}else ss(this.i,this.l,Sn,null),Mm(this,Sn);if(wC(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mt!=4||q.length!=0||this.h.h||(this.s=1,Bt(16),h=!1),this.o=this.o&&h,!h)ss(this.i,this.l,q,"[Invalid Chunked Response]"),Yi(this),Du(this);else if(0<q.length&&!this.W){this.W=!0;var At=this.j;At.g==this&&At.ba&&!At.M&&(At.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),km(At),At.M=!0,Bt(11))}}else ss(this.i,this.l,q,null),Mm(this,q);Mt==4&&Yi(this),this.o&&!this.J&&(Mt==4?KC(this.j,this):(this.o=!1,yd(this)))}else k1(this.g),h==400&&0<q.indexOf("Unknown SID")?(this.s=3,Bt(12)):(this.s=0,Bt(13)),Yi(this),Du(this)}}}catch{}finally{}};function wC(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function v1(c,d){var h=c.C,g=d.indexOf(`
`,h);return g==-1?Tm:(h=Number(d.substring(h,g)),isNaN(h)?_C:(g+=1,g+h>d.length?Tm:(d=d.slice(g,g+h),c.C=g+h,d)))}Kr.prototype.cancel=function(){this.J=!0,Yi(this)};function yd(c){c.S=Date.now()+c.I,IC(c,c.I)}function IC(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=wu(m(c.ba,c),d)}function Am(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Kr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(m1(this.i,this.A),this.L!=2&&(Eu(),Bt(17)),Yi(this),this.s=2,Du(this)):IC(this,this.S-c)};function Du(c){c.j.G==0||c.J||KC(c.j,c)}function Yi(c){Am(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,lC(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Mm(c,d){try{var h=c.j;if(h.G!=0&&(h.g==c||xm(h.h,c))){if(!c.K&&xm(h.h,c)&&h.G==3){try{var g=h.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<c.F)bd(h),Dd(h);else break e;Om(h),Bt(18)}}else h.za=C[1],0<h.za-h.T&&37500>C[2]&&h.F&&h.v==0&&!h.C&&(h.C=wu(m(h.Za,h),6e3));if(1>=bC(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Ji(h,11)}else if((c.K||h.g==c)&&bd(h),!Y(d))for(C=h.Da.g.parse(d),d=0;d<C.length;d++){let be=C[d];if(h.T=be[0],be=be[1],h.G==2)if(be[0]=="c"){h.K=be[1],h.ia=be[2];let At=be[3];At!=null&&(h.la=At,h.j.info("VER="+h.la));let Mt=be[4];Mt!=null&&(h.Aa=Mt,h.j.info("SVER="+h.Aa));let cs=be[5];cs!=null&&typeof cs=="number"&&0<cs&&(g=1.5*cs,h.L=g,h.j.info("backChannelRequestTimeoutMs_="+g)),g=h;let Sn=c.g;if(Sn){let Sd=Sn.g?Sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sd){var N=g.h;N.g||Sd.indexOf("spdy")==-1&&Sd.indexOf("quic")==-1&&Sd.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(Rm(N,N.h),N.h=null))}if(g.D){let Fm=Sn.g?Sn.g.getResponseHeader("X-HTTP-Session-Id"):null;Fm&&(g.ya=Fm,Be(g.I,g.D,Fm))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-c.F,h.j.info("Handshake RTT: "+h.R+"ms")),g=h;var q=c;if(g.qa=ZC(g,g.J?g.ia:null,g.W),q.K){TC(g.h,q);var ke=q,yt=g.L;yt&&(ke.I=yt),ke.B&&(Am(ke),yd(ke)),g.g=q}else GC(g);0<h.i.length&&Cd(h)}else be[0]!="stop"&&be[0]!="close"||Ji(h,7);else h.G==3&&(be[0]=="stop"||be[0]=="close"?be[0]=="stop"?Ji(h,7):Pm(h):be[0]!="noop"&&h.l&&h.l.ta(be),h.v=0)}}Eu(4)}catch{}}var _1=class{constructor(c,d){this.g=c,this.map=d}};function DC(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function CC(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function bC(c){return c.h?1:c.g?c.g.size:0}function xm(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Rm(c,d){c.g?c.g.add(d):c.h=d}function TC(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}DC.prototype.cancel=function(){if(this.i=SC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function SC(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let h of c.g.values())d=d.concat(h.D);return d}return M(c.i)}function E1(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],h=c.length,g=0;g<h;g++)d.push(c[g]);return d}d=[],h=0;for(g in c)d[h++]=c[g];return d}function w1(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var h=0;h<c;h++)d.push(h);return d}d=[],h=0;for(let g in c)d[h++]=g;return d}}}function AC(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var h=w1(c),g=E1(c),C=g.length,N=0;N<C;N++)d.call(void 0,g[N],h&&h[N],c)}var MC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function I1(c,d){if(c){c=c.split("&");for(var h=0;h<c.length;h++){var g=c[h].indexOf("="),C=null;if(0<=g){var N=c[h].substring(0,g);C=c[h].substring(g+1)}else N=c[h];d(N,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Zi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Zi){this.h=c.h,vd(this,c.j),this.o=c.o,this.g=c.g,_d(this,c.s),this.l=c.l;var d=c.i,h=new Tu;h.i=d.i,d.g&&(h.g=new Map(d.g),h.h=d.h),xC(this,h),this.m=c.m}else c&&(d=String(c).match(MC))?(this.h=!1,vd(this,d[1]||"",!0),this.o=Cu(d[2]||""),this.g=Cu(d[3]||"",!0),_d(this,d[4]),this.l=Cu(d[5]||"",!0),xC(this,d[6]||"",!0),this.m=Cu(d[7]||"")):(this.h=!1,this.i=new Tu(null,this.h))}Zi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(bu(d,RC,!0),":");var h=this.g;return(h||d=="file")&&(c.push("//"),(d=this.o)&&c.push(bu(d,RC,!0),"@"),c.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&c.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&c.push("/"),c.push(bu(h,h.charAt(0)=="/"?b1:C1,!0))),(h=this.i.toString())&&c.push("?",h),(h=this.m)&&c.push("#",bu(h,S1)),c.join("")};function yr(c){return new Zi(c)}function vd(c,d,h){c.j=h?Cu(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function _d(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function xC(c,d,h){d instanceof Tu?(c.i=d,A1(c.i,c.h)):(h||(d=bu(d,T1)),c.i=new Tu(d,c.h))}function Be(c,d,h){c.i.set(d,h)}function Ed(c){return Be(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Cu(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function bu(c,d,h){return typeof c=="string"?(c=encodeURI(c).replace(d,D1),h&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function D1(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var RC=/[#\/\?@]/g,C1=/[#\?:]/g,b1=/[#\?]/g,T1=/[#\?@]/g,S1=/#/g;function Tu(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Qr(c){c.g||(c.g=new Map,c.h=0,c.i&&I1(c.i,function(d,h){c.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}n=Tu.prototype,n.add=function(c,d){Qr(this),this.i=null,c=as(this,c);var h=this.g.get(c);return h||this.g.set(c,h=[]),h.push(d),this.h+=1,this};function NC(c,d){Qr(c),d=as(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function PC(c,d){return Qr(c),d=as(c,d),c.g.has(d)}n.forEach=function(c,d){Qr(this),this.g.forEach(function(h,g){h.forEach(function(C){c.call(d,C,g,this)},this)},this)},n.na=function(){Qr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),h=[];for(let g=0;g<d.length;g++){let C=c[g];for(let N=0;N<C.length;N++)h.push(d[g])}return h},n.V=function(c){Qr(this);let d=[];if(typeof c=="string")PC(this,c)&&(d=d.concat(this.g.get(as(this,c))));else{c=Array.from(this.g.values());for(let h=0;h<c.length;h++)d=d.concat(c[h])}return d},n.set=function(c,d){return Qr(this),this.i=null,c=as(this,c),PC(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function OC(c,d,h){NC(c,d),0<h.length&&(c.i=null,c.g.set(as(c,d),M(h)),c.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var h=0;h<d.length;h++){var g=d[h];let N=encodeURIComponent(String(g)),q=this.V(g);for(g=0;g<q.length;g++){var C=N;q[g]!==""&&(C+="="+encodeURIComponent(String(q[g]))),c.push(C)}}return this.i=c.join("&")};function as(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function A1(c,d){d&&!c.j&&(Qr(c),c.i=null,c.g.forEach(function(h,g){var C=g.toLowerCase();g!=C&&(NC(this,g),OC(this,C,h))},c)),c.j=d}function M1(c,d){let h=new Iu;if(a.Image){let g=new Image;g.onload=y(Yr,h,"TestLoadImage: loaded",!0,d,g),g.onerror=y(Yr,h,"TestLoadImage: error",!1,d,g),g.onabort=y(Yr,h,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(Yr,h,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function x1(c,d){let h=new Iu,g=new AbortController,C=setTimeout(()=>{g.abort(),Yr(h,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(N=>{clearTimeout(C),N.ok?Yr(h,"TestPingServer: ok",!0,d):Yr(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),Yr(h,"TestPingServer: error",!1,d)})}function Yr(c,d,h,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(h)}catch{}}function R1(){this.g=new h1}function N1(c,d,h){let g=h||"";try{AC(c,function(C,N){let q=C;l(C)&&(q=wm(C)),d.push(g+N+"="+encodeURIComponent(q))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function Su(c){this.l=c.Ub||null,this.j=c.eb||!1}b(Su,Im),Su.prototype.g=function(){return new wd(this.l,this.j)},Su.prototype.i=(function(c){return function(){return c}})({});function wd(c,d){St.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(wd,St),n=wd.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Mu(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Au(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Mu(this)),this.g&&(this.readyState=3,Mu(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;kC(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function kC(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Au(this):Mu(this),this.readyState==3&&kC(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Au(this))},n.Qa=function(c){this.g&&(this.response=c,Au(this))},n.ga=function(){this.g&&Au(this)};function Au(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Mu(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,c.push(h[0]+": "+h[1]),h=d.next();return c.join(`\r
`)};function Mu(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(wd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function FC(c){let d="";return ae(c,function(h,g){d+=g,d+=":",d+=h,d+=`\r
`}),d}function Nm(c,d,h){e:{for(g in h){var g=!1;break e}g=!0}g||(h=FC(h),typeof c=="string"?h!=null&&encodeURIComponent(String(h)):Be(c,d,h))}function Ke(c){St.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Ke,St);var P1=/^https?$/i,O1=["POST","PUT"];n=Ke.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,h,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bm.g(),this.v=this.o?dC(this.o):dC(bm),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(N){LC(this,N);return}if(c=h||"",h=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)h.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let N of g.keys())h.set(N,g.get(N));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(h.keys()).find(N=>N.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(O1,d,void 0))||g||C||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[N,q]of h)this.g.setRequestHeader(N,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{BC(this),this.u=!0,this.g.send(c),this.u=!1}catch(N){LC(this,N)}};function LC(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,VC(c),Id(c)}function VC(c){c.A||(c.A=!0,jt(c,"complete"),jt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,jt(this,"complete"),jt(this,"abort"),Id(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Id(this,!0)),Ke.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?jC(this):this.bb())},n.bb=function(){jC(this)};function jC(c){if(c.h&&typeof s<"u"&&(!c.v[1]||vr(c)!=4||c.Z()!=2)){if(c.u&&vr(c)==4)aC(c.Ea,0,c);else if(jt(c,"readystatechange"),vr(c)==4){c.h=!1;try{let q=c.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var h;if(!(h=d)){var g;if(g=q===0){var C=String(c.D).match(MC)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!P1.test(C?C.toLowerCase():"")}h=g}if(h)jt(c,"complete"),jt(c,"success");else{c.m=6;try{var N=2<vr(c)?c.g.statusText:""}catch{N=""}c.l=N+" ["+c.Z()+"]",VC(c)}}finally{Id(c)}}}}function Id(c,d){if(c.g){BC(c);let h=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||jt(c,"ready");try{h.onreadystatechange=g}catch{}}}function BC(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function vr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<vr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),f1(d)}};function UC(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function k1(c){let d={};c=(c.g&&2<=vr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(Y(c[g]))continue;var h=D(c[g]);let C=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let N=d[C]||[];d[C]=N,N.push(h)}w(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xu(c,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[c]||d}function $C(c){this.Aa=0,this.i=[],this.j=new Iu,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xu("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xu("baseRetryDelayMs",5e3,c),this.cb=xu("retryDelaySeedMs",1e4,c),this.Wa=xu("forwardChannelMaxRetries",2,c),this.wa=xu("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new DC(c&&c.concurrentRequestLimit),this.Da=new R1,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=$C.prototype,n.la=8,n.G=1,n.connect=function(c,d,h,g){Bt(0),this.W=c,this.H=d||{},h&&g!==void 0&&(this.H.OSID=h,this.H.OAID=g),this.F=this.X,this.I=ZC(this,null,this.W),Cd(this)};function Pm(c){if(HC(c),c.G==3){var d=c.U++,h=yr(c.I);if(Be(h,"SID",c.K),Be(h,"RID",d),Be(h,"TYPE","terminate"),Ru(c,h),d=new Kr(c,c.j,d),d.L=2,d.v=Ed(yr(h)),h=!1,a.navigator&&a.navigator.sendBeacon)try{h=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!h&&a.Image&&(new Image().src=d.v,h=!0),h||(d.g=JC(d.j,null),d.g.ea(d.v)),d.F=Date.now(),yd(d)}YC(c)}function Dd(c){c.g&&(km(c),c.g.cancel(),c.g=null)}function HC(c){Dd(c),c.u&&(a.clearTimeout(c.u),c.u=null),bd(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Cd(c){if(!CC(c.h)&&!c.s){c.s=!0;var d=c.Ga;pu||tC(),gu||(pu(),gu=!0),fm.add(d,c),c.B=0}}function F1(c,d){return bC(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=wu(m(c.Ga,c,d),QC(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new Kr(this,this.j,c),N=this.o;if(this.S&&(N?(N=v(N),I(N,this.S)):N=this.S),this.m!==null||this.O||(C.H=N,N=null),this.P)e:{for(var d=0,h=0;h<this.i.length;h++){t:{var g=this.i[h];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=h;break e}if(d===4096||h===this.i.length-1){d=h+1;break e}}d=1e3}else d=1e3;d=zC(this,C,d),h=yr(this.I),Be(h,"RID",c),Be(h,"CVER",22),this.D&&Be(h,"X-HTTP-Session-Id",this.D),Ru(this,h),N&&(this.O?d="headers="+encodeURIComponent(String(FC(N)))+"&"+d:this.m&&Nm(h,this.m,N)),Rm(this.h,C),this.Ua&&Be(h,"TYPE","init"),this.P?(Be(h,"$req",d),Be(h,"SID","null"),C.T=!0,Sm(C,h,null)):Sm(C,h,d),this.G=2}}else this.G==3&&(c?qC(this,c):this.i.length==0||CC(this.h)||qC(this))};function qC(c,d){var h;d?h=d.l:h=c.U++;let g=yr(c.I);Be(g,"SID",c.K),Be(g,"RID",h),Be(g,"AID",c.T),Ru(c,g),c.m&&c.o&&Nm(g,c.m,c.o),h=new Kr(c,c.j,h,c.B+1),c.m===null&&(h.H=c.o),d&&(c.i=d.D.concat(c.i)),d=zC(c,h,1e3),h.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Rm(c.h,h),Sm(h,g,d)}function Ru(c,d){c.H&&ae(c.H,function(h,g){Be(d,g,h)}),c.l&&AC({},function(h,g){Be(d,g,h)})}function zC(c,d,h){h=Math.min(c.i.length,h);var g=c.l?m(c.l.Na,c.l,c):null;e:{var C=c.i;let N=-1;for(;;){let q=["count="+h];N==-1?0<h?(N=C[0].g,q.push("ofs="+N)):N=0:q.push("ofs="+N);let ke=!0;for(let yt=0;yt<h;yt++){let be=C[yt].g,At=C[yt].map;if(be-=N,0>be)N=Math.max(0,C[yt].g-100),ke=!1;else try{N1(At,q,"req"+be+"_")}catch{g&&g(At)}}if(ke){g=q.join("&");break e}}}return c=c.i.splice(0,h),d.D=c,g}function GC(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;pu||tC(),gu||(pu(),gu=!0),fm.add(d,c),c.v=0}}function Om(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=wu(m(c.Fa,c),QC(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,WC(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=wu(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Bt(10),Dd(this),WC(this))};function km(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function WC(c){c.g=new Kr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=yr(c.qa);Be(d,"RID","rpc"),Be(d,"SID",c.K),Be(d,"AID",c.T),Be(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Be(d,"TO",c.ja),Be(d,"TYPE","xmlhttp"),Ru(c,d),c.m&&c.o&&Nm(d,c.m,c.o),c.L&&(c.g.I=c.L);var h=c.g;c=c.ia,h.L=1,h.v=Ed(yr(d)),h.m=null,h.P=!0,EC(h,c)}n.Za=function(){this.C!=null&&(this.C=null,Dd(this),Om(this),Bt(19))};function bd(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function KC(c,d){var h=null;if(c.g==d){bd(c),km(c),c.g=null;var g=2}else if(xm(c.h,d))h=d.D,TC(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){h=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;g=pd(),jt(g,new mC(g,h)),Cd(c)}else GC(c);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&F1(c,d)||g==2&&Om(c)))switch(h&&0<h.length&&(d=c.h,d.i=d.i.concat(h)),C){case 1:Ji(c,5);break;case 4:Ji(c,10);break;case 3:Ji(c,6);break;default:Ji(c,2)}}}function QC(c,d){let h=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(h*=2),h*d}function Ji(c,d){if(c.j.info("Error code "+d),d==2){var h=m(c.fb,c),g=c.Xa;let C=!g;g=new Zi(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||vd(g,"https"),Ed(g),C?M1(g.toString(),h):x1(g.toString(),h)}else Bt(2);c.G=0,c.l&&c.l.sa(d),YC(c),HC(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))};function YC(c){if(c.G=0,c.ka=[],c.l){let d=SC(c.h);(d.length!=0||c.i.length!=0)&&(x(c.ka,d),x(c.ka,c.i),c.h.i.length=0,M(c.i),c.i.length=0),c.l.ra()}}function ZC(c,d,h){var g=h instanceof Zi?yr(h):new Zi(h);if(g.g!="")d&&(g.g=d+"."+g.g),_d(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var N=new Zi(null);g&&vd(N,g),d&&(N.g=d),C&&_d(N,C),h&&(N.l=h),g=N}return h=c.D,d=c.ya,h&&d&&Be(g,h,d),Be(g,"VER",c.la),Ru(c,g),g}function JC(c,d,h){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Ke(new Su({eb:h})):new Ke(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function XC(){}n=XC.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Td(){}Td.prototype.g=function(c,d){return new on(c,d)};function on(c,d){St.call(this),this.g=new $C(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!Y(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!Y(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new us(this)}b(on,St),on.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){Pm(this.g)},on.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var h={};h.__data__=c,c=h}else this.u&&(h={},h.__data__=wm(c),c=h);d.i.push(new _1(d.Ya++,c)),d.G==3&&Cd(d)},on.prototype.N=function(){this.g.l=null,delete this.j,Pm(this.g),delete this.g,on.aa.N.call(this)};function e0(c){Dm.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let h in d){c=h;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}b(e0,Dm);function t0(){Cm.call(this),this.status=1}b(t0,Cm);function us(c){this.g=c}b(us,XC),us.prototype.ua=function(){jt(this.g,"a")},us.prototype.ta=function(c){jt(this.g,new e0(c))},us.prototype.sa=function(c){jt(this.g,new t0)},us.prototype.ra=function(){jt(this.g,"b")},Td.prototype.createWebChannel=Td.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,FE=Fr.createWebChannelTransport=function(){return new Td},kE=Fr.getStatEventTarget=function(){return pd()},OE=Fr.Event=Qi,vp=Fr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},gd.NO_ERROR=0,gd.TIMEOUT=8,gd.HTTP_ERROR=6,gl=Fr.ErrorCode=gd,yC.COMPLETE="complete",PE=Fr.EventType=yC,fC.EventType=_u,_u.OPEN="a",_u.CLOSE="b",_u.ERROR="c",_u.MESSAGE="d",St.prototype.listen=St.prototype.K,va=Fr.WebChannel=fC,WB=Fr.FetchXmlHttpFactory=Su,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,NE=Fr.XhrIo=Ke}).apply(typeof yp<"u"?yp:typeof self<"u"?self:typeof window<"u"?window:{});var qM="@firebase/firestore",zM="4.8.0";var st=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};st.UNAUTHENTICATED=new st(null),st.GOOGLE_CREDENTIALS=new st("google-credentials-uid"),st.FIRST_PARTY=new st("first-party-uid"),st.MOCK_USER=new st("mock-user");var ru="11.10.0";var Pi=new Rd("@firebase/firestore");function ba(){return Pi.logLevel}function sR(n){Pi.setLogLevel(n)}function F(n,...e){if(Pi.logLevel<=zn.DEBUG){let t=e.map(YI);Pi.debug(`Firestore (${ru}): ${n}`,...t)}}function Je(n,...e){if(Pi.logLevel<=zn.ERROR){let t=e.map(YI);Pi.error(`Firestore (${ru}): ${n}`,...t)}}function rn(n,...e){if(Pi.logLevel<=zn.WARN){let t=e.map(YI);Pi.warn(`Firestore (${ru}): ${n}`,...t)}}function YI(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function K(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,aR(n,r,t)}function aR(n,e,t){let r=`FIRESTORE (${ru}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Je(r),new Error(r)}function J(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||aR(e,i,r)}function uR(n,e){n||K(57014,e)}function W(n,e){return n}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},O=class extends c0{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var pt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Np=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},qE=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(st.UNAUTHENTICATED))}shutdown(){}},zE=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},GE=class{constructor(e){this.t=e,this.currentUser=st.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){J(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new pt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new pt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>P(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new pt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(J(typeof r.accessToken=="string",31837,{l:r}),new Np(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return J(e===null||typeof e=="string",2055,{h:e}),new st(e)}},WE=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=st.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},KE=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new WE(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(st.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Pp=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},QE=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,d0(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){J(this.o===void 0,3512);let r=o=>{o.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,F("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Pp(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(J(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Pp(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function KB(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function ZI(){return new TextEncoder}var xl=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=KB(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function ie(n,e){return n<e?-1:n>e?1:0}function YE(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return ie(r,i);{let o=ZI(),s=QB(o.encode(GM(n,t)),o.encode(GM(e,t)));return s!==0?s:ie(r,i)}}t+=r>65535?2:1}return ie(n.length,e.length)}function GM(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function QB(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ie(n[t],e[t]);return ie(n.length,e.length)}function Oa(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function cR(n){return n+"\0"}var WM="__name__",Op=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&K(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&K(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return ie(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):YE(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return kr.fromString(e.substring(4,e.length-2))}},Ee=class n extends Op{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new O(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},YB=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Xe=class n extends Op{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return YB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===WM}static keyField(){return new n([WM])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new O(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new O(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new O(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new O(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var G=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ee.fromString(e))}static fromName(e){return new n(Ee.fromString(e).popFirst(5))}static empty(){return new n(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ee.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ee(e.slice()))}};function JI(n,e,t){if(!t)throw new O(R.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function XI(n,e,t,r){if(e===!0&&r===!0)throw new O(R.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function KM(n){if(!G.isDocumentKey(n))throw new O(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function QM(n){if(G.isDocumentKey(n))throw new O(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function lR(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Pg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":K(12329,{type:typeof n})}function Ce(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new O(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Pg(n);throw new O(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function dR(n,e){if(e<=0)throw new O(R.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function at(n,e){let t={typeString:n};return e&&(t.value=e),t}function td(n,e){if(!lR(n))throw new O(R.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new O(R.INVALID_ARGUMENT,t);return!0}var YM=-62135596800,ZM=1e6,je=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*ZM);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new O(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new O(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<YM)throw new O(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ZM}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(td(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-YM;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};je._jsonSchemaVersion="firestore/timestamp/1.0",je._jsonSchema={type:at("string",je._jsonSchemaVersion),seconds:at("number"),nanoseconds:at("number")};var te=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new je(0,0))}static max(){return new n(new je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ka=-1,Fa=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function ZE(n){return n.fields.find(e=>e.kind===2)}function Po(n){return n.fields.filter(e=>e.kind!==2)}Fa.UNKNOWN_ID=-1;var Ra=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var Rl=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Tn.min())}};function fR(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=te.fromTimestamp(r===1e9?new je(t+1,0):new je(t,r));return new Tn(i,G.empty(),e)}function hR(n){return new Tn(n.readTime,n.key,ka)}var Tn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(te.min(),G.empty(),ka)}static max(){return new n(te.max(),G.empty(),ka)}};function eD(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=G.comparator(n.documentKey,e.documentKey),t!==0?t:ie(n.largestBatchId,e.largestBatchId))}var pR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",kp=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function qi(n){return P(this,null,function*(){if(n.code!==R.FAILED_PRECONDITION||n.message!==pR)throw n;F("LocalStore","Unexpectedly lost primary lease")})}var A=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&K(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(f=>{s[l]=f,++a,a===o&&r(s)},f=>i(f))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var pn="SimpleDb",Fp=class n{static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new Uo(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new pt,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Uo(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{let i=tD(r.target.error);this.S.reject(new Uo(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(F(pn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new XE(t)}},Oi=class n{static delete(e){return F(pn,"Removing database:",e),ko(Vm().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!Md())return!1;if(n.F())return!0;let e=Nu(),t=n.M(e),r=0<t&&t<10,i=gR(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,n.M(Nu())===12.2&&Je("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}k(e){return P(this,null,function*(){return this.db||(F(pn,"Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new Uo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new O(R.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new O(R.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Uo(e,s))},i.onupgradeneeded=o=>{F(pn,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;if(this.L!==null&&this.L!==o.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${o.oldVersion}, event.newVersion=${o.newVersion}, db.version=${s.version}`);this.B.q(s,i.transaction,o.oldVersion,this.version).next(()=>{F(pn,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",t=>{let r=t.target;this.L=r.version},{passive:!0})),this.db.addEventListener("versionchange",t=>{var r;t.newVersion===null&&(rn('Received "versionchange" event with newVersion===null; notifying the registered DatabaseDeletedListener, if any'),(r=this.databaseDeletedListener)===null||r===void 0||r.call(this))},{passive:!0}),this.db})}setDatabaseDeletedListener(e){if(this.databaseDeletedListener)throw new Error("setDatabaseDeletedListener() may only be called once, and it has already been called");this.databaseDeletedListener=e}runTransaction(e,t,r,i){return P(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.k(e);let a=Fp.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.v(),l)).catch(l=>(a.abort(l),A.reject(l))).toPromise();return u.catch(()=>{}),yield a.D,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(F(pn,"Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function gR(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var JE=class{constructor(e){this.$=e,this.U=!1,this.K=null}get isDone(){return this.U}get W(){return this.K}set cursor(e){this.$=e}done(){this.U=!0}G(e){this.K=e}delete(){return ko(this.$.delete())}},Uo=class extends O{constructor(e,t){super(R.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function zi(n){return n.name==="IndexedDbTransactionError"}var XE=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(F(pn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(F(pn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ko(r)}add(e){return F(pn,"ADD",this.store.name,e,e),ko(this.store.add(e))}get(e){return ko(this.store.get(e)).next(t=>(t===void 0&&(t=null),F(pn,"GET",this.store.name,e,t),t))}delete(e){return F(pn,"DELETE",this.store.name,e),ko(this.store.delete(e))}count(){return F(pn,"COUNT",this.store.name),ko(this.store.count())}j(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new A((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.J(o,(a,u)=>{s.push(u)}).next(()=>s)}}H(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new A((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}Y(e,t){F(pn,"DELETE ALL",this.store.name);let r=this.options(e,t);r.Z=!1;let i=this.cursor(r);return this.J(i,(o,s,a)=>a.delete())}X(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.J(i,t)}ee(e){let t=this.cursor({});return new A((r,i)=>{t.onerror=o=>{let s=tD(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}J(e,t){let r=[];return new A((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new JE(a),l=t(a.primaryKey,a.value,u);if(l instanceof A){let f=l.catch(p=>(u.done(),A.reject(p)));r.push(f)}u.isDone?i():u.W===null?a.continue():a.continue(u.W)}}).next(()=>A.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function ko(n){return new A((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=tD(r.target.error);t(i)}})}var JM=!1;function tD(n){let e=Oi.M(Nu());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new O("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return JM||(JM=!0,setTimeout(()=>{throw r},0)),r}}return n}var Il="IndexBackfiller",ew=class{constructor(e,t){this.asyncQueue=e,this.te=t,this.task=null}start(){this.ne(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ne(e){F(Il,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>P(this,null,function*(){this.task=null;try{let t=yield this.te.re();F(Il,`Documents written: ${t}`)}catch(t){zi(t)?F(Il,"Ignoring IndexedDB error during index backfill: ",t):yield qi(t)}yield this.ne(6e4)}))}},tw=class{constructor(e,t){this.localStore=e,this.persistence=t}re(e=50){return P(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.ie(t,e))})}ie(e,t){let r=new Set,i=t,o=!0;return A.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return F(Il,`Processing collection: ${s}`),this.se(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}se(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.oe(i,o)).next(a=>(F(Il,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}oe(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=hR(o);eD(s,r)>0&&(r=s)}),new Tn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var gn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),xi=-1;function nd(n){return n==null}function Nl(n){return n===0&&1/n==-1/0}function mR(n){return typeof n=="number"&&Number.isInteger(n)&&!Nl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Lp="";function Vt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=XM(e)),e=ZB(n.get(t),e);return XM(e)}function ZB(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case Lp:t+="";break;default:t+=o}}return t}function XM(n){return n+Lp+""}function ar(n){let e=n.length;if(J(e>=2,64408,{path:n}),e===2)return J(n.charAt(0)===Lp&&n.charAt(1)==="",56145,{path:n}),Ee.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf(Lp,o);switch((s<0||s>t)&&K(50515,{path:n}),n.charAt(s+1)){case"":let a=n.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:K(61167,{path:n})}o=s+2}return new Ee(r)}var Oo="remoteDocuments",rd="owner",_a="owner",Pl="mutationQueues",JB="userId",Bn="mutations",ex="batchId",jo="userMutationsIndex",tx=["userId","batchId"];function Cp(n,e){return[n,Vt(e)]}function yR(n,e,t){return[n,Vt(e),t]}var XB={},La="documentMutations",Vp="remoteDocumentsV14",eU=["prefixPath","collectionGroup","readTime","documentId"],bp="documentKeyIndex",tU=["prefixPath","collectionGroup","documentId"],vR="collectionGroupIndex",nU=["collectionGroup","readTime","prefixPath","documentId"],Ol="remoteDocumentGlobal",nw="remoteDocumentGlobalKey",Va="targets",_R="queryTargetsIndex",rU=["canonicalId","targetId"],ja="targetDocuments",iU=["targetId","path"],nD="documentTargetsIndex",oU=["path","targetId"],jp="targetGlobalKey",$o="targetGlobal",kl="collectionParents",sU=["collectionId","parent"],Ba="clientMetadata",aU="clientId",Og="bundles",uU="bundleId",kg="namedQueries",cU="name",rD="indexConfiguration",lU="indexId",rw="collectionGroupIndex",dU="collectionGroup",Dl="indexState",fU=["indexId","uid"],ER="sequenceNumberIndex",hU=["uid","sequenceNumber"],Cl="indexEntries",pU=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],wR="documentKeyIndex",gU=["indexId","uid","orderedDocumentKey"],Fg="documentOverlays",mU=["userId","collectionPath","documentId"],iw="collectionPathOverlayIndex",yU=["userId","collectionPath","largestBatchId"],IR="collectionGroupOverlayIndex",vU=["userId","collectionGroup","largestBatchId"],iD="globals",_U="name",DR=[Pl,Bn,La,Oo,Va,rd,$o,ja,Ba,Ol,kl,Og,kg],EU=[...DR,Fg],CR=[Pl,Bn,La,Vp,Va,rd,$o,ja,Ba,Ol,kl,Og,kg,Fg],bR=CR,oD=[...bR,rD,Dl,Cl],wU=oD,TR=[...oD,iD],IU=TR;var Fl=class extends kp{constructor(e,t){super(),this.ce=e,this.currentSequenceNumber=t}};function gt(n,e){let t=W(n);return Oi.N(t.ce,e)}function nx(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Gi(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function SR(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var He=class n{constructor(e,t){this.comparator=e,this.root=t||cr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,cr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xa(this.root,e,this.comparator,!1)}getReverseIterator(){return new xa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xa(this.root,e,this.comparator,!0)}},xa=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},cr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw K(43730,{key:this.key,value:this.value});if(this.right.isRed())throw K(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw K(27949);return e+(this.isRed()?0:1)}};cr.EMPTY=null,cr.RED=!0,cr.BLACK=!1;cr.EMPTY=new class{constructor(){this.size=0}get key(){throw K(57766)}get value(){throw K(16141)}get color(){throw K(16727)}get left(){throw K(29726)}get right(){throw K(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new cr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Oe=class n{constructor(e){this.comparator=e,this.data=new He(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Bp(this.data.getIterator())}getIteratorFrom(e){return new Bp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Bp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Ea(n){return n.hasNext()?n.getNext():void 0}var mn=class n{constructor(e){this.fields=e,e.sort(Xe.comparator)}static empty(){return new n([])}unionWith(e){let t=new Oe(Xe.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Oa(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Up=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function AR(){return typeof atob<"u"}var tt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Up("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};tt.EMPTY_BYTE_STRING=new tt("");var DU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jr(n){if(J(!!n,39018),typeof n=="string"){let e=0,t=DU.exec(n);if(J(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ze(n.seconds),nanos:ze(n.nanos)}}function ze(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Br(n){return typeof n=="string"?tt.fromBase64String(n):tt.fromUint8Array(n)}var MR="server_timestamp",xR="__type__",RR="__previous_value__",NR="__local_write_time__";function Lg(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[xR])===null||t===void 0?void 0:t.stringValue)===MR}function Vg(n){let e=n.mapValue.fields[RR];return Lg(e)?Vg(e):e}function Ll(n){let e=jr(n.mapValue.fields[NR].timestampValue);return new je(e.seconds,e.nanos)}var ow=class{constructor(e,t,r,i,o,s,a,u,l,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=f}},sw="(default)",ki=class n{constructor(e,t){this.projectId=e,this.database=t||sw}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===sw}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var sD="__type__",PR="__max__",Ai={mapValue:{fields:{__type__:{stringValue:PR}}}},aD="__vector__",Ua="value",Tp={nullValue:"NULL_VALUE"};function Fi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Lg(n)?4:OR(n)?9007199254740991:jg(n)?10:11:K(28295,{value:n})}function hr(n,e){if(n===e)return!0;let t=Fi(n);if(t!==Fi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ll(n).isEqual(Ll(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=jr(i.timestampValue),a=jr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return Br(i.bytesValue).isEqual(Br(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return ze(i.geoPointValue.latitude)===ze(o.geoPointValue.latitude)&&ze(i.geoPointValue.longitude)===ze(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return ze(i.integerValue)===ze(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=ze(i.doubleValue),a=ze(o.doubleValue);return s===a?Nl(s)===Nl(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return Oa(n.arrayValue.values||[],e.arrayValue.values||[],hr);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(nx(s)!==nx(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!hr(s[u],a[u])))return!1;return!0})(n,e);default:return K(52216,{left:n})}}function Vl(n,e){return(n.values||[]).find(t=>hr(t,e))!==void 0}function Li(n,e){if(n===e)return 0;let t=Fi(n),r=Fi(e);if(t!==r)return ie(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ie(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=ze(o.integerValue||o.doubleValue),u=ze(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(n,e);case 3:return rx(n.timestampValue,e.timestampValue);case 4:return rx(Ll(n),Ll(e));case 5:return YE(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=Br(o),u=Br(s);return a.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let f=ie(a[l],u[l]);if(f!==0)return f}return ie(a.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=ie(ze(o.latitude),ze(s.latitude));return a!==0?a:ie(ze(o.longitude),ze(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return ix(n.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,u,l,f;let p=o.fields||{},m=s.fields||{},y=(a=p[Ua])===null||a===void 0?void 0:a.arrayValue,b=(u=m[Ua])===null||u===void 0?void 0:u.arrayValue,M=ie(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((f=b?.values)===null||f===void 0?void 0:f.length)||0);return M!==0?M:ix(y,b)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Ai.mapValue&&s===Ai.mapValue)return 0;if(o===Ai.mapValue)return 1;if(s===Ai.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},f=Object.keys(l);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){let m=YE(u[p],f[p]);if(m!==0)return m;let y=Li(a[u[p]],l[f[p]]);if(y!==0)return y}return ie(u.length,f.length)})(n.mapValue,e.mapValue);default:throw K(23264,{le:t})}}function rx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ie(n,e);let t=jr(n),r=jr(e),i=ie(t.seconds,r.seconds);return i!==0?i:ie(t.nanos,r.nanos)}function ix(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Li(t[i],r[i]);if(o)return o}return ie(t.length,r.length)}function $a(n){return aw(n)}function aw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=jr(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Br(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return G.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=aw(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${aw(t.fields[s])}`;return i+"}"})(n.mapValue):K(61005,{value:n})}function Sp(n){switch(Fi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Vg(n);return e?16+Sp(e):16;case 5:return 2*n.stringValue.length;case 6:return Br(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Sp(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Gi(r.fields,(o,s)=>{i+=o.length+Sp(s)}),i})(n.mapValue);default:throw K(13486,{value:n})}}function Ho(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function uw(n){return!!n&&"integerValue"in n}function jl(n){return!!n&&"arrayValue"in n}function ox(n){return!!n&&"nullValue"in n}function sx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ap(n){return!!n&&"mapValue"in n}function jg(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[sD])===null||t===void 0?void 0:t.stringValue)===aD}function bl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Gi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=bl(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=bl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function OR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===PR}var kR={mapValue:{fields:{[sD]:{stringValue:aD},[Ua]:{arrayValue:{}}}}};function CU(n){return"nullValue"in n?Tp:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ho(ki.empty(),G.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?jg(n)?kR:{mapValue:{}}:K(35942,{value:n})}function bU(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ho(ki.empty(),G.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?kR:"mapValue"in n?jg(n)?{mapValue:{}}:Ai:K(61959,{value:n})}function ax(n,e){let t=Li(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ux(n,e){let t=Li(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var Lt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ap(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bl(t)}setAll(e){let t=Xe.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=bl(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Ap(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ap(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Gi(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(bl(this.value))}};function FR(n){let e=[];return Gi(n.fields,(t,r)=>{let i=new Xe([t]);if(Ap(r)){let o=FR(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new mn(e)}var ut=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,te.min(),te.min(),te.min(),Lt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,te.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,te.min(),te.min(),Lt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,te.min(),te.min(),Lt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Lt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Lt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var pr=class{constructor(e,t){this.position=e,this.inclusive=t}};function cx(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=G.comparator(G.fromName(s.referenceValue),t.key):r=Li(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function lx(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!hr(n.position[t],e.position[t]))return!1;return!0}var qo=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function TU(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var $p=class{},ye=class n extends $p{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new dw(e,t,r):t==="array-contains"?new pw(e,r):t==="in"?new Hp(e,r):t==="not-in"?new gw(e,r):t==="array-contains-any"?new mw(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new fw(e,r):new hw(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Li(t,this.value)):t!==null&&Fi(this.value)===Fi(t)&&this.matchesComparison(Li(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Re=class n extends $p{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return Ha(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function Ha(n){return n.op==="and"}function cw(n){return n.op==="or"}function uD(n){return LR(n)&&Ha(n)}function LR(n){for(let e of n.filters)if(e instanceof Re)return!1;return!0}function lw(n){if(n instanceof ye)return n.field.canonicalString()+n.op.toString()+$a(n.value);if(uD(n))return n.filters.map(e=>lw(e)).join(",");{let e=n.filters.map(t=>lw(t)).join(",");return`${n.op}(${e})`}}function VR(n,e){return n instanceof ye?(function(r,i){return i instanceof ye&&r.op===i.op&&r.field.isEqual(i.field)&&hr(r.value,i.value)})(n,e):n instanceof Re?(function(r,i){return i instanceof Re&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&VR(s,i.filters[a]),!0):!1})(n,e):void K(19439)}function jR(n,e){let t=n.filters.concat(e);return Re.create(t,n.op)}function BR(n){return n instanceof ye?(function(t){return`${t.field.canonicalString()} ${t.op} ${$a(t.value)}`})(n):n instanceof Re?(function(t){return t.op.toString()+" {"+t.getFilters().map(BR).join(" ,")+"}"})(n):"Filter"}var dw=class extends ye{constructor(e,t,r){super(e,t,r),this.key=G.fromName(r.referenceValue)}matches(e){let t=G.comparator(e.key,this.key);return this.matchesComparison(t)}},fw=class extends ye{constructor(e,t){super(e,"in",t),this.keys=UR("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},hw=class extends ye{constructor(e,t){super(e,"not-in",t),this.keys=UR("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function UR(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>G.fromName(r.referenceValue))}var pw=class extends ye{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return jl(t)&&Vl(t.arrayValue,this.value)}},Hp=class extends ye{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Vl(this.value.arrayValue,t)}},gw=class extends ye{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Vl(this.value.arrayValue,t)}},mw=class extends ye{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!jl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Vl(this.value.arrayValue,r))}};var yw=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function vw(n,e=null,t=[],r=[],i=null,o=null,s=null){return new yw(n,e,t,r,i,o,s)}function zo(n){let e=W(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>lw(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),nd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>$a(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>$a(r)).join(",")),e.Pe=t}return e.Pe}function id(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!TU(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!VR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!lx(n.startAt,e.startAt)&&lx(n.endAt,e.endAt)}function qp(n){return G.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function zp(n,e){return n.filters.filter(t=>t instanceof ye&&t.field.isEqual(e))}function dx(n,e,t){let r=Tp,i=!0;for(let o of zp(n,e)){let s=Tp,a=!0;switch(o.op){case"<":case"<=":s=CU(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Tp}ax({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];ax({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function fx(n,e,t){let r=Ai,i=!0;for(let o of zp(n,e)){let s=Ai,a=!0;switch(o.op){case">=":case">":s=bU(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Ai}ux({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];ux({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var Un=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function $R(n,e,t,r,i,o,s,a){return new Un(n,e,t,r,i,o,s,a)}function iu(n){return new Un(n)}function hx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function cD(n){return n.collectionGroup!==null}function Na(n){let e=W(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Oe(Xe.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new qo(o,r))}),t.has(Xe.keyField().canonicalString())||e.Te.push(new qo(Xe.keyField(),r))}return e.Te}function Gt(n){let e=W(n);return e.Ie||(e.Ie=SU(e,Na(n))),e.Ie}function SU(n,e){if(n.limitType==="F")return vw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new qo(i.field,o)});let t=n.endAt?new pr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new pr(n.startAt.position,n.startAt.inclusive):null;return vw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function _w(n,e){let t=n.filters.concat([e]);return new Un(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Gp(n,e,t){return new Un(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function od(n,e){return id(Gt(n),Gt(e))&&n.limitType===e.limitType}function HR(n){return`${zo(Gt(n))}|lt:${n.limitType}`}function Ta(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>BR(i)).join(", ")}]`),nd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>$a(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>$a(i)).join(",")),`Target(${r})`})(Gt(n))}; limitType=${n.limitType})`}function sd(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):G.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of Na(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=cx(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,Na(r),i)||r.endAt&&!(function(s,a,u){let l=cx(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,Na(r),i))})(n,e)}function qR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function zR(n){return(e,t)=>{let r=!1;for(let i of Na(n)){let o=AU(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function AU(n,e,t){let r=n.field.isKeyField()?G.comparator(e.key,t.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Li(u,l):K(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return K(19790,{direction:n.dir})}}var $n=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Gi(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return SR(this.inner)}size(){return this.innerSize}};var MU=new He(G.comparator);function tn(){return MU}var GR=new He(G.comparator);function El(...n){let e=GR;for(let t of n)e=e.insert(t.key,t);return e}function WR(n){let e=GR;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ur(){return Tl()}function KR(){return Tl()}function Tl(){return new $n(n=>n.toString(),(n,e)=>n.isEqual(e))}var xU=new He(G.comparator),RU=new Oe(G.comparator);function he(...n){let e=RU;for(let t of n)e=e.add(t);return e}var NU=new Oe(ie);function lD(){return NU}function dD(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nl(e)?"-0":e}}function QR(n){return{integerValue:""+n}}function YR(n,e){return mR(e)?QR(e):dD(n,e)}var qa=class{constructor(){this._=void 0}};function PU(n,e,t){return n instanceof Vi?(function(i,o){let s={fields:{[xR]:{stringValue:MR},[NR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Lg(o)&&(o=Vg(o)),o&&(s.fields[RR]=o),{mapValue:s}})(t,e):n instanceof Ur?JR(n,e):n instanceof $r?XR(n,e):(function(i,o){let s=ZR(i,o),a=px(s)+px(i.Ee);return uw(s)&&uw(i.Ee)?QR(a):dD(i.serializer,a)})(n,e)}function OU(n,e,t){return n instanceof Ur?JR(n,e):n instanceof $r?XR(n,e):t}function ZR(n,e){return n instanceof ji?(function(r){return uw(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Vi=class extends qa{},Ur=class extends qa{constructor(e){super(),this.elements=e}};function JR(n,e){let t=eN(e);for(let r of n.elements)t.some(i=>hr(i,r))||t.push(r);return{arrayValue:{values:t}}}var $r=class extends qa{constructor(e){super(),this.elements=e}};function XR(n,e){let t=eN(e);for(let r of n.elements)t=t.filter(i=>!hr(i,r));return{arrayValue:{values:t}}}var ji=class extends qa{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function px(n){return ze(n.integerValue||n.doubleValue)}function eN(n){return jl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Go=class{constructor(e,t){this.field=e,this.transform=t}};function kU(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Ur&&i instanceof Ur||r instanceof $r&&i instanceof $r?Oa(r.elements,i.elements,hr):r instanceof ji&&i instanceof ji?hr(r.Ee,i.Ee):r instanceof Vi&&i instanceof Vi})(n.transform,e.transform)}var Ew=class{constructor(e,t){this.version=e,this.transformResults=t}},Ye=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Mp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var za=class{};function tN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ui(n.key,Ye.none()):new Bi(n.key,n.data,Ye.none());{let t=n.data,r=Lt.empty(),i=new Oe(Xe.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Hn(n.key,r,new mn(i.toArray()),Ye.none())}}function FU(n,e,t){n instanceof Bi?(function(i,o,s){let a=i.value.clone(),u=mx(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Hn?(function(i,o,s){if(!Mp(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=mx(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(nN(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function Sl(n,e,t,r){return n instanceof Bi?(function(o,s,a,u){if(!Mp(o.precondition,s))return a;let l=o.value.clone(),f=yx(o.fieldTransforms,u,s);return l.setAll(f),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof Hn?(function(o,s,a,u){if(!Mp(o.precondition,s))return a;let l=yx(o.fieldTransforms,u,s),f=s.data;return f.setAll(nN(o)),f.setAll(l),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(o,s,a){return Mp(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function LU(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=ZR(r.transform,i||null);o!=null&&(t===null&&(t=Lt.empty()),t.set(r.field,o))}return t||null}function gx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Oa(r,i,(o,s)=>kU(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Bi=class extends za{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Hn=class extends za{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function nN(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function mx(n,e,t){let r=new Map;J(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,OU(s,a,t[i]))}return r}function yx(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,PU(o,s,e))}return r}var Ui=class extends za{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Bl=class extends za{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Ul=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&FU(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Sl(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Sl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=KR();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=tN(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),he())}isEqual(e){return this.batchId===e.batchId&&Oa(this.mutations,e.mutations,(t,r)=>gx(t,r))&&Oa(this.baseMutations,e.baseMutations,(t,r)=>gx(t,r))}},ww=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){J(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return xU})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var $l=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Iw=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var it,De;function rN(n){switch(n){case R.OK:return K(64938);case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0;default:return K(15467,{code:n})}}function iN(n){if(n===void 0)return Je("GRPC error has no .code"),R.UNKNOWN;switch(n){case it.OK:return R.OK;case it.CANCELLED:return R.CANCELLED;case it.UNKNOWN:return R.UNKNOWN;case it.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case it.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case it.INTERNAL:return R.INTERNAL;case it.UNAVAILABLE:return R.UNAVAILABLE;case it.UNAUTHENTICATED:return R.UNAUTHENTICATED;case it.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case it.NOT_FOUND:return R.NOT_FOUND;case it.ALREADY_EXISTS:return R.ALREADY_EXISTS;case it.PERMISSION_DENIED:return R.PERMISSION_DENIED;case it.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case it.ABORTED:return R.ABORTED;case it.OUT_OF_RANGE:return R.OUT_OF_RANGE;case it.UNIMPLEMENTED:return R.UNIMPLEMENTED;case it.DATA_LOSS:return R.DATA_LOSS;default:return K(39323,{code:n})}}(De=it||(it={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";var vx=null;var VU=new kr([4294967295,4294967295],0);function _x(n){let e=ZI().encode(n),t=new RE;return t.update(e),new Uint8Array(t.digest())}function Ex(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new kr([t,r],0),new kr([i,o],0)]}var Dw=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Bo(`Invalid padding: ${t}`);if(r<0)throw new Bo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Bo(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Bo(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=kr.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(kr.fromNumber(r)));return i.compare(VU)===1&&(i=new kr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=_x(e),[r,i]=Ex(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=_x(e),[r,i]=Ex(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Bo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Hl=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,ql.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(te.min(),i,new He(ie),tn(),he())}},ql=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,he(),he(),he())}};var Pa=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},Wp=class{constructor(e,t){this.targetId=e,this.De=t}},Kp=class{constructor(e,t,r=tt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Qp=class{constructor(){this.ve=0,this.Ce=wx(),this.Fe=tt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=he(),t=he(),r=he();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:K(38017,{changeType:o})}}),new ql(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=wx()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,J(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},Cw=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=tn(),this.je=_p(),this.Je=_p(),this.He=new He(ie)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:K(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(qp(o))if(r===0){let s=new G(o.path);this.Xe(t,s,ut.newNoDocument(s,te.min()))}else J(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}vx?.ct((function(f,p,m,y,b){var M,x,j,Y,U,re;let se={localCacheCount:f,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},ae=p.unchangedNames;return ae&&(se.bloomFilter={applied:b===0,hashCount:(M=ae?.hashCount)!==null&&M!==void 0?M:0,bitmapLength:(Y=(j=(x=ae?.bits)===null||x===void 0?void 0:x.bitmap)===null||j===void 0?void 0:j.length)!==null&&Y!==void 0?Y:0,padding:(re=(U=ae?.bits)===null||U===void 0?void 0:U.padding)!==null&&re!==void 0?re:0,mightContain:w=>{var v;return(v=y?.mightContain(w))!==null&&v!==void 0&&v}}),se})(s,e.De,this.We.lt(),a,u))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Br(r).toUint8Array()}catch(u){if(u instanceof Up)return rn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Dw(s,i,o)}catch(u){return rn(u instanceof Bo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&qp(a.target)){let u=new G(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,ut.newNoDocument(u,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=he();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Hl(e,t,this.He,this.ze,r);return this.ze=tn(),this.je=_p(),this.Je=_p(),this.He=new He(ie),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Qp,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Oe(ie),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Oe(ie),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||F("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Qp),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function _p(){return new He(G.comparator)}function wx(){return new He(G.comparator)}var jU={asc:"ASCENDING",desc:"DESCENDING"},BU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UU={and:"AND",or:"OR"},bw=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Tw(n,e){return n.useProto3Json||nd(e)?e:{value:e}}function Ga(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function $U(n,e){return Ga(n,e.toTimestamp())}function et(n){return J(!!n,49232),te.fromTimestamp((function(t){let r=jr(t);return new je(r.seconds,r.nanos)})(n))}function fD(n,e){return Sw(n,e).canonicalString()}function Sw(n,e){let t=(function(i){return new Ee(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function sN(n){let e=Ee.fromString(n);return J(mN(e),10190,{key:e.toString()}),e}function zl(n,e){return fD(n.databaseId,e.path)}function lr(n,e){let t=sN(e);if(t.get(1)!==n.databaseId.projectId)throw new O(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new O(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new G(cN(t))}function aN(n,e){return fD(n.databaseId,e)}function uN(n){let e=sN(n);return e.length===4?Ee.emptyPath():cN(e)}function Aw(n){return new Ee(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function cN(n){return J(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Ix(n,e,t){return{name:zl(n,e),fields:t.value.mapValue.fields}}function lN(n,e,t){let r=lr(n,e.name),i=et(e.updateTime),o=e.createTime?et(e.createTime):te.min(),s=new Lt({mapValue:{fields:e.fields}}),a=ut.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function HU(n,e){return"found"in e?(function(r,i){J(!!i.found,43571),i.found.name,i.found.updateTime;let o=lr(r,i.found.name),s=et(i.found.updateTime),a=i.found.createTime?et(i.found.createTime):te.min(),u=new Lt({mapValue:{fields:i.found.fields}});return ut.newFoundDocument(o,s,a,u)})(n,e):"missing"in e?(function(r,i){J(!!i.missing,3894),J(!!i.readTime,22933);let o=lr(r,i.missing),s=et(i.readTime);return ut.newNoDocument(o,s)})(n,e):K(7234,{result:e})}function qU(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:K(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,f){return l.useProto3Json?(J(f===void 0||typeof f=="string",58123),tt.fromBase64String(f||"")):(J(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),tt.fromUint8Array(f||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let f=l.code===void 0?R.UNKNOWN:iN(l.code);return new O(f,l.message||"")})(s);t=new Kp(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=lr(n,r.document.name),o=et(r.document.updateTime),s=r.document.createTime?et(r.document.createTime):te.min(),a=new Lt({mapValue:{fields:r.document.fields}}),u=ut.newFoundDocument(i,o,s,a),l=r.targetIds||[],f=r.removedTargetIds||[];t=new Pa(l,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=lr(n,r.document),o=r.readTime?et(r.readTime):te.min(),s=ut.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Pa([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=lr(n,r.document),o=r.removedTargetIds||[];t=new Pa([],o,i,null)}else{if(!("filter"in e))return K(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Iw(i,o),a=r.targetId;t=new Wp(a,s)}}return t}function Gl(n,e){let t;if(e instanceof Bi)t={update:Ix(n,e.key,e.value)};else if(e instanceof Ui)t={delete:zl(n,e.key)};else if(e instanceof Hn)t={update:Ix(n,e.key,e.data),updateMask:YU(e.fieldMask)};else{if(!(e instanceof Bl))return K(16599,{Rt:e.type});t={verify:zl(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof Vi)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ur)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof $r)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ji)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw K(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:$U(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:K(27497)})(n,e.precondition)),t}function Mw(n,e){let t=e.currentDocument?(function(o){return o.updateTime!==void 0?Ye.updateTime(et(o.updateTime)):o.exists!==void 0?Ye.exists(o.exists):Ye.none()})(e.currentDocument):Ye.none(),r=e.updateTransforms?e.updateTransforms.map(i=>(function(s,a){let u=null;if("setToServerValue"in a)J(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),u=new Vi;else if("appendMissingElements"in a){let f=a.appendMissingElements.values||[];u=new Ur(f)}else if("removeAllFromArray"in a){let f=a.removeAllFromArray.values||[];u=new $r(f)}else"increment"in a?u=new ji(s,a.increment):K(16584,{proto:a});let l=Xe.fromServerFormat(a.fieldPath);return new Go(l,u)})(n,i)):[];if(e.update){e.update.name;let i=lr(n,e.update.name),o=new Lt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=(function(u){let l=u.fieldPaths||[];return new mn(l.map(f=>Xe.fromServerFormat(f)))})(e.updateMask);return new Hn(i,o,s,t,r)}return new Bi(i,o,t,r)}if(e.delete){let i=lr(n,e.delete);return new Ui(i,t)}if(e.verify){let i=lr(n,e.verify);return new Bl(i,t)}return K(1463,{proto:e})}function zU(n,e){return n&&n.length>0?(J(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?et(i.updateTime):et(o);return s.isEqual(te.min())&&(s=et(o)),new Ew(s,i.transformResults||[])})(t,e))):[]}function dN(n,e){return{documents:[aN(n,e.path)]}}function fN(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=aN(n,i);let o=(function(l){if(l.length!==0)return gN(Re.create(l,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(f=>(function(m){return{field:Sa(m.field),direction:WU(m.dir)}})(f))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=Tw(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:t,parent:i}}function hN(n){let e=uN(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){J(r===1,65062);let f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];t.where&&(o=(function(p){let m=pN(p);return m instanceof Re&&uD(m)?m.getFilters():[m]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map(m=>(function(b){return new qo(Aa(b.field),(function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(m))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let m;return m=typeof p=="object"?p.value:p,nd(m)?null:m})(t.limit));let u=null;t.startAt&&(u=(function(p){let m=!!p.before,y=p.values||[];return new pr(y,m)})(t.startAt));let l=null;return t.endAt&&(l=(function(p){let m=!p.before,y=p.values||[];return new pr(y,m)})(t.endAt)),$R(e,i,s,o,a,"F",u,l)}function GU(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function pN(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Aa(t.unaryFilter.field);return ye.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Aa(t.unaryFilter.field);return ye.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Aa(t.unaryFilter.field);return ye.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Aa(t.unaryFilter.field);return ye.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return K(61313);default:return K(60726)}})(n):n.fieldFilter!==void 0?(function(t){return ye.create(Aa(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return K(58110);default:return K(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Re.create(t.compositeFilter.filters.map(r=>pN(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K(1026)}})(t.compositeFilter.op))})(n):K(30097,{filter:n})}function WU(n){return jU[n]}function KU(n){return BU[n]}function QU(n){return UU[n]}function Sa(n){return{fieldPath:n.canonicalString()}}function Aa(n){return Xe.fromServerFormat(n.fieldPath)}function gN(n){return n instanceof ye?(function(t){if(t.op==="=="){if(sx(t.value))return{unaryFilter:{field:Sa(t.field),op:"IS_NAN"}};if(ox(t.value))return{unaryFilter:{field:Sa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(sx(t.value))return{unaryFilter:{field:Sa(t.field),op:"IS_NOT_NAN"}};if(ox(t.value))return{unaryFilter:{field:Sa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sa(t.field),op:KU(t.op),value:t.value}}})(n):n instanceof Re?(function(t){let r=t.getFilters().map(i=>gN(i));return r.length===1?r[0]:{compositeFilter:{op:QU(t.op),filters:r}}})(n):K(54877,{filter:n})}function YU(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function mN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Wa=class n{constructor(e,t,r,i,o=te.min(),s=te.min(),a=tt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Yp=class{constructor(e){this.gt=e}};function ZU(n,e){let t;if(e.document)t=lN(n.gt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=G.fromSegments(e.noDocument.path),i=Ko(e.noDocument.readTime);t=ut.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return K(56709);{let r=G.fromSegments(e.unknownDocument.path),i=Ko(e.unknownDocument.version);t=ut.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){let o=new je(i[0],i[1]);return te.fromTimestamp(o)})(e.readTime)),t}function Dx(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Zp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(o,s){return{name:zl(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Ga(o,s.version.toTimestamp()),createTime:Ga(o,s.createTime.toTimestamp())}})(n.gt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Wo(e.version)};else{if(!e.isUnknownDocument())return K(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Wo(e.version)}}return r}function Zp(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Wo(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ko(n){let e=new je(n.seconds,n.nanoseconds);return te.fromTimestamp(e)}function Fo(n,e){let t=(e.baseMutations||[]).map(o=>Mw(n.gt,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>Mw(n.gt,o)),i=je.fromMillis(e.localWriteTimeMs);return new Ul(e.batchId,i,t,r)}function wl(n){let e=Ko(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Ko(n.lastLimboFreeSnapshotVersion):te.min(),r;return r=(function(o){return o.documents!==void 0})(n.query)?(function(o){let s=o.documents.length;return J(s===1,1966,{count:s}),Gt(iu(uN(o.documents[0])))})(n.query):(function(o){return Gt(hN(o))})(n.query),new Wa(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,tt.fromBase64String(n.resumeToken))}function yN(n,e){let t=Wo(e.snapshotVersion),r=Wo(e.lastLimboFreeSnapshotVersion),i;i=qp(e.target)?dN(n.gt,e.target):fN(n.gt,e.target).Vt;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:zo(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function hD(n){let e=hN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Gp(e,e.limit,"L"):e}function LE(n,e){return new $l(e.largestBatchId,Mw(n.gt,e.overlayMutation))}function Cx(n,e){let t=e.path.lastSegment();return[n,Vt(e.path.popLast()),t]}function bx(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Wo(r.readTime),documentKey:Vt(r.documentKey.path),largestBatchId:r.largestBatchId}}var xw=class{getBundleMetadata(e,t){return Tx(e).get(t).next(r=>{if(r)return(function(o){return{id:o.bundleId,createTime:Ko(o.createTime),version:o.version}})(r)})}saveBundleMetadata(e,t){return Tx(e).put((function(i){return{bundleId:i.id,createTime:Wo(et(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return Sx(e).get(t).next(r=>{if(r)return(function(o){return{name:o.name,query:hD(o.bundledQuery),readTime:Ko(o.readTime)}})(r)})}saveNamedQuery(e,t){return Sx(e).put((function(i){return{name:i.name,readTime:Wo(et(i.readTime)),bundledQuery:i.bundledQuery}})(t))}};function Tx(n){return gt(n,Og)}function Sx(n){return gt(n,kg)}var Jp=class n{constructor(e,t){this.serializer=e,this.userId=t}static yt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return ml(e).get(Cx(this.userId,t)).next(r=>r?LE(this.serializer,r):null)}getOverlays(e,t){let r=ur();return A.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new $l(t,s);i.push(this.wt(e,a))}),A.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(Vt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(ml(e).Y(iw,a))}),A.waitFor(o)}getOverlaysForCollection(e,t,r){let i=ur(),o=Vt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return ml(e).j(iw,s).next(a=>{for(let u of a){let l=LE(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=ur(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ml(e).X({index:IR,range:a},(u,l,f)=>{let p=LE(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):f.done()}).next(()=>o)}wt(e,t){return ml(e).put((function(i,o,s){let[a,u,l]=Cx(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Gl(i.gt,s.mutation)}})(this.serializer,this.userId,t))}};function ml(n){return gt(n,Fg)}var Rw=class{St(e){return gt(e,iD)}getSessionToken(e){return this.St(e).get("sessionToken").next(t=>{let r=t?.value;return r?tt.fromUint8Array(r):tt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}};var Lr=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(ze(e.integerValue));else if("doubleValue"in e){let r=ze(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Nl(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=jr(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Br(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?OR(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):jg(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):K(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=Ua,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(ze(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),G.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Lr.Ut=new Lr;var wa=255;function JU(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function Ax(n){let e=64-(function(r){let i=0;for(let o=0;o<8;++o){let s=JU(255&r[o]);if(i+=s,s!==8)break}return i})(n);return Math.ceil(e/8)}var Nw=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Kt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Wt(r.value),r=t.next();this.Gt()}zt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.jt(r.value),r=t.next();this.Jt()}Ht(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Wt(r);else if(r<2048)this.Wt(960|r>>>6),this.Wt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Wt(480|r>>>12),this.Wt(128|63&r>>>6),this.Wt(128|63&r);else{let i=t.codePointAt(0);this.Wt(240|i>>>18),this.Wt(128|63&i>>>12),this.Wt(128|63&i>>>6),this.Wt(128|63&i)}}this.Gt()}Yt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.jt(r);else if(r<2048)this.jt(960|r>>>6),this.jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.jt(480|r>>>12),this.jt(128|63&r>>>6),this.jt(128|63&r);else{let i=t.codePointAt(0);this.jt(240|i>>>18),this.jt(128|63&i>>>12),this.jt(128|63&i>>>6),this.jt(128|63&i)}}this.Jt()}Zt(e){let t=this.Xt(e),r=Ax(t);this.en(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}tn(e){let t=this.Xt(e),r=Ax(t);this.en(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}nn(){this.rn(wa),this.rn(255)}sn(){this._n(wa),this._n(255)}reset(){this.position=0}seed(e){this.en(e.length),this.buffer.set(e,this.position),this.position+=e.length}an(){return this.buffer.slice(0,this.position)}Xt(e){let t=(function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Wt(e){let t=255&e;t===0?(this.rn(0),this.rn(255)):t===wa?(this.rn(wa),this.rn(0)):this.rn(t)}jt(e){let t=255&e;t===0?(this._n(0),this._n(255)):t===wa?(this._n(wa),this._n(0)):this._n(e)}Gt(){this.rn(0),this.rn(1)}Jt(){this._n(0),this._n(1)}rn(e){this.en(1),this.buffer[this.position++]=e}_n(e){this.en(1),this.buffer[this.position++]=~e}en(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Pw=class{constructor(e){this.un=e}Nt(e){this.un.Kt(e)}Mt(e){this.un.Ht(e)}Ft(e){this.un.Zt(e)}vt(){this.un.nn()}},Ow=class{constructor(e){this.un=e}Nt(e){this.un.zt(e)}Mt(e){this.un.Yt(e)}Ft(e){this.un.tn(e)}vt(){this.un.sn()}},Lo=class{constructor(){this.un=new Nw,this.cn=new Pw(this.un),this.ln=new Ow(this.un)}seed(e){this.un.seed(e)}hn(e){return e===0?this.cn:this.ln}an(){return this.un.an()}reset(){this.un.reset()}};var Vo=class n{constructor(e,t,r,i){this.Pn=e,this.Tn=t,this.In=r,this.dn=i}En(){let e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new n(this.Pn,this.Tn,this.In,r)}An(e,t,r){return{indexId:this.Pn,uid:e,arrayValue:xp(this.In),directionalValue:xp(this.dn),orderedDocumentKey:xp(t),documentKey:r.path.toArray()}}Rn(e,t,r){let i=this.An(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}};function Ci(n,e){let t=n.Pn-e.Pn;return t!==0?t:(t=Mx(n.In,e.In),t!==0?t:(t=Mx(n.dn,e.dn),t!==0?t:G.comparator(n.Tn,e.Tn)))}function Mx(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function xp(n){return $m()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function xx(n){return typeof n!="string"?n:(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}var Xp=class{constructor(e){this.Vn=new Oe((t,r)=>Xe.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.mn=e.orderBy,this.fn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.fn.push(r)}}get gn(){return this.Vn.size>1}pn(e){if(J(e.collectionGroup===this.collectionId,49279),this.gn)return!1;let t=ZE(e);if(t!==void 0&&!this.yn(t))return!1;let r=Po(e),i=new Set,o=0,s=0;for(;o<r.length&&this.yn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Vn.size>0){let a=this.Vn.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.wn(a,u)||!this.Sn(this.mn[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.mn.length||!this.Sn(this.mn[s++],a))return!1}return!0}bn(){if(this.gn)return null;let e=new Oe(Xe.comparator),t=[];for(let r of this.fn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Ra(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Ra(r.field,0))}for(let r of this.mn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Ra(r.field,r.dir==="asc"?0:1)));return new Fa(Fa.UNKNOWN_ID,this.collectionId,t,Rl.empty())}yn(e){for(let t of this.fn)if(this.wn(t,e))return!0;return!1}wn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}Sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function vN(n){var e,t;if(J(n instanceof ye||n instanceof Re,20012),n instanceof ye){if(n instanceof Hp){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>ye.create(n.field,"==",o)))||[];return Re.create(i,"or")}return n}let r=n.filters.map(i=>vN(i));return Re.create(r,n.op)}function XU(n){if(n.getFilters().length===0)return[];let e=Lw(vN(n));return J(_N(e),7391),kw(e)||Fw(e)?[e]:e.getFilters()}function kw(n){return n instanceof ye}function Fw(n){return n instanceof Re&&uD(n)}function _N(n){return kw(n)||Fw(n)||(function(t){if(t instanceof Re&&cw(t)){for(let r of t.getFilters())if(!kw(r)&&!Fw(r))return!1;return!0}return!1})(n)}function Lw(n){if(J(n instanceof ye||n instanceof Re,34018),n instanceof ye)return n;if(n.filters.length===1)return Lw(n.filters[0]);let e=n.filters.map(r=>Lw(r)),t=Re.create(e,n.op);return t=eg(t),_N(t)?t:(J(t instanceof Re,64498),J(Ha(t),40251),J(t.filters.length>1,57927),t.filters.reduce((r,i)=>pD(r,i)))}function pD(n,e){let t;return J(n instanceof ye||n instanceof Re,38388),J(e instanceof ye||e instanceof Re,25473),t=n instanceof ye?e instanceof ye?(function(i,o){return Re.create([i,o],"and")})(n,e):Rx(n,e):e instanceof ye?Rx(e,n):(function(i,o){if(J(i.filters.length>0&&o.filters.length>0,48005),Ha(i)&&Ha(o))return jR(i,o.getFilters());let s=cw(i)?i:o,a=cw(i)?o:i,u=s.filters.map(l=>pD(l,a));return Re.create(u,"or")})(n,e),eg(t)}function Rx(n,e){if(Ha(e))return jR(e,n.getFilters());{let t=e.filters.map(r=>pD(n,r));return Re.create(t,"or")}}function eg(n){if(J(n instanceof ye||n instanceof Re,11850),n instanceof ye)return n;let e=n.getFilters();if(e.length===1)return eg(e[0]);if(LR(n))return n;let t=e.map(i=>eg(i)),r=[];return t.forEach(i=>{i instanceof ye?r.push(i):i instanceof Re&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Re.create(r,n.op)}var Vw=class{constructor(){this.Dn=new Wl}addToCollectionParentIndex(e,t){return this.Dn.add(t),A.resolve()}getCollectionParents(e,t){return A.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return A.resolve()}deleteFieldIndex(e,t){return A.resolve()}deleteAllFieldIndexes(e){return A.resolve()}createTargetIndexes(e,t){return A.resolve()}getDocumentsMatchingTarget(e,t){return A.resolve(null)}getIndexType(e,t){return A.resolve(0)}getFieldIndexes(e,t){return A.resolve([])}getNextCollectionGroupToUpdate(e){return A.resolve(null)}getMinOffset(e,t){return A.resolve(Tn.min())}getMinOffsetFromCollectionGroup(e,t){return A.resolve(Tn.min())}updateCollectionGroup(e,t,r){return A.resolve()}updateIndexEntries(e,t){return A.resolve()}},Wl=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Oe(Ee.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Oe(Ee.comparator)).toArray()}};var Nx="IndexedDbIndexManager",Ep=new Uint8Array(0),jw=class{constructor(e,t){this.databaseId=t,this.vn=new Wl,this.Cn=new $n(r=>zo(r),(r,i)=>id(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});let o={collectionId:r,parent:Vt(i)};return Px(e).put(o)}return A.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[cR(t),""],!1,!0);return Px(e).j(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(ar(s.parent))}return r})}addFieldIndex(e,t){let r=yl(e),i=(function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}})(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=Da(e);return o.next(a=>{s.put(bx(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=yl(e),i=Da(e),o=Ia(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=yl(e),r=Ia(e),i=Da(e);return t.Y().next(()=>r.Y()).next(()=>i.Y())}createTargetIndexes(e,t){return A.forEach(this.Fn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new Xp(r).bn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Ia(e),i=!0,o=new Map;return A.forEach(this.Fn(t),s=>this.Mn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=he(),a=[];return A.forEach(o,(u,l)=>{F(Nx,`Using index ${(function(U){return`id=${U.indexId}|cg=${U.collectionGroup}|f=${U.fields.map(re=>`${re.fieldPath}:${re.kind}`).join(",")}`})(u)} to execute ${zo(t)}`);let f=(function(U,re){let se=ZE(re);if(se===void 0)return null;for(let ae of zp(U,se.fieldPath))switch(ae.op){case"array-contains-any":return ae.value.arrayValue.values||[];case"array-contains":return[ae.value]}return null})(l,u),p=(function(U,re){let se=new Map;for(let ae of Po(re))for(let w of zp(U,ae.fieldPath))switch(w.op){case"==":case"in":se.set(ae.fieldPath.canonicalString(),w.value);break;case"not-in":case"!=":return se.set(ae.fieldPath.canonicalString(),w.value),Array.from(se.values())}return null})(l,u),m=(function(U,re){let se=[],ae=!0;for(let w of Po(re)){let v=w.kind===0?dx(U,w.fieldPath,U.startAt):fx(U,w.fieldPath,U.startAt);se.push(v.value),ae&&(ae=v.inclusive)}return new pr(se,ae)})(l,u),y=(function(U,re){let se=[],ae=!0;for(let w of Po(re)){let v=w.kind===0?fx(U,w.fieldPath,U.endAt):dx(U,w.fieldPath,U.endAt);se.push(v.value),ae&&(ae=v.inclusive)}return new pr(se,ae)})(l,u),b=this.xn(u,l,m),M=this.xn(u,l,y),x=this.On(u,l,p),j=this.Nn(u.indexId,f,b,m.inclusive,M,y.inclusive,x);return A.forEach(j,Y=>r.H(Y,t.limit).next(U=>{U.forEach(re=>{let se=G.fromSegments(re.documentKey);s.has(se)||(s=s.add(se),a.push(se))})}))}).next(()=>a)}return A.resolve(null)})}Fn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=XU(Re.create(e.filters,"and")).map(r=>vw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Cn.set(e,t),t)}Nn(e,t,r,i,o,s,a){let u=(t!=null?t.length:1)*Math.max(r.length,o.length),l=u/(t!=null?t.length:1),f=[];for(let p=0;p<u;++p){let m=t?this.Bn(t[p/l]):Ep,y=this.Ln(e,m,r[p%l],i),b=this.kn(e,m,o[p%l],s),M=a.map(x=>this.Ln(e,m,x,!0));f.push(...this.createRange(y,b,M))}return f}Ln(e,t,r,i){let o=new Vo(e,G.empty(),t,r);return i?o:o.En()}kn(e,t,r,i){let o=new Vo(e,G.empty(),t,r);return i?o.En():o}Mn(e,t){let r=new Xp(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.pn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.Fn(t);return A.forEach(i,o=>this.Mn(e,o).next(s=>{s?r!==0&&s.fields.length<(function(u){let l=new Oe(Xe.comparator),f=!1;for(let p of u.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?f=!0:l=l.add(m.field));for(let p of u.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(f?1:0)})(o)&&(r=1):r=0})).next(()=>(function(s){return s.limit!==null})(t)&&i.length>1&&r===2?1:r)}qn(e,t){let r=new Lo;for(let i of Po(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.hn(i.kind);Lr.Ut.bt(o,s)}return r.an()}Bn(e){let t=new Lo;return Lr.Ut.bt(e,t.hn(0)),t.an()}Qn(e,t){let r=new Lo;return Lr.Ut.bt(Ho(this.databaseId,t),r.hn((function(o){let s=Po(o);return s.length===0?0:s[s.length-1].kind})(e))),r.an()}On(e,t,r){if(r===null)return[];let i=[];i.push(new Lo);let o=0;for(let s of Po(e)){let a=r[o++];for(let u of i)if(this.$n(t,s.fieldPath)&&jl(a))i=this.Un(i,s,a);else{let l=u.hn(s.kind);Lr.Ut.bt(a,l)}}return this.Kn(i)}xn(e,t,r){return this.On(e,t,r.position)}Kn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].an();return t}Un(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new Lo;u.seed(a.an()),Lr.Ut.bt(s,u.hn(t.kind)),o.push(u)}return o}$n(e,t){return!!e.filters.find(r=>r instanceof ye&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=yl(e),i=Da(e);return(t?r.j(rw,IDBKeyRange.bound(t,t)):r.j()).next(o=>{let s=[];return A.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push((function(f,p){let m=p?new Rl(p.sequenceNumber,new Tn(Ko(p.readTime),new G(ar(p.documentKey)),p.largestBatchId)):Rl.empty(),y=f.fields.map(([b,M])=>new Ra(Xe.fromServerFormat(b),M));return new Fa(f.indexId,f.collectionGroup,y,m)})(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:ie(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=yl(e),o=Da(e);return this.Wn(e).next(s=>i.j(rw,IDBKeyRange.bound(t,t)).next(a=>A.forEach(a,u=>o.put(bx(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return A.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?A.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),A.forEach(a,u=>this.Gn(e,i,u).next(l=>{let f=this.zn(o,u);return l.isEqual(f)?A.resolve():this.jn(e,o,u,l,f)}))))})}Jn(e,t,r,i){return Ia(e).put(i.An(this.uid,this.Qn(r,t.key),t.key))}Hn(e,t,r,i){return Ia(e).delete(i.Rn(this.uid,this.Qn(r,t.key),t.key))}Gn(e,t,r){let i=Ia(e),o=new Oe(Ci);return i.X({index:wR,range:IDBKeyRange.only([r.indexId,this.uid,xp(this.Qn(r,t))])},(s,a)=>{o=o.add(new Vo(r.indexId,t,xx(a.arrayValue),xx(a.directionalValue)))}).next(()=>o)}zn(e,t){let r=new Oe(Ci),i=this.qn(t,e);if(i==null)return r;let o=ZE(t);if(o!=null){let s=e.data.field(o.fieldPath);if(jl(s))for(let a of s.arrayValue.values||[])r=r.add(new Vo(t.indexId,e.key,this.Bn(a),i))}else r=r.add(new Vo(t.indexId,e.key,Ep,i));return r}jn(e,t,r,i,o){F(Nx,"Updating index entries for document '%s'",t.key);let s=[];return(function(u,l,f,p,m){let y=u.getIterator(),b=l.getIterator(),M=Ea(y),x=Ea(b);for(;M||x;){let j=!1,Y=!1;if(M&&x){let U=f(M,x);U<0?Y=!0:U>0&&(j=!0)}else M!=null?Y=!0:j=!0;j?(p(x),x=Ea(b)):Y?(m(M),M=Ea(y)):(M=Ea(y),x=Ea(b))}})(i,o,Ci,a=>{s.push(this.Jn(e,t,r,a))},a=>{s.push(this.Hn(e,t,r,a))}),A.waitFor(s)}Wn(e){let t=1;return Da(e).X({index:ER,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Ci(s,a)).filter((s,a,u)=>!a||Ci(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Ci(s,e),u=Ci(s,t);if(a===0)i[0]=e.En();else if(a>0&&u<0)i.push(s),i.push(s.En());else if(u>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Yn(i[s],i[s+1]))return[];let a=i[s].Rn(this.uid,Ep,G.empty()),u=i[s+1].Rn(this.uid,Ep,G.empty());o.push(IDBKeyRange.bound(a,u))}return o}Yn(e,t){return Ci(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Ox)}getMinOffset(e,t){return A.mapArray(this.Fn(t),r=>this.Mn(e,r).next(i=>i||K(44426))).next(Ox)}};function Px(n){return gt(n,kl)}function Ia(n){return gt(n,Cl)}function yl(n){return gt(n,rD)}function Da(n){return gt(n,Dl)}function Ox(n){J(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;eD(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Tn(e.readTime,e.documentKey,t)}var kx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},EN=41943040,en=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};function wN(n,e,t){let r=n.store(Bn),i=n.store(La),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.X({range:s},(f,p,m)=>(a++,m.delete()));o.push(u.next(()=>{J(a===1,47070,{batchId:t.batchId})}));let l=[];for(let f of t.mutations){let p=yR(e,f.key.path,t.batchId);o.push(i.delete(p)),l.push(f.key)}return A.waitFor(o).next(()=>l)}function tg(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw K(14731);e=n.noDocument}return JSON.stringify(e).length}en.DEFAULT_COLLECTION_PERCENTILE=10,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,en.DEFAULT=new en(EN,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),en.DISABLED=new en(-1,0,0);var ng=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Zn={}}static yt(e,t,r,i){J(e.uid!=="",64387);let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return bi(e).X({index:jo,range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=Ma(e),s=bi(e);return s.add({}).next(a=>{J(typeof a=="number",49019);let u=new Ul(a,t,r,i),l=(function(y,b,M){let x=M.baseMutations.map(Y=>Gl(y.gt,Y)),j=M.mutations.map(Y=>Gl(y.gt,Y));return{userId:b,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:x,mutations:j}})(this.serializer,this.userId,u),f=[],p=new Oe((m,y)=>ie(m.canonicalString(),y.canonicalString()));for(let m of i){let y=yR(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),f.push(s.put(l)),f.push(o.put(y,XB))}return p.forEach(m=>{f.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Zn[a]=u.keys()}),A.waitFor(f).next(()=>u)})}lookupMutationBatch(e,t){return bi(e).get(t).next(r=>r?(J(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Fo(this.serializer,r)):null)}Xn(e,t){return this.Zn[t]?A.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Zn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return bi(e).X({index:jo,range:i},(s,a,u)=>{a.userId===this.userId&&(J(a.batchId>=r,47524,{er:r}),o=Fo(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=xi;return bi(e).X({index:jo,range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,xi],[this.userId,Number.POSITIVE_INFINITY]);return bi(e).j(jo,t).next(r=>r.map(i=>Fo(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Cp(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Ma(e).X({range:i},(s,a,u)=>{let[l,f,p]=s,m=ar(f);if(l===this.userId&&t.path.isEqual(m))return bi(e).get(p).next(y=>{if(!y)throw K(61480,{tr:s,batchId:p});J(y.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:y.userId,batchId:p}),o.push(Fo(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Oe(ie),i=[];return t.forEach(o=>{let s=Cp(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=Ma(e).X({range:a},(l,f,p)=>{let[m,y,b]=l,M=ar(y);m===this.userId&&o.path.isEqual(M)?r=r.add(b):p.done()});i.push(u)}),A.waitFor(i).next(()=>this.nr(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=Cp(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Oe(ie);return Ma(e).X({range:s},(u,l,f)=>{let[p,m,y]=u,b=ar(m);p===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(y)):f.done()}).next(()=>this.nr(e,a))}nr(e,t){let r=[],i=[];return t.forEach(o=>{i.push(bi(e).get(o).next(s=>{if(s===null)throw K(35274,{batchId:o});J(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:o}),r.push(Fo(this.serializer,s))}))}),A.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return wN(e.ce,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.rr(t.batchId)}),A.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}rr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return A.resolve();let r=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),i=[];return Ma(e).X({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=ar(o[1]);i.push(u)}else a.done()}).next(()=>{J(i.length===0,56720,{ir:i.map(o=>o.canonicalString())})})})}containsKey(e,t){return IN(e,this.userId,t)}sr(e){return DN(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:xi,lastStreamToken:""})}};function IN(n,e,t){let r=Cp(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Ma(n).X({range:o,Z:!0},(a,u,l)=>{let[f,p,m]=a;f===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function bi(n){return gt(n,Bn)}function Ma(n){return gt(n,La)}function DN(n){return gt(n,Pl)}var Ka=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var Bw=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.cr(e).next(t=>{let r=new Ka(t.highestTargetId);return t.highestTargetId=r.next(),this.lr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.cr(e).next(t=>te.fromTimestamp(new je(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.cr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.cr(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.lr(e,i)))}addTargetData(e,t){return this.hr(e,t).next(()=>this.cr(e).next(r=>(r.targetCount+=1,this.Pr(t,r),this.lr(e,r))))}updateTargetData(e,t){return this.hr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ca(e).delete(t.targetId)).next(()=>this.cr(e)).next(r=>(J(r.targetCount>0,8065),r.targetCount-=1,this.lr(e,r)))}removeTargets(e,t,r){let i=0,o=[];return Ca(e).X((s,a)=>{let u=wl(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>A.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Ca(e).X((r,i)=>{let o=wl(i);t(o)})}cr(e){return Fx(e).get(jp).next(t=>(J(t!==null,2888),t))}lr(e,t){return Fx(e).put(jp,t)}hr(e,t){return Ca(e).put(yN(this.serializer,t))}Pr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.cr(e).next(t=>t.targetCount)}getTargetData(e,t){let r=zo(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Ca(e).X({range:i,index:_R},(s,a,u)=>{let l=wl(a);id(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=Si(e);return t.forEach(s=>{let a=Vt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),A.waitFor(i)}removeMatchingKeys(e,t,r){let i=Si(e);return A.forEach(t,o=>{let s=Vt(o.path);return A.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=Si(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Si(e),o=he();return i.X({range:r,Z:!0},(s,a,u)=>{let l=ar(s[1]),f=new G(l);o=o.add(f)}).next(()=>o)}containsKey(e,t){let r=Vt(t.path),i=IDBKeyRange.bound([r],[cR(r)],!1,!0),o=0;return Si(e).X({index:nD,Z:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}Et(e,t){return Ca(e).get(t).next(r=>r?wl(r):null)}};function Ca(n){return gt(n,Va)}function Fx(n){return gt(n,$o)}function Si(n){return gt(n,ja)}var Lx="LruGarbageCollector",e$=1048576;function Vx([n,e],[t,r]){let i=ie(n,t);return i===0?ie(e,r):i}var Uw=class{constructor(e){this.Tr=e,this.buffer=new Oe(Vx),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();Vx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},rg=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){F(Lx,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>P(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){zi(t)?F(Lx,"Ignoring IndexedDB error during garbage collection: ",t):yield qi(t)}yield this.Rr(3e5)}))}},$w=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return A.resolve(gn.ue);let r=new Uw(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),A.resolve(kx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kx):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,u,l,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),ba()<=zn.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-f}ms`),A.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function CN(n,e){return new $w(n,e)}var Hw=class{constructor(e,t){this.db=e,this.garbageCollector=CN(this,t)}mr(e){let t=this.yr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}gr(e,t){return this.wr(e,(r,i)=>t(i))}addReference(e,t,r){return wp(e,r)}removeReference(e,t,r){return wp(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return wp(e,t)}Sr(e,t){return(function(i,o){let s=!1;return DN(i).ee(a=>IN(i,a,o).next(u=>(u&&(s=!0),A.resolve(!u)))).next(()=>s)})(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.wr(e,(s,a)=>{if(a<=t){let u=this.Sr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,te.min()),Si(e).delete((function(p){return[0,Vt(p.path)]})(s))))});i.push(u)}}).next(()=>A.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return wp(e,t)}wr(e,t){let r=Si(e),i,o=gn.ue;return r.X({index:nD},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==gn.ue&&t(new G(ar(i)),o),o=l,i=u):o=gn.ue}).next(()=>{o!==gn.ue&&t(new G(ar(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function wp(n,e){return Si(n).put((function(r,i){return{targetId:0,path:Vt(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}var ig=class{constructor(){this.changes=new $n(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ut.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?A.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var qw=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return No(e).put(r)}removeEntry(e,t,r){return No(e).delete((function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Zp(s),a[a.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.br(e,r)))}getEntry(e,t){let r=ut.newInvalidDocument(t);return No(e).X({index:bp,range:IDBKeyRange.only(vl(t))},(i,o)=>{r=this.Dr(t,o)}).next(()=>r)}vr(e,t){let r={size:0,document:ut.newInvalidDocument(t)};return No(e).X({index:bp,range:IDBKeyRange.only(vl(t))},(i,o)=>{r={document:this.Dr(t,o),size:tg(o)}}).next(()=>r)}getEntries(e,t){let r=tn();return this.Cr(e,t,(i,o)=>{let s=this.Dr(i,o);r=r.insert(i,s)}).next(()=>r)}Fr(e,t){let r=tn(),i=new He(G.comparator);return this.Cr(e,t,(o,s)=>{let a=this.Dr(o,s);r=r.insert(o,a),i=i.insert(o,tg(s))}).next(()=>({documents:r,Mr:i}))}Cr(e,t,r){if(t.isEmpty())return A.resolve();let i=new Oe(Ux);t.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(vl(i.first()),vl(i.last())),s=i.getIterator(),a=s.getNext();return No(e).X({index:bp,range:o},(u,l,f)=>{let p=G.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&Ux(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?f.G(vl(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Zp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return No(e).j(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let f=tn();for(let p of l){let m=this.Dr(G.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(sd(t,m)||i.has(m.key))&&(f=f.insert(m.key,m))}return f})}getAllFromCollectionGroup(e,t,r,i){let o=tn(),s=Bx(t,r),a=Bx(t,Tn.max());return No(e).X({index:vR,range:IDBKeyRange.bound(s,a,!0)},(u,l,f)=>{let p=this.Dr(G.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&f.done()}).next(()=>o)}newChangeBuffer(e){return new zw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return jx(e).get(nw).next(t=>(J(!!t,20021),t))}br(e,t){return jx(e).put(nw,t)}Dr(e,t){if(t){let r=ZU(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(te.min())))return r}return ut.newInvalidDocument(e)}};function bN(n){return new qw(n)}var zw=class extends ig{constructor(e,t){super(),this.Or=e,this.trackRemovals=t,this.Nr=new $n(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Oe((o,s)=>ie(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.Nr.get(o);if(t.push(this.Or.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=Dx(this.Or.serializer,s);i=i.add(o.path.popLast());let l=tg(u);r+=l-a.size,t.push(this.Or.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=Dx(this.Or.serializer,s.convertToNoDocument(te.min()));t.push(this.Or.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.Or.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Or.updateMetadata(e,r)),A.waitFor(t)}getFromCache(e,t){return this.Or.vr(e,t).next(r=>(this.Nr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Or.Fr(e,t).next(({documents:r,Mr:i})=>(i.forEach((o,s)=>{this.Nr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function jx(n){return gt(n,Ol)}function No(n){return gt(n,Vp)}function vl(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Bx(n,e){let t=e.documentKey.path.toArray();return[n,Zp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Ux(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=ie(t[o],r[o]),i)return i;return i=ie(t.length,r.length),i||(i=ie(t[t.length-2],r[r.length-2]),i||ie(t[t.length-1],r[r.length-1]))}var Gw=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var og=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Sl(r.mutation,i,mn.empty(),je.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,t,r=he()){let i=ur();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=El();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=ur();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,he()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=tn(),s=Tl(),a=(function(){return Tl()})();return t.forEach((u,l)=>{let f=r.get(l.key);i.has(l.key)&&(f===void 0||f.mutation instanceof Hn)?o=o.insert(l.key,l):f!==void 0?(s.set(l.key,f.mutation.getFieldMask()),Sl(f.mutation,l,f.mutation.getFieldMask(),je.now())):s.set(l.key,mn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,f)=>s.set(l,f)),t.forEach((l,f)=>{var p;return a.set(l,new Gw(f,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Tl(),i=new He((s,a)=>s-a),o=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let f=r.get(u)||mn.empty();f=a.applyToLocalView(l,f),r.set(u,f);let p=(i.get(a.batchId)||he()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,f=u.value,p=KR();f.forEach(m=>{if(!o.has(m)){let y=tN(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return A.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return G.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):cD(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):A.resolve(ur()),a=ka,u=o;return s.next(l=>A.forEach(l,(f,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(f)?A.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{u=u.insert(f,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,he())).next(f=>({batchId:a,changes:WR(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new G(t)).next(r=>{let i=El();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=El();return this.indexManager.getCollectionParents(e,o).next(a=>A.forEach(a,u=>{let l=(function(p,m){return new Un(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let f=l.getKey();s.get(f)===null&&(s=s.insert(f,ut.newInvalidDocument(f)))});let a=El();return s.forEach((u,l)=>{let f=o.get(u);f!==void 0&&Sl(f.mutation,l,mn.empty(),je.now()),sd(t,l)&&(a=a.insert(u,l))}),a})}};var Ww=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return A.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:et(i.createTime)}})(t)),A.resolve()}getNamedQuery(e,t){return A.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:hD(i.bundledQuery),readTime:et(i.readTime)}})(t)),A.resolve()}};var Kw=class{constructor(){this.overlays=new He(G.comparator),this.kr=new Map}getOverlay(e,t){return A.resolve(this.overlays.get(t))}getOverlays(e,t){let r=ur();return A.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),A.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),A.resolve()}getOverlaysForCollection(e,t,r){let i=ur(),o=t.length+1,s=new G(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return A.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new He((l,f)=>l-f),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let f=o.get(l.largestBatchId);f===null&&(f=ur(),o=o.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}let a=ur(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,f)=>a.set(l,f)),!(a.size()>=i)););return A.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new $l(t,r));let o=this.kr.get(t);o===void 0&&(o=he(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var Qw=class{constructor(){this.sessionToken=tt.EMPTY_BYTE_STRING}getSessionToken(e){return A.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,A.resolve()}};var Kl=class{constructor(){this.qr=new Oe(ot.Qr),this.$r=new Oe(ot.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new ot(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new ot(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new G(new Ee([])),r=new ot(t,e),i=new ot(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new G(new Ee([])),r=new ot(t,e),i=new ot(t,e+1),o=he();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new ot(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},ot=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return G.comparator(e.key,t.key)||ie(e.Hr,t.Hr)}static Ur(e,t){return ie(e.Hr,t.Hr)||G.comparator(e.key,t.key)}};var Yw=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Oe(ot.Qr)}checkEmpty(e){return A.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Ul(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new ot(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return A.resolve(s)}lookupMutationBatch(e,t){return A.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return A.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return A.resolve(this.mutationQueue.length===0?xi:this.er-1)}getAllMutationBatches(e){return A.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new ot(t,0),i=new ot(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),A.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Oe(ie);return t.forEach(i=>{let o=new ot(i,0),s=new ot(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),A.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;G.isDocumentKey(o)||(o=o.child(""));let s=new ot(new G(o),0),a=new Oe(ie);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),A.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){J(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return A.forEach(t.mutations,i=>{let o=new ot(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new ot(t,0),i=this.Yr.firstAfterOrEqual(r);return A.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,A.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Zw=class{constructor(e){this.ni=e,this.docs=(function(){return new He(G.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return A.resolve(r?r.document.mutableCopy():ut.newInvalidDocument(t))}getEntries(e,t){let r=tn();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ut.newInvalidDocument(i))}),A.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=tn(),s=t.path,a=new G(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:f}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||eD(hR(f),r)<=0||(i.has(f.key)||sd(t,f))&&(o=o.insert(f.key,f.mutableCopy()))}return A.resolve(o)}getAllFromCollectionGroup(e,t,r,i){K(9500)}ri(e,t){return A.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Jw(this)}getSize(e){return A.resolve(this.size)}},Jw=class extends ig{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),A.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var Xw=class{constructor(e){this.persistence=e,this.ii=new $n(t=>zo(t),id),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.si=0,this.oi=new Kl,this.targetCount=0,this._i=Ka.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),A.resolve()}getLastRemoteSnapshotVersion(e){return A.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return A.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),A.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),A.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Ka(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,A.resolve()}updateTargetData(e,t){return this.hr(t),A.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,A.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),A.waitFor(o).next(()=>i)}getTargetCount(e){return A.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return A.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),A.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),A.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),A.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return A.resolve(r)}containsKey(e,t){return A.resolve(this.oi.containsKey(t))}};var Ql=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new gn(0),this.ci=!1,this.ci=!0,this.li=new Qw,this.referenceDelegate=e(this),this.hi=new Xw(this),this.indexManager=new Vw,this.remoteDocumentCache=(function(i){return new Zw(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new Yp(t),this.Ti=new Ww(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Kw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new Yw(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){F("MemoryPersistence","Starting transaction:",e);let i=new eI(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return A.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},eI=class extends kp{constructor(e){super(),this.currentSequenceNumber=e}},sg=class n{constructor(e){this.persistence=e,this.Ai=new Kl,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw K(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),A.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),A.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),A.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return A.forEach(this.mi,r=>{let i=G.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,te.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return A.or([()=>A.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},ag=class n{constructor(e,t){this.persistence=e,this.gi=new $n(r=>Vt(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=CN(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return A.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return A.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?A.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,te.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),A.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),A.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),A.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),A.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Sp(e.data.value)),t}Sr(e,t,r){return A.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return A.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var tI=class{constructor(e){this.serializer=e}q(e,t,r,i){let o=new Fp("createOrUpgrade",t);r<1&&i>=1&&((function(u){u.createObjectStore(rd)})(e),(function(u){u.createObjectStore(Pl,{keyPath:JB}),u.createObjectStore(Bn,{keyPath:ex,autoIncrement:!0}).createIndex(jo,tx,{unique:!0}),u.createObjectStore(La)})(e),$x(e),(function(u){u.createObjectStore(Oo)})(e));let s=A.resolve();return r<3&&i>=3&&(r!==0&&((function(u){u.deleteObjectStore(ja),u.deleteObjectStore(Va),u.deleteObjectStore($o)})(e),$x(e)),s=s.next(()=>(function(u){let l=u.store($o),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:te.min().toTimestamp(),targetCount:0};return l.put(jp,f)})(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>(function(u,l){return l.store(Bn).j().next(p=>{u.deleteObjectStore(Bn),u.createObjectStore(Bn,{keyPath:ex,autoIncrement:!0}).createIndex(jo,tx,{unique:!0});let m=l.store(Bn),y=p.map(b=>m.put(b));return A.waitFor(y)})})(e,o))),s=s.next(()=>{(function(u){u.createObjectStore(Ba,{keyPath:aU})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.pi(o))),r<6&&i>=6&&(s=s.next(()=>((function(u){u.createObjectStore(Ol)})(e),this.yi(o)))),r<7&&i>=7&&(s=s.next(()=>this.wi(o))),r<8&&i>=8&&(s=s.next(()=>this.Si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.bi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore(Og,{keyPath:uU})})(e),(function(u){u.createObjectStore(kg,{keyPath:cU})})(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore(Fg,{keyPath:mU});l.createIndex(iw,yU,{unique:!1}),l.createIndex(IR,vU,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>(function(u){let l=u.createObjectStore(Vp,{keyPath:eU});l.createIndex(bp,tU),l.createIndex(vR,nU)})(e)).next(()=>this.Di(e,o)).next(()=>e.deleteObjectStore(Oo))),r<14&&i>=14&&(s=s.next(()=>this.Ci(e,o))),r<15&&i>=15&&(s=s.next(()=>(function(u){u.createObjectStore(rD,{keyPath:lU,autoIncrement:!0}).createIndex(rw,dU,{unique:!1}),u.createObjectStore(Dl,{keyPath:fU}).createIndex(ER,hU,{unique:!1}),u.createObjectStore(Cl,{keyPath:pU}).createIndex(wR,gU,{unique:!1})})(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore(Dl).clear()}).next(()=>{t.objectStore(Cl).clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore(iD,{keyPath:_U})})(e)})),r<18&&i>=18&&$m()&&(s=s.next(()=>{t.objectStore(Dl).clear()}).next(()=>{t.objectStore(Cl).clear()})),s}yi(e){let t=0;return e.store(Oo).X((r,i)=>{t+=tg(i)}).next(()=>{let r={byteSize:t};return e.store(Ol).put(nw,r)})}pi(e){let t=e.store(Pl),r=e.store(Bn);return t.j().next(i=>A.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,xi],[o.userId,o.lastAcknowledgedBatchId]);return r.j(jo,s).next(a=>A.forEach(a,u=>{J(u.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:u.batchId});let l=Fo(this.serializer,u);return wN(e,o.userId,l).next(()=>{})}))}))}wi(e){let t=e.store(ja),r=e.store(Oo);return e.store($o).get(jp).next(i=>{let o=[];return r.X((s,a)=>{let u=new Ee(s),l=(function(p){return[0,Vt(p)]})(u);o.push(t.get(l).next(f=>f?A.resolve():(p=>t.put({targetId:0,path:Vt(p),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>A.waitFor(o))})}Si(e,t){e.createObjectStore(kl,{keyPath:sU});let r=t.store(kl),i=new Wl,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:Vt(u)})}};return t.store(Oo).X({Z:!0},(s,a)=>{let u=new Ee(s);return o(u.popLast())}).next(()=>t.store(La).X({Z:!0},([s,a,u],l)=>{let f=ar(a);return o(f.popLast())}))}bi(e){let t=e.store(Va);return t.X((r,i)=>{let o=wl(i),s=yN(this.serializer,o);return t.put(s)})}Di(e,t){let r=t.store(Oo),i=[];return r.X((o,s)=>{let a=t.store(Vp),u=(function(p){return p.document?new G(Ee.fromString(p.document.name).popFirst(5)):p.noDocument?G.fromSegments(p.noDocument.path):p.unknownDocument?G.fromSegments(p.unknownDocument.path):K(36783)})(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>A.waitFor(i))}Ci(e,t){let r=t.store(Bn),i=bN(this.serializer),o=new Ql(sg.Vi,this.serializer.gt);return r.j().next(s=>{let a=new Map;return s.forEach(u=>{var l;let f=(l=a.get(u.userId))!==null&&l!==void 0?l:he();Fo(this.serializer,u).keys().forEach(p=>f=f.add(p)),a.set(u.userId,f)}),A.forEach(a,(u,l)=>{let f=new st(l),p=Jp.yt(this.serializer,f),m=o.getIndexManager(f),y=ng.yt(f,this.serializer,m,o.referenceDelegate);return new og(i,y,p,m).recalculateAndSaveOverlaysForDocumentKeys(new Fl(t,gn.ue),u).next()})})}};function $x(n){n.createObjectStore(ja,{keyPath:iU}).createIndex(nD,oU,{unique:!0}),n.createObjectStore(Va,{keyPath:"targetId"}).createIndex(_R,rU,{unique:!0}),n.createObjectStore($o)}var Ti="IndexedDbPersistence",VE=18e5,jE=5e3,BE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",TN="main",nI=class n{constructor(e,t,r,i,o,s,a,u,l,f,p=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Fi=o,this.window=s,this.document=a,this.Mi=l,this.xi=f,this.Oi=p,this.ui=null,this.ci=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ni=null,this.inForeground=!1,this.Bi=null,this.Li=null,this.ki=Number.NEGATIVE_INFINITY,this.qi=m=>Promise.resolve(),!n.C())throw new O(R.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Hw(this,i),this.Qi=t+TN,this.serializer=new Yp(u),this.$i=new Oi(this.Qi,this.Oi,new tI(this.serializer)),this.li=new Rw,this.hi=new Bw(this.referenceDelegate,this.serializer),this.remoteDocumentCache=bN(this.serializer),this.Ti=new xw,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,f===!1&&Je(Ti,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ki().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new O(R.FAILED_PRECONDITION,BE);return this.Wi(),this.Gi(),this.zi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.hi.getHighestSequenceNumber(e))}).then(e=>{this.ui=new gn(e,this.Mi)}).then(()=>{this.ci=!0}).catch(e=>(this.$i&&this.$i.close(),Promise.reject(e)))}ji(e){return this.qi=t=>P(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.$i.setDatabaseDeletedListener(e)}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Fi.enqueueAndForget(()=>P(this,null,function*(){this.started&&(yield this.Ki())})))}Ki(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ip(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ji(e).next(t=>{t||(this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)))})}).next(()=>this.Hi(e)).next(t=>this.isPrimary&&!t?this.Yi(e).next(()=>!1):!!t&&this.Zi(e).next(()=>!0))).catch(e=>{if(zi(e))return F(Ti,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return F(Ti,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Fi.enqueueRetryable(()=>this.qi(e)),this.isPrimary=e})}Ji(e){return _l(e).get(_a).next(t=>A.resolve(this.Xi(t)))}es(e){return Ip(e).delete(this.clientId)}ts(){return P(this,null,function*(){if(this.isPrimary&&!this.ns(this.ki,VE)){this.ki=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=gt(t,Ba);return r.j().next(i=>{let o=this.rs(i,VE),s=i.filter(a=>o.indexOf(a)===-1);return A.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Ui)for(let t of e)this.Ui.removeItem(this.ss(t.clientId))}})}zi(){this.Li=this.Fi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ki().then(()=>this.ts()).then(()=>this.zi()))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.xi?A.resolve(!0):_l(e).get(_a).next(t=>{if(t!==null&&this.ns(t.leaseTimestampMs,jE)&&!this._s(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new O(R.FAILED_PRECONDITION,BE);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ip(e).j().next(r=>this.rs(r,jE).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&F(Ti,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return P(this,null,function*(){this.ci=!1,this.us(),this.Li&&(this.Li.cancel(),this.Li=null),this.cs(),this.ls(),yield this.$i.runTransaction("shutdown","readwrite",[rd,Ba],e=>{let t=new Fl(e,gn.ue);return this.Yi(t).next(()=>this.es(t))}),this.$i.close(),this.hs()})}rs(e,t){return e.filter(r=>this.ns(r.updateTimeMs,t)&&!this._s(r.clientId))}Ps(){return this.runTransaction("getActiveClients","readonly",e=>Ip(e).j().next(t=>this.rs(t,VE).map(r=>r.clientId)))}get started(){return this.ci}getGlobalsCache(){return this.li}getMutationQueue(e,t){return ng.yt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new jw(e,this.serializer.gt.databaseId)}getDocumentOverlayCache(e){return Jp.yt(this.serializer,e)}getBundleCache(){return this.Ti}runTransaction(e,t,r){F(Ti,"Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=(function(u){return u===18?IU:u===17?TR:u===16?wU:u===15?oD:u===14?bR:u===13?CR:u===12?EU:u===11?DR:void K(60245)})(this.Oi),s;return this.$i.runTransaction(e,i,o,a=>(s=new Fl(a,this.ui?this.ui.next():gn.ue),t==="readwrite-primary"?this.Ji(s).next(u=>!!u||this.Hi(s)).next(u=>{if(!u)throw Je(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)),new O(R.FAILED_PRECONDITION,pR);return r(s)}).next(u=>this.Zi(s).next(()=>u)):this.Ts(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ts(e){return _l(e).get(_a).next(t=>{if(t!==null&&this.ns(t.leaseTimestampMs,jE)&&!this._s(t.ownerId)&&!this.Xi(t)&&!(this.xi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new O(R.FAILED_PRECONDITION,BE)})}Zi(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return _l(e).put(_a,t)}static C(){return Oi.C()}Yi(e){let t=_l(e);return t.get(_a).next(r=>this.Xi(r)?(F(Ti,"Releasing primary lease."),t.delete(_a)):A.resolve())}ns(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(Je(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Bi=()=>{this.Fi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ki()))},this.document.addEventListener("visibilitychange",this.Bi),this.inForeground=this.document.visibilityState==="visible")}cs(){this.Bi&&(this.document.removeEventListener("visibilitychange",this.Bi),this.Bi=null)}Gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ni=()=>{this.us();let t=/(?:Version|Mobile)\/1[456]/;Um()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Fi.enterRestrictedMode(!0),this.Fi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ni))}ls(){this.Ni&&(this.window.removeEventListener("pagehide",this.Ni),this.Ni=null)}_s(e){var t;try{let r=((t=this.Ui)===null||t===void 0?void 0:t.getItem(this.ss(e)))!==null;return F(Ti,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Je(Ti,"Failed to get zombied client id.",r),!1}}us(){if(this.Ui)try{this.Ui.setItem(this.ss(this.clientId),String(Date.now()))}catch(e){Je("Failed to set zombie client id.",e)}}hs(){if(this.Ui)try{this.Ui.removeItem(this.ss(this.clientId))}catch{}}ss(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function _l(n){return gt(n,rd)}function Ip(n){return gt(n,Ba)}function gD(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var rI=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=he(),i=he();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var iI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var ug=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return Um()?8:gR(Nu())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new iI;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(ba()<=zn.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",Ta(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),A.resolve()):(ba()<=zn.DEBUG&&F("QueryEngine","Query:",Ta(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(ba()<=zn.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",Ta(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gt(t))):A.resolve())}ps(e,t){if(hx(t))return A.resolve(null);let r=Gt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Gp(t,null,"F"),r=Gt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=he(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(t,a);return this.Ds(t,l,s,u.readTime)?this.ps(e,Gp(t,null,"F")):this.vs(e,l,t,u)}))})))}ys(e,t,r,i){return hx(t)||i.isEqual(te.min())?A.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?A.resolve(null):(ba()<=zn.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ta(t)),this.vs(e,s,t,fR(i,ka)).next(a=>a))})}bs(e,t){let r=new Oe(zR(e));return t.forEach((i,o)=>{sd(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return ba()<=zn.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",Ta(t)),this.gs.getDocumentsMatchingQuery(e,t,Tn.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var mD="LocalStore",t$=3e8,oI=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new He(ie),this.Ms=new $n(o=>zo(o),id),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new og(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function SN(n,e,t,r){return new oI(n,e,t,r)}function AN(n,e){return P(this,null,function*(){let t=W(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=he();for(let l of i){s.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}for(let l of o){a.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function n$(n,e){let t=W(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,f){let p=l.batch,m=p.keys(),y=A.resolve();return m.forEach(b=>{y=y.next(()=>f.getEntry(u,b)).next(M=>{let x=l.docVersions.get(b);J(x!==null,48541),M.version.compareTo(x)<0&&(p.applyToRemoteDocument(M,l),M.isValidDocument()&&(M.setReadTime(l.commitVersion),f.addEntry(M)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=he();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function MN(n){let e=W(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function r$(n,e){let t=W(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((f,p)=>{let m=i.get(p);if(!m)return;a.push(t.hi.removeMatchingKeys(o,f.removedDocuments,p).next(()=>t.hi.addMatchingKeys(o,f.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(tt.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(p,y),(function(M,x,j){return M.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=t$?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(m,y,f)&&a.push(t.hi.updateTargetData(o,y))});let u=tn(),l=he();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,f))}),a.push(xN(o,s,e.documentUpdates).next(f=>{u=f.Ls,l=f.ks})),!r.isEqual(te.min())){let f=t.hi.getLastRemoteSnapshotVersion(o).next(p=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(f)}return A.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Fs=i,o))}function xN(n,e,t){let r=he(),i=he();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=tn();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(te.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):F(mD,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function i$(n,e){let t=W(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=xi),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Qa(n,e){let t=W(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,A.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new Wa(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function Ya(n,e,t){return P(this,null,function*(){let r=W(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!zi(s))throw s;F(mD,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function cg(n,e,t){let r=W(n),i=te.min(),o=he();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,f){let p=W(u),m=p.Ms.get(f);return m!==void 0?A.resolve(p.Fs.get(m)):p.hi.getTargetData(l,f)})(r,s,Gt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:te.min(),t?o:he())).next(a=>(PN(r,qR(e),a),{documents:a,qs:o})))}function RN(n,e){let t=W(n),r=W(t.hi),i=t.Fs.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.Et(o,e).next(s=>s?s.target:null))}function NN(n,e){let t=W(n),r=t.xs.get(e)||te.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Os.getAllFromCollectionGroup(i,e,fR(r,ka),Number.MAX_SAFE_INTEGER)).then(i=>(PN(t,e,i),i))}function PN(n,e,t){let r=n.xs.get(e)||te.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}function o$(n,e,t,r){return P(this,null,function*(){let i=W(n),o=he(),s=tn();for(let l of t){let f=e.Qs(l.metadata.name);l.document&&(o=o.add(f));let p=e.$s(l);p.setReadTime(e.Us(l.metadata.readTime)),s=s.insert(f,p)}let a=i.Os.newChangeBuffer({trackRemovals:!0}),u=yield Qa(i,(function(f){return Gt(iu(Ee.fromString(`__bundle__/docs/${f}`)))})(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>xN(l,a,s).next(f=>(a.apply(l),f)).next(f=>i.hi.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.hi.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,f.Ls,f.ks)).next(()=>f.Ls)))})}function s$(r,i){return P(this,arguments,function*(n,e,t=he()){let o=yield Qa(n,Gt(hD(e.bundledQuery))),s=W(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=et(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Ti.saveNamedQuery(a,e);let l=o.withResumeToken(tt.EMPTY_BYTE_STRING,u);return s.Fs=s.Fs.insert(l.targetId,l),s.hi.updateTargetData(a,l).next(()=>s.hi.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.hi.addMatchingKeys(a,t,o.targetId)).next(()=>s.Ti.saveNamedQuery(a,e))})})}var ON="firestore_clients";function Hx(n,e){return`${ON}_${n}_${e}`}var kN="firestore_mutations";function qx(n,e,t){let r=`${kN}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}var FN="firestore_targets";function UE(n,e){return`${FN}_${n}_${e}`}var sr="SharedClientState",lg=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ks(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new O(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(Je(sr,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ws(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Al=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ks(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new O(r.error.code,r.error.message))),o?new n(e,r.state,i):(Je(sr,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},dg=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ks(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=lD();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=mR(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(Je(sr,`Failed to parse client data for instance '${e}': ${t}`),null)}},sI=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Ks(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Je(sr,`Failed to parse online state: ${e}`),null)}},Yl=class{constructor(){this.activeTargetIds=lD()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Ml=class{constructor(e,t,r,i,o){this.window=e,this.Fi=t,this.persistenceKey=r,this.js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Js=this.Hs.bind(this),this.Ys=new He(ie),this.started=!1,this.Zs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Xs=Hx(this.persistenceKey,this.js),this.eo=(function(u){return`firestore_sequence_number_${u}`})(this.persistenceKey),this.Ys=this.Ys.insert(this.js,new Yl),this.no=new RegExp(`^${ON}_${s}_([^_]*)$`),this.ro=new RegExp(`^${kN}_${s}_(\\d+)(?:_(.*))?$`),this.io=new RegExp(`^${FN}_${s}_(\\d+)$`),this.so=(function(u){return`firestore_online_state_${u}`})(this.persistenceKey),this.oo=(function(u){return`firestore_bundle_loaded_v2_${u}`})(this.persistenceKey),this.window.addEventListener("storage",this.Js)}static C(e){return!(!e||!e.localStorage)}start(){return P(this,null,function*(){let e=yield this.syncEngine.Ps();for(let r of e){if(r===this.js)continue;let i=this.getItem(Hx(this.persistenceKey,r));if(i){let o=dg.Ks(r,i);o&&(this.Ys=this.Ys.insert(o.clientId,o))}}this._o();let t=this.storage.getItem(this.so);if(t){let r=this.ao(t);r&&this.uo(r)}for(let r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.eo,JSON.stringify(e))}getAllActiveQueryTargets(){return this.co(this.Ys)}isActiveQueryTarget(e){let t=!1;return this.Ys.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.lo(e,"pending")}updateMutationState(e,t,r){this.lo(e,t,r),this.ho(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(UE(this.persistenceKey,e));if(i){let o=Al.Ks(e,i);o&&(r=o.state)}}return t&&this.Po.Gs(e),this._o(),r}removeLocalQueryTarget(e){this.Po.zs(e),this._o()}isLocalQueryTarget(e){return this.Po.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(UE(this.persistenceKey,e))}updateQueryState(e,t,r){this.To(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.ho(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Io(e)}notifyBundleLoaded(e){this.Eo(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Js),this.removeItem(this.Xs),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return F(sr,"READ",e,t),t}setItem(e,t){F(sr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){F(sr,"REMOVE",e),this.storage.removeItem(e)}Hs(e){let t=e;if(t.storageArea===this.storage){if(F(sr,"EVENT",t.key,t.newValue),t.key===this.Xs)return void Je("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fi.enqueueRetryable(()=>P(this,null,function*(){if(this.started){if(t.key!==null){if(this.no.test(t.key)){if(t.newValue==null){let r=this.Ao(t.key);return this.Ro(r,null)}{let r=this.Vo(t.key,t.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.ro.test(t.key)){if(t.newValue!==null){let r=this.mo(t.key,t.newValue);if(r)return this.fo(r)}}else if(this.io.test(t.key)){if(t.newValue!==null){let r=this.po(t.key,t.newValue);if(r)return this.yo(r)}}else if(t.key===this.so){if(t.newValue!==null){let r=this.ao(t.newValue);if(r)return this.uo(r)}}else if(t.key===this.eo){let r=(function(o){let s=gn.ue;if(o!=null)try{let a=JSON.parse(o);J(typeof a=="number",30636,{wo:o}),s=a}catch(a){Je(sr,"Failed to read sequence number from WebStorage",a)}return s})(t.newValue);r!==gn.ue&&this.sequenceNumberHandler(r)}else if(t.key===this.oo){let r=this.So(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.bo(i)))}}}else this.Zs.push(t)}))}}get Po(){return this.Ys.get(this.js)}_o(){this.setItem(this.Xs,this.Po.Ws())}lo(e,t,r){let i=new lg(this.currentUser,e,t,r),o=qx(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Ws())}ho(e){let t=qx(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Io(e){let t={clientId:this.js,onlineState:e};this.storage.setItem(this.so,JSON.stringify(t))}To(e,t,r){let i=UE(this.persistenceKey,e),o=new Al(e,t,r);this.setItem(i,o.Ws())}Eo(e){let t=JSON.stringify(Array.from(e));this.setItem(this.oo,t)}Ao(e){let t=this.no.exec(e);return t?t[1]:null}Vo(e,t){let r=this.Ao(e);return dg.Ks(r,t)}mo(e,t){let r=this.ro.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return lg.Ks(new st(o),i,t)}po(e,t){let r=this.io.exec(e),i=Number(r[1]);return Al.Ks(i,t)}ao(e){return sI.Ks(e)}So(e){return JSON.parse(e)}fo(e){return P(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Do(e.batchId,e.state,e.error);F(sr,`Ignoring mutation for non-active user ${e.user.uid}`)})}yo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Ro(e,t){let r=t?this.Ys.insert(e,t):this.Ys.remove(e),i=this.co(this.Ys),o=this.co(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.Co(s,a).then(()=>{this.Ys=r})}uo(e){this.Ys.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}co(e){let t=lD();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},fg=class{constructor(){this.Fo=new Yl,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Yl,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var aI=class{xo(e){}shutdown(){}};var zx="ConnectivityMonitor",hg=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){F(zx,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){F(zx,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Dp=null;function uI(){return Dp===null?Dp=(function(){return 268435456+Math.round(2147483648*Math.random())})():Dp++,"0x"+Dp.toString(16)}var $E="RestConnection",a$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},cI=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===sw?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=uI(),a=this.Go(e,t.toUriEncodedString());F($E,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),f=Bm(l);return this.jo(e,a,u,r,f).then(p=>(F($E,`Received RPC '${e}' ${s}: `,p),p),p=>{throw rn($E,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ru})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=a$[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var lI=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Ft="WebChannelConnection",dI=class extends cI{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=uI();return new Promise((a,u)=>{let l=new NE;l.setWithCredentials(!0),l.listenOnce(PE.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case gl.NO_ERROR:let p=l.getResponseJson();F(Ft,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case gl.TIMEOUT:F(Ft,`RPC '${e}' ${s} timed out`),u(new O(R.DEADLINE_EXCEEDED,"Request time out"));break;case gl.HTTP_ERROR:let m=l.getStatus();if(F(Ft,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let b=y?.error;if(b&&b.status&&b.message){let M=(function(j){let Y=j.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(Y)>=0?Y:R.UNKNOWN})(b.status);u(new O(M,b.message))}else u(new O(R.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new O(R.UNAVAILABLE,"Connection failed."));break;default:K(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{F(Ft,`RPC '${e}' ${s} completed.`)}});let f=JSON.stringify(i);F(Ft,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",f,r,15)})}P_(e,t,r){let i=uI(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=FE(),a=kE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let f=o.join("");F(Ft,`Creating RPC '${e}' stream ${i}: ${f}`,u);let p=s.createWebChannel(f,u);this.T_(p);let m=!1,y=!1,b=new lI({Ho:x=>{y?F(Ft,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(m||(F(Ft,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),F(Ft,`RPC '${e}' stream ${i} sending:`,x),p.send(x))},Yo:()=>p.close()}),M=(x,j,Y)=>{x.listen(j,U=>{try{Y(U)}catch(re){setTimeout(()=>{throw re},0)}})};return M(p,va.EventType.OPEN,()=>{y||(F(Ft,`RPC '${e}' stream ${i} transport opened.`),b.s_())}),M(p,va.EventType.CLOSE,()=>{y||(y=!0,F(Ft,`RPC '${e}' stream ${i} transport closed`),b.__(),this.I_(p))}),M(p,va.EventType.ERROR,x=>{y||(y=!0,rn(Ft,`RPC '${e}' stream ${i} transport errored. Name:`,x.name,"Message:",x.message),b.__(new O(R.UNAVAILABLE,"The operation could not be completed")))}),M(p,va.EventType.MESSAGE,x=>{var j;if(!y){let Y=x.data[0];J(!!Y,16349);let U=Y,re=U?.error||((j=U[0])===null||j===void 0?void 0:j.error);if(re){F(Ft,`RPC '${e}' stream ${i} received error:`,re);let se=re.status,ae=(function(E){let I=it[E];if(I!==void 0)return iN(I)})(se),w=re.message;ae===void 0&&(ae=R.INTERNAL,w="Unknown error status: "+se+" with message "+re.message),y=!0,b.__(new O(ae,w)),p.close()}else F(Ft,`RPC '${e}' stream ${i} received:`,Y),b.a_(Y)}}),M(a,OE.STAT_EVENT,x=>{x.stat===vp.PROXY?F(Ft,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===vp.NOPROXY&&F(Ft,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.o_()},0),b}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function LN(){return typeof window<"u"?window:null}function Rp(){return typeof document<"u"?document:null}function ad(n){return new bw(n,!0)}var Zl=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var Gx="PersistentStream",pg=class{constructor(e,t,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Zl(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return P(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return P(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return P(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===R.RESOURCE_EXHAUSTED?(Je(t.toString()),Je("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new O(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>P(this,null,function*(){this.state=0,this.start()}))}G_(e){return F(Gx,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(F(Gx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},fI=class extends pg{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=qU(this.serializer,e),r=(function(o){if(!("targetChange"in o))return te.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?te.min():s.readTime?et(s.readTime):te.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=Aw(this.serializer),t.addTarget=(function(o,s){let a,u=s.target;if(a=qp(u)?{documents:dN(o,u)}:{query:fN(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=oN(o,s.resumeToken);let l=Tw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(te.min())>0){a.readTime=Ga(o,s.snapshotVersion.toTimestamp());let l=Tw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=GU(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=Aw(this.serializer),t.removeTarget=e,this.k_(t)}},hI=class extends pg{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return J(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,J(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){J(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=zU(e.writeResults,e.commitTime),r=et(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=Aw(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Gl(this.serializer,r))};this.k_(t)}};var pI=class{},gI=class extends pI{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new O(R.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,Sw(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new O(R.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,Sw(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new O(R.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},mI=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Je(t),this._a=!1):F("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Qo="RemoteStore",yI=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>P(this,null,function*(){Wi(this)&&(F(Qo,"Restarting streams for network reachability change."),yield(function(u){return P(this,null,function*(){let l=W(u);l.Ia.add(4),yield ou(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield ud(l)})})(this))}))}),this.Aa=new mI(r,i)}};function ud(n){return P(this,null,function*(){if(Wi(n))for(let e of n.da)yield e(!0)})}function ou(n){return P(this,null,function*(){for(let e of n.da)yield e(!1)})}function Bg(n,e){let t=W(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),_D(t)?vD(t):au(t).x_()&&yD(t,e))}function Za(n,e){let t=W(n),r=au(t);t.Ta.delete(e),r.x_()&&VN(t,e),t.Ta.size===0&&(r.x_()?r.B_():Wi(t)&&t.Aa.set("Unknown"))}function yD(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}au(n).H_(e)}function VN(n,e){n.Ra.$e(e),au(n).Y_(e)}function vD(n){n.Ra=new Cw({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),au(n).start(),n.Aa.aa()}function _D(n){return Wi(n)&&!au(n).M_()&&n.Ta.size>0}function Wi(n){return W(n).Ia.size===0}function jN(n){n.Ra=void 0}function u$(n){return P(this,null,function*(){n.Aa.set("Online")})}function c$(n){return P(this,null,function*(){n.Ta.forEach((e,t)=>{yD(n,e)})})}function l$(n,e){return P(this,null,function*(){jN(n),_D(n)?(n.Aa.la(e),vD(n)):n.Aa.set("Unknown")})}function d$(n,e,t){return P(this,null,function*(){if(n.Aa.set("Online"),e instanceof Kp&&e.state===2&&e.cause)try{yield(function(i,o){return P(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})})(n,e)}catch(r){F(Qo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield gg(n,r)}else if(e instanceof Pa?n.Ra.Ye(e):e instanceof Wp?n.Ra.it(e):n.Ra.et(e),!t.isEqual(te.min()))try{let r=yield MN(n.localStore);t.compareTo(r)>=0&&(yield(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let f=o.Ta.get(l);f&&o.Ta.set(l,f.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let f=o.Ta.get(u);if(!f)return;o.Ta.set(u,f.withResumeToken(tt.EMPTY_BYTE_STRING,f.snapshotVersion)),VN(o,u);let p=new Wa(f.target,u,l,f.sequenceNumber);yD(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t))}catch(r){F(Qo,"Failed to raise snapshot:",r),yield gg(n,r)}})}function gg(n,e,t){return P(this,null,function*(){if(!zi(e))throw e;n.Ia.add(1),yield ou(n),n.Aa.set("Offline"),t||(t=()=>MN(n.localStore)),n.asyncQueue.enqueueRetryable(()=>P(null,null,function*(){F(Qo,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield ud(n)}))})}function BN(n,e){return e().catch(t=>gg(n,t,e))}function su(n){return P(this,null,function*(){let e=W(n),t=$i(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:xi;for(;f$(e);)try{let i=yield i$(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,h$(e,i)}catch(i){yield gg(e,i)}UN(e)&&$N(e)})}function f$(n){return Wi(n)&&n.Pa.length<10}function h$(n,e){n.Pa.push(e);let t=$i(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function UN(n){return Wi(n)&&!$i(n).M_()&&n.Pa.length>0}function $N(n){$i(n).start()}function p$(n){return P(this,null,function*(){$i(n).na()})}function g$(n){return P(this,null,function*(){let e=$i(n);for(let t of n.Pa)e.X_(t.mutations)})}function m$(n,e,t){return P(this,null,function*(){let r=n.Pa.shift(),i=ww.from(r,e,t);yield BN(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield su(n)})}function y$(n,e){return P(this,null,function*(){e&&$i(n).Z_&&(yield(function(r,i){return P(this,null,function*(){if((function(s){return rN(s)&&s!==R.ABORTED})(i.code)){let o=r.Pa.shift();$i(r).N_(),yield BN(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield su(r)}})})(n,e)),UN(n)&&$N(n)})}function Wx(n,e){return P(this,null,function*(){let t=W(n);t.asyncQueue.verifyOperationInProgress(),F(Qo,"RemoteStore received new credentials");let r=Wi(t);t.Ia.add(3),yield ou(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield ud(t)})}function vI(n,e){return P(this,null,function*(){let t=W(n);e?(t.Ia.delete(2),yield ud(t)):e||(t.Ia.add(2),yield ou(t),t.Aa.set("Unknown"))})}function au(n){return n.Va||(n.Va=(function(t,r,i){let o=W(t);return o.ia(),new fI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:u$.bind(null,n),e_:c$.bind(null,n),n_:l$.bind(null,n),J_:d$.bind(null,n)}),n.da.push(e=>P(null,null,function*(){e?(n.Va.N_(),_D(n)?vD(n):n.Aa.set("Unknown")):(yield n.Va.stop(),jN(n))}))),n.Va}function $i(n){return n.ma||(n.ma=(function(t,r,i){let o=W(t);return o.ia(),new hI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:p$.bind(null,n),n_:y$.bind(null,n),ea:g$.bind(null,n),ta:m$.bind(null,n)}),n.da.push(e=>P(null,null,function*(){e?(n.ma.N_(),yield su(n)):(yield n.ma.stop(),n.Pa.length>0&&(F(Qo,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var _I=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new pt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new O(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function uu(n,e){if(Je("AsyncQueue",`${e}: ${n}`),zi(n))return new O(R.UNAVAILABLE,`${e}: ${n}`);throw n}var mg=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||G.comparator(t.key,r.key):(t,r)=>G.comparator(t.key,r.key),this.keyedMap=El(),this.sortedSet=new He(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var yg=class{constructor(){this.fa=new He(G.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):K(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},Ja=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,mg.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&od(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var EI=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},wI=class{constructor(){this.queries=Kx(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=W(t),o=i.queries;i.queries=Kx(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new O(R.ABORTED,"Firestore shutting down"))}};function Kx(){return new $n(n=>HR(n),od)}function ED(n,e){return P(this,null,function*(){let t=W(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new EI,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=uu(s,`Initialization of query '${Ta(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&ID(t)})}function wD(n,e){return P(this,null,function*(){let t=W(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function v$(n,e){let t=W(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&ID(t)}function _$(n,e,t){let r=W(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function ID(n){n.Da.forEach(e=>{e.next()})}var II,Qx;(Qx=II||(II={})).Fa="default",Qx.Cache="cache";var Jl=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ja(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Ja.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==II.Cache}};var DI=class{constructor(e,t){this.qa=e,this.byteLength=t}Qa(){return"metadata"in this.qa}};var vg=class{constructor(e){this.serializer=e}Qs(e){return lr(this.serializer,e)}$s(e){return e.metadata.exists?lN(this.serializer,e.document,!1):ut.newNoDocument(this.Qs(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return et(e)}},CI=class{constructor(e,t){this.$a=e,this.serializer=t,this.Ua=[],this.Ka=[],this.collectionGroups=new Set,this.progress=HN(e)}get queries(){return this.Ua}get documents(){return this.Ka}Wa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Ua.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Ka.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++t;let r=Ee.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.qa.document&&(this.Ka[this.Ka.length-1].document=e.qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ga(e){let t=new Map,r=new vg(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Qs(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||he()).add(o);t.set(s,a)}}return t}za(e){return P(this,null,function*(){let t=yield o$(e,new vg(this.serializer),this.Ka,this.$a.id),r=this.Ga(this.documents);for(let i of this.Ua)yield s$(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,ja:this.collectionGroups,Ja:t}})}};function HN(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var _g=class{constructor(e){this.key=e}},Eg=class{constructor(e){this.key=e}},wg=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=he(),this.mutatedKeys=he(),this.Xa=zR(e),this.eu=new mg(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new yg,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{let m=i.get(f),y=sd(this.query,p)?p:null,b=!!m&&this.mutatedKeys.has(m.key),M=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),x=!1;m&&y?m.data.isEqual(y.data)?b!==M&&(r.track({type:3,doc:y}),x=!0):this.iu(m,y)||(r.track({type:2,doc:y}),x=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),x=!0):m&&!y&&(r.track({type:1,doc:m}),x=!0,(u||l)&&(a=!0)),x&&(y?(s=s.add(y),o=M?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((f,p)=>(function(y,b){let M=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K(20277,{At:x})}};return M(y)-M(b)})(f.type,p.type)||this.Xa(f.doc,p.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new Ja(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new yg,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=he(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new Eg(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new _g(r))}),t}uu(e){this.Ha=e.qs,this.Za=he();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ja.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},Ki="SyncEngine",bI=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},TI=class{constructor(e){this.key=e,this.lu=!1}},SI=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new $n(a=>HR(a),od),this.Tu=new Map,this.Iu=new Set,this.du=new He(G.comparator),this.Eu=new Map,this.Au=new Kl,this.Ru={},this.Vu=new Map,this.mu=Ka.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function E$(n,e,t=!0){return P(this,null,function*(){let r=Ug(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield qN(r,e,t,!0),i})}function w$(n,e){return P(this,null,function*(){let t=Ug(n);yield qN(t,e,!0,!1)})}function qN(n,e,t,r){return P(this,null,function*(){let i=yield Qa(n.localStore,Gt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield DD(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Bg(n.remoteStore,i),a})}function DD(n,e,t,r,i){return P(this,null,function*(){n.gu=(p,m,y)=>(function(M,x,j,Y){return P(this,null,function*(){let U=x.view.nu(j);U.Ds&&(U=yield cg(M.localStore,x.query,!1).then(({documents:w})=>x.view.nu(w,U)));let re=Y&&Y.targetChanges.get(x.targetId),se=Y&&Y.targetMismatches.get(x.targetId)!=null,ae=x.view.applyChanges(U,M.isPrimaryClient,re,se);return AI(M,x.targetId,ae._u),ae.snapshot})})(n,p,m,y);let o=yield cg(n.localStore,e,!0),s=new wg(e,o.qs),a=s.nu(o.documents),u=ql.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);AI(n,t,l._u);let f=new bI(e,t,s);return n.Pu.set(e,f),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot})}function I$(n,e,t){return P(this,null,function*(){let r=W(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!od(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Ya(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Za(r.remoteStore,i.targetId),Xa(r,i.targetId)}).catch(qi))):(Xa(r,i.targetId),yield Ya(r.localStore,i.targetId,!0))})}function D$(n,e){return P(this,null,function*(){let t=W(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Za(t.remoteStore,r.targetId))})}function C$(n,e,t){return P(this,null,function*(){let r=SD(n);try{let i=yield(function(s,a){let u=W(s),l=je.now(),f=a.reduce((y,b)=>y.add(b.key),he()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=tn(),M=he();return u.Os.getEntries(y,f).next(x=>{b=x,b.forEach((j,Y)=>{Y.isValidDocument()||(M=M.add(j))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,b)).next(x=>{p=x;let j=[];for(let Y of a){let U=LU(Y,p.get(Y.key).overlayedDocument);U!=null&&j.push(new Hn(Y.key,U,FR(U.value.mapValue),Ye.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,j,a)}).next(x=>{m=x;let j=x.applyToLocalDocumentSet(p,M);return u.documentOverlayCache.saveOverlays(y,x.batchId,j)})}).then(()=>({batchId:m.batchId,changes:WR(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new He(ie)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,t),yield zr(r,i.changes),yield su(r.remoteStore)}catch(i){let o=uu(i,"Failed to persist write");t.reject(o)}})}function zN(n,e){return P(this,null,function*(){let t=W(n);try{let r=yield r$(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(J(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?J(s.lu,14607):i.removedDocuments.size>0&&(J(s.lu,42227),s.lu=!1))}),yield zr(t,r,e)}catch(r){yield qi(r)}})}function Yx(n,e,t){let r=W(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=W(s);u.onlineState=a;let l=!1;u.queries.forEach((f,p)=>{for(let m of p.wa)m.va(a)&&(l=!0)}),l&&ID(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function b$(n,e,t){return P(this,null,function*(){let r=W(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new He(G.comparator);s=s.insert(o,ut.newNoDocument(o,te.min()));let a=he().add(o),u=new Hl(te.min(),new Map,new He(ie),s,a);yield zN(r,u),r.du=r.du.remove(o),r.Eu.delete(e),TD(r)}else yield Ya(r.localStore,e,!1).then(()=>Xa(r,e,t)).catch(qi)})}function T$(n,e){return P(this,null,function*(){let t=W(n),r=e.batch.batchId;try{let i=yield n$(t.localStore,e);bD(t,r,null),CD(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield zr(t,i)}catch(i){yield qi(i)}})}function S$(n,e,t){return P(this,null,function*(){let r=W(n);try{let i=yield(function(s,a){let u=W(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(J(p!==null,37113),f=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,f,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>u.localDocuments.getDocuments(l,f))})})(r.localStore,e);bD(r,e,t),CD(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield zr(r,i)}catch(i){yield qi(i)}})}function A$(n,e){return P(this,null,function*(){let t=W(n);Wi(t.remoteStore)||F(Ki,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield(function(s){let a=W(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))})(t.localStore);if(r===xi)return void e.resolve();let i=t.Vu.get(r)||[];i.push(e),t.Vu.set(r,i)}catch(r){let i=uu(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function CD(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function bD(n,e,t){let r=W(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Xa(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||GN(n,r)})}function GN(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(Za(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),TD(n))}function AI(n,e,t){for(let r of t)r instanceof _g?(n.Au.addReference(r.key,e),M$(n,r)):r instanceof Eg?(F(Ki,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||GN(n,r.key)):K(19791,{yu:r})}function M$(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(F(Ki,"New document in limbo: "+t),n.Iu.add(r),TD(n))}function TD(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new G(Ee.fromString(e)),r=n.mu.next();n.Eu.set(r,new TI(t)),n.du=n.du.insert(t,r),Bg(n.remoteStore,new Wa(Gt(iu(t.path)),r,"TargetPurposeLimboResolution",gn.ue))}}function zr(n,e,t){return P(this,null,function*(){let r=W(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,t).then(l=>{var f;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(f=t?.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=rI.Es(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(u,l){return P(this,null,function*(){let f=W(u);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>A.forEach(l,m=>A.forEach(m.Is,y=>f.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>A.forEach(m.ds,y=>f.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!zi(p))throw p;F(mD,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=f.Fs.get(m),b=y.snapshotVersion,M=y.withLastLimboFreeSnapshotVersion(b);f.Fs=f.Fs.insert(m,M)}}})})(r.localStore,o))})}function x$(n,e){return P(this,null,function*(){let t=W(n);if(!t.currentUser.isEqual(e)){F(Ki,"User change. New user:",e.toKey());let r=yield AN(t.localStore,e);t.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new O(R.CANCELLED,s))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield zr(t,r.Bs)}})}function R$(n,e){let t=W(n),r=t.Eu.get(e);if(r&&r.lu)return he().add(r.key);{let i=he(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function N$(n,e){return P(this,null,function*(){let t=W(n),r=yield cg(t.localStore,e.query,!0),i=e.view.uu(r);return t.isPrimaryClient&&AI(t,e.targetId,i._u),i})}function P$(n,e){return P(this,null,function*(){let t=W(n);return NN(t.localStore,e).then(r=>zr(t,r))})}function O$(n,e,t,r){return P(this,null,function*(){let i=W(n),o=yield(function(a,u){let l=W(a),f=W(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>f.Xn(p,u).next(m=>m?l.localDocuments.getDocuments(p,m):A.resolve(null)))})(i.localStore,e);o!==null?(t==="pending"?yield su(i.remoteStore):t==="acknowledged"||t==="rejected"?(bD(i,e,r||null),CD(i,e),(function(a,u){W(W(a).mutationQueue).rr(u)})(i.localStore,e)):K(6720,"Unknown batchState",{wu:t}),yield zr(i,o)):F(Ki,"Cannot apply mutation batch with id: "+e)})}function k$(n,e){return P(this,null,function*(){let t=W(n);if(Ug(t),SD(t),e===!0&&t.fu!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Zx(t,r.toArray());t.fu=!0,yield vI(t.remoteStore,!0);for(let o of i)Bg(t.remoteStore,o)}else if(e===!1&&t.fu!==!1){let r=[],i=Promise.resolve();t.Tu.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Xa(t,s),Ya(t.localStore,s,!0))),Za(t.remoteStore,s)}),yield i,yield Zx(t,r),(function(s){let a=W(s);a.Eu.forEach((u,l)=>{Za(a.remoteStore,l)}),a.Au.jr(),a.Eu=new Map,a.du=new He(G.comparator)})(t),t.fu=!1,yield vI(t.remoteStore,!1)}})}function Zx(n,e,t){return P(this,null,function*(){let r=W(n),i=[],o=[];for(let s of e){let a,u=r.Tu.get(s);if(u&&u.length!==0){a=yield Qa(r.localStore,Gt(u[0]));for(let l of u){let f=r.Pu.get(l),p=yield N$(r,f);p.snapshot&&o.push(p.snapshot)}}else{let l=yield RN(r.localStore,s);a=yield Qa(r.localStore,l),yield DD(r,WN(l),s,!1,a.resumeToken)}i.push(a)}return r.hu.J_(o),i})}function WN(n){return $R(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function F$(n){return(function(t){return W(W(t).persistence).Ps()})(W(n).localStore)}function L$(n,e,t,r){return P(this,null,function*(){let i=W(n);if(i.fu)return void F(Ki,"Ignoring unexpected query state notification.");let o=i.Tu.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield NN(i.localStore,qR(o[0])),a=Hl.createSynthesizedRemoteEventForCurrentChange(e,t==="current",tt.EMPTY_BYTE_STRING);yield zr(i,s,a);break}case"rejected":yield Ya(i.localStore,e,!0),Xa(i,e,r);break;default:K(64155,t)}})}function V$(n,e,t){return P(this,null,function*(){let r=Ug(n);if(r.fu){for(let i of e){if(r.Tu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){F(Ki,"Adding an already active target "+i);continue}let o=yield RN(r.localStore,i),s=yield Qa(r.localStore,o);yield DD(r,WN(o),s.targetId,!1,s.resumeToken),Bg(r.remoteStore,s)}for(let i of t)r.Tu.has(i)&&(yield Ya(r.localStore,i,!1).then(()=>{Za(r.remoteStore,i),Xa(r,i)}).catch(qi))}})}function Ug(n){let e=W(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=zN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=R$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=b$.bind(null,e),e.hu.J_=v$.bind(null,e.eventManager),e.hu.pu=_$.bind(null,e.eventManager),e}function SD(n){let e=W(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=T$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=S$.bind(null,e),e}function j$(n,e,t){let r=W(n);(function(o,s,a){return P(this,null,function*(){try{let u=yield s.getMetadata();if(yield(function(y,b){let M=W(y),x=et(b.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",j=>M.Ti.getBundleMetadata(j,b.id)).then(j=>!!j&&j.createTime.compareTo(x)>=0)})(o.localStore,u))return yield s.close(),a._completeWith((function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}})(u)),Promise.resolve(new Set);a._updateProgress(HN(u));let l=new CI(u,s.serializer),f=yield s.Su();for(;f;){let m=yield l.Wa(f);m&&a._updateProgress(m),f=yield s.Su()}let p=yield l.za(o.localStore);return yield zr(o,p.Ja,void 0),yield(function(y,b){let M=W(y);return M.persistence.runTransaction("Save bundle","readwrite",x=>M.Ti.saveBundleMetadata(x,b))})(o.localStore,u),a._completeWith(p.progress),Promise.resolve(p.ja)}catch(u){return rn(Ki,`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var AD=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return P(this,null,function*(){this.serializer=ad(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return SN(this.persistence,new ug,t.initialUser,this.serializer)}Du(t){return new Ql(sg.Vi,this.serializer)}bu(t){return new fg}terminate(){return P(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),MI=class extends AD{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){J(this.persistence.referenceDelegate instanceof ag,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new rg(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?en.withCacheSize(this.cacheSizeBytes):en.DEFAULT;return new Ql(r=>ag.Vi(r,t),this.serializer)}},Ig=class n extends AD{constructor(e,t,r){super(),this.Mu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return P(this,null,function*(){yield Lm(n.prototype,this,"initialize").call(this,e),yield this.Mu.initialize(this,e),yield SD(this.Mu.syncEngine),yield su(this.Mu.remoteStore),yield this.persistence.ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}vu(e){return SN(this.persistence,new ug,e.initialUser,this.serializer)}Cu(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new rg(r,e.asyncQueue,t)}Fu(e,t){let r=new tw(t,this.persistence);return new ew(e.asyncQueue,r)}Du(e){let t=gD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?en.withCacheSize(this.cacheSizeBytes):en.DEFAULT;return new nI(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,LN(),Rp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new fg}},xI=class n extends Ig{constructor(e,t){super(e,t,!1),this.Mu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return P(this,null,function*(){yield Lm(n.prototype,this,"initialize").call(this,e);let t=this.Mu.syncEngine;this.sharedClientState instanceof Ml&&(this.sharedClientState.syncEngine={Do:O$.bind(null,t),vo:L$.bind(null,t),Co:V$.bind(null,t),Ps:F$.bind(null,t),bo:P$.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.ji(r=>P(this,null,function*(){yield k$(this.Mu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}bu(e){let t=LN();if(!Ml.C(t))throw new O(R.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=gD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ml(t,e.asyncQueue,r,e.clientId,e.initialUser)}},MD=(()=>{class n{initialize(t,r){return P(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Yx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=x$.bind(null,this.syncEngine),yield vI(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new wI})()}createDatastore(t){let r=ad(t.databaseInfo.databaseId),i=(function(s){return new dI(s)})(t.databaseInfo);return(function(s,a,u,l){return new gI(s,a,u,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,u){return new yI(i,o,s,a,u)})(this.localStore,this.datastore,t.asyncQueue,r=>Yx(this.syncEngine,r,0),(function(){return hg.C()?new hg:new aI})())}createSyncEngine(t,r){return(function(o,s,a,u,l,f,p){let m=new SI(o,s,a,u,l,f);return p&&(m.fu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return P(this,null,function*(){var t,r;yield(function(o){return P(this,null,function*(){let s=W(o);F(Qo,"RemoteStore shutting down."),s.Ia.add(5),yield ou(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function Jx(n,e=10240){let t=0;return{read(){return P(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return P(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var eu=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Je("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var RI=class{constructor(e,t){this.Nu=e,this.serializer=t,this.metadata=new pt,this.buffer=new Uint8Array,this.Bu=(function(){return new TextDecoder("utf-8")})(),this.Lu().then(r=>{r&&r.Qa()?this.metadata.resolve(r.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.qa)}`))},r=>this.metadata.reject(r))}close(){return this.Nu.cancel()}getMetadata(){return P(this,null,function*(){return this.metadata.promise})}Su(){return P(this,null,function*(){return yield this.getMetadata(),this.Lu()})}Lu(){return P(this,null,function*(){let e=yield this.ku();if(e===null)return null;let t=this.Bu.decode(e),r=Number(t);isNaN(r)&&this.qu(`length string (${t}) is not valid number`);let i=yield this.Qu(r);return new DI(JSON.parse(i),e.length+r)})}$u(){return this.buffer.findIndex(e=>e===123)}ku(){return P(this,null,function*(){for(;this.$u()<0&&!(yield this.Uu()););if(this.buffer.length===0)return null;let e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}Qu(e){return P(this,null,function*(){for(;this.buffer.length<e;)(yield this.Uu())&&this.qu("Reached the end of bundle when more is expected.");let t=this.Bu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}qu(e){throw this.Nu.cancel(),new Error(`Invalid bundle format: ${e}`)}Uu(){return P(this,null,function*(){let e=yield this.Nu.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var NI=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return P(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new O(R.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield(function(i,o){return P(this,null,function*(){let s=W(i),a={documents:o.map(p=>zl(s.serializer,p))},u=yield s.Jo("BatchGetDocuments",s.serializer.databaseId,Ee.emptyPath(),a,o.length),l=new Map;u.forEach(p=>{let m=HU(s.serializer,p);l.set(m.key.toString(),m)});let f=[];return o.forEach(p=>{let m=l.get(p.toString());J(!!m,55234,{key:p}),f.push(m)}),f})})(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ui(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return P(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=G.fromPath(r);this.mutations.push(new Bl(i,this.precondition(i)))}),yield(function(r,i){return P(this,null,function*(){let o=W(r),s={writes:i.map(a=>Gl(o.serializer,a))};yield o.Wo("Commit",o.serializer.databaseId,Ee.emptyPath(),s)})})(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw K(50498,{Wu:e.constructor.name});t=te.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new O(R.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(te.min())?Ye.exists(!1):Ye.updateTime(t):Ye.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(te.min()))throw new O(R.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ye.updateTime(t)}return Ye.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var PI=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Gu=r.maxAttempts,this.F_=new Zl(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(()=>P(this,null,function*(){let e=new NI(this.datastore),t=this.Ju(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Hu(i)}))}).catch(r=>{this.Hu(r)})}))}Ju(e){try{let t=this.updateFunction(e);return!nd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!rN(t)}return!1}};var Hi="FirestoreClient",OI=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=st.UNAUTHENTICATED,this.clientId=xl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>P(this,null,function*(){F(Hi,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(F(Hi,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new pt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>P(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=uu(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function HE(n,e){return P(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),F(Hi,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>P(null,null,function*(){r.isEqual(i)||(yield AN(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{rn("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{F("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{rn("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function Xx(n,e){return P(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield xD(n);F(Hi,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Wx(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Wx(e.remoteStore,i)),n._onlineComponents=e})}function xD(n){return P(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){F(Hi,"Using user provided OfflineComponentProvider");try{yield HE(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===R.FAILED_PRECONDITION||i.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;rn("Error using user provided cache. Falling back to memory cache: "+t),yield HE(n,new AD)}}else F(Hi,"Using default OfflineComponentProvider"),yield HE(n,new MI(void 0));return n._offlineComponents})}function $g(n){return P(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(F(Hi,"Using user provided OnlineComponentProvider"),yield Xx(n,n._uninitializedComponentsProvider._online)):(F(Hi,"Using default OnlineComponentProvider"),yield Xx(n,new MD))),n._onlineComponents})}function KN(n){return xD(n).then(e=>e.persistence)}function RD(n){return xD(n).then(e=>e.localStore)}function QN(n){return $g(n).then(e=>e.remoteStore)}function ND(n){return $g(n).then(e=>e.syncEngine)}function B$(n){return $g(n).then(e=>e.datastore)}function tu(n){return P(this,null,function*(){let e=yield $g(n),t=e.eventManager;return t.onListen=E$.bind(null,e.syncEngine),t.onUnlisten=I$.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=w$.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=D$.bind(null,e.syncEngine),t})}function U$(n){return n.asyncQueue.enqueue(()=>P(null,null,function*(){let e=yield KN(n),t=yield QN(n);return e.setNetworkEnabled(!0),(function(i){let o=W(i);return o.Ia.delete(0),ud(o)})(t)}))}function $$(n){return n.asyncQueue.enqueue(()=>P(null,null,function*(){let e=yield KN(n),t=yield QN(n);return e.setNetworkEnabled(!1),(function(i){return P(this,null,function*(){let o=W(i);o.Ia.add(0),yield ou(o),o.Aa.set("Offline")})})(t)}))}function H$(n,e){let t=new pt;return n.asyncQueue.enqueueAndForget(()=>P(null,null,function*(){return(function(i,o,s){return P(this,null,function*(){try{let a=yield(function(l,f){let p=W(l);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,f))})(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new O(R.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=uu(a,`Failed to get document '${o} from cache`);s.reject(u)}})})(yield RD(n),e,t)})),t.promise}function YN(n,e,t={}){let r=new pt;return n.asyncQueue.enqueueAndForget(()=>P(null,null,function*(){return(function(o,s,a,u,l){let f=new eu({next:m=>{f.Ou(),s.enqueueAndForget(()=>wD(o,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new O(R.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new O(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Jl(iu(a.path),f,{includeMetadataChanges:!0,ka:!0});return ED(o,p)})(yield tu(n),n.asyncQueue,e,t,r)})),r.promise}function q$(n,e){let t=new pt;return n.asyncQueue.enqueueAndForget(()=>P(null,null,function*(){return(function(i,o,s){return P(this,null,function*(){try{let a=yield cg(i,o,!0),u=new wg(o,a.qs),l=u.nu(a.documents),f=u.applyChanges(l,!1);s.resolve(f.snapshot)}catch(a){let u=uu(a,`Failed to execute query '${o} against cache`);s.reject(u)}})})(yield RD(n),e,t)})),t.promise}function ZN(n,e,t={}){let r=new pt;return n.asyncQueue.enqueueAndForget(()=>P(null,null,function*(){return(function(o,s,a,u,l){let f=new eu({next:m=>{f.Ou(),s.enqueueAndForget(()=>wD(o,p)),m.fromCache&&u.source==="server"?l.reject(new O(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Jl(a,f,{includeMetadataChanges:!0,ka:!0});return ED(o,p)})(yield tu(n),n.asyncQueue,e,t,r)})),r.promise}function z$(n,e){let t=new eu(e);return n.asyncQueue.enqueueAndForget(()=>P(null,null,function*(){return(function(i,o){W(i).Da.add(o),o.next()})(yield tu(n),t)})),()=>{t.Ou(),n.asyncQueue.enqueueAndForget(()=>P(null,null,function*(){return(function(i,o){W(i).Da.delete(o)})(yield tu(n),t)}))}}function G$(n,e,t,r){let i=(function(s,a){let u;return u=typeof s=="string"?ZI().encode(s):s,(function(f,p){return new RI(f,p)})((function(f,p){if(f instanceof Uint8Array)return Jx(f,p);if(f instanceof ArrayBuffer)return Jx(new Uint8Array(f),p);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(u),a)})(t,ad(e));n.asyncQueue.enqueueAndForget(()=>P(null,null,function*(){j$(yield ND(n),i,r)}))}function W$(n,e){return n.asyncQueue.enqueue(()=>P(null,null,function*(){return(function(r,i){let o=W(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Ti.getNamedQuery(s,i))})(yield RD(n),e)}))}function JN(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var eR=new Map;var XN="firestore.googleapis.com",tR=!0,Dg=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new O(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=XN,this.ssl=tR}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:tR;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=EN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<e$)throw new O(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new O(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new O(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new O(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Yo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new O(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new O(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new qE;switch(r.type){case"firstParty":return new KE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new O(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return P(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=eR.get(t);r&&(F("ComponentProvider","Removing Datastore"),eR.delete(t),r.terminate())})(this),Promise.resolve()}};function eP(n,e,t,r={}){var i;n=Ce(n,Yo);let o=Bm(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o&&(s0(`https://${u}`),u0("Firestore",!0)),s.host!==XN&&s.host!==u&&rn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!xd(l,a)&&(n._setSettings(l),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=st.MOCK_USER;else{f=a0(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new O(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new st(m)}n._authCredentials=new zE(new Np(f,p))}}var Ct=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ne=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(td(t,n._jsonSchema))return new n(e,r||null,new G(Ee.fromString(t.referencePath)))}};Ne._jsonSchemaVersion="firestore/documentReference/1.0",Ne._jsonSchema={type:at("string",Ne._jsonSchemaVersion),referencePath:at("string")};var dr=class n extends Ct{constructor(e,t,r){super(e,t,iu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ne(this.firestore,null,new G(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function PD(n,e,...t){if(n=Ge(n),JI("collection","path",e),n instanceof Yo){let r=Ee.fromString(e,...t);return QM(r),new dr(n,null,r)}{if(!(n instanceof Ne||n instanceof dr))throw new O(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ee.fromString(e,...t));return QM(r),new dr(n.firestore,null,r)}}function tP(n,e){if(n=Ce(n,Yo),JI("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new O(R.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ct(n,null,(function(r){return new Un(Ee.emptyPath(),r)})(e))}function cd(n,e,...t){if(n=Ge(n),arguments.length===1&&(e=xl.newId()),JI("doc","path",e),n instanceof Yo){let r=Ee.fromString(e,...t);return KM(r),new Ne(n,null,new G(r))}{if(!(n instanceof Ne||n instanceof dr))throw new O(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ee.fromString(e,...t));return KM(r),new Ne(n.firestore,n instanceof dr?n.converter:null,new G(r))}}function OD(n,e){return n=Ge(n),e=Ge(e),(n instanceof Ne||n instanceof dr)&&(e instanceof Ne||e instanceof dr)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function kD(n,e){return n=Ge(n),e=Ge(e),n instanceof Ct&&e instanceof Ct&&n.firestore===e.firestore&&od(n._query,e._query)&&n.converter===e.converter}var nR="AsyncQueue",Cg=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Zl(this,"async_queue_retry"),this.oc=()=>{let r=Rp();r&&F(nR,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=Rp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=Rp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new pt;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return P(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!zi(e))throw e;F(nR,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Je("INTERNAL UNHANDLED ERROR: ",rR(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=_I.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&K(47125,{hc:rR(this.tc)})}verifyOperationInProgress(){}Pc(){return P(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function rR(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function kI(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var FI=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new pt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var nP=-1,We=class extends Yo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Cg,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return P(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Cg(e),this._firestoreClient=void 0,yield e}})}};function bt(n){if(n._terminated)throw new O(R.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||rP(n),n._firestoreClient}function rP(n){var e,t,r;let i=n._freezeSettings(),o=(function(a,u,l,f){return new ow(a,u,l,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,JN(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new OI(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}})(n._componentsProvider))}function iP(n,e){rn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return sP(n,MD.provider,{build:r=>new Ig(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function oP(n){return P(this,null,function*(){rn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();sP(n,MD.provider,{build:t=>new xI(t,e.cacheSizeBytes)})})}function sP(n,e,t){if((n=Ce(n,We))._firestoreClient||n._terminated)throw new O(R.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new O(R.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},rP(n)}function aP(n){if(n._initialized&&!n._terminated)throw new O(R.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new pt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>P(null,null,function*(){try{yield(function(r){return P(this,null,function*(){if(!Oi.C())return Promise.resolve();let i=r+TN;yield Oi.delete(i)})})(gD(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function uP(n){return(function(t){let r=new pt;return t.asyncQueue.enqueueAndForget(()=>P(null,null,function*(){return A$(yield ND(t),r)})),r.promise})(bt(n=Ce(n,We)))}function cP(n){return U$(bt(n=Ce(n,We)))}function lP(n){return $$(bt(n=Ce(n,We)))}function dP(n,e){let t=bt(n=Ce(n,We)),r=new FI;return G$(t,n._databaseId,e,r),r}function fP(n,e){return W$(bt(n=Ce(n,We)),e).then(t=>t?new Ct(n,null,t.query):null)}var yn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(tt.fromBase64String(e))}catch(t){throw new O(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(td(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};yn._jsonSchemaVersion="firestore/bytes/1.0",yn._jsonSchema={type:at("string",yn._jsonSchemaVersion),bytes:at("string")};var qn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new O(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Hr=class{constructor(e){this._methodName=e}};var fr=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new O(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new O(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(td(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};fr._jsonSchemaVersion="firestore/geoPoint/1.0",fr._jsonSchema={type:at("string",fr._jsonSchemaVersion),latitude:at("number"),longitude:at("number")};var Ri=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(td(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new O(R.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Ri._jsonSchemaVersion="firestore/vectorValue/1.0",Ri._jsonSchema={type:at("string",Ri._jsonSchemaVersion),vectorValues:at("object")};var K$=/^__.*__$/,LI=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Hn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bi(e,this.data,t,this.fieldTransforms)}},bg=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Hn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function hP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K(40011,{Ec:n})}}var Tg=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Sg(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(hP(this.Ec)&&K$.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},VI=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ad(e)}Dc(e,t,r,i=!1){return new Tg({Ec:e,methodName:t,bc:r,path:Xe.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Xo(n){let e=n._freezeSettings(),t=ad(n._databaseId);return new VI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Hg(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);VD("Data must be an object, but it was:",s,r);let a=mP(r,s),u,l;if(o.merge)u=new mn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let p of o.mergeFields){let m=HI(e,p,t);if(!s.contains(m))throw new O(R.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);vP(f,m)||f.push(m)}u=new mn(f),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new LI(new Lt(a),u,l)}var Xl=class n extends Hr{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function pP(n,e,t){return new Tg({Ec:3,bc:e.settings.bc,methodName:n._methodName,mc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var jI=class n extends Hr{_toFieldTransform(e){return new Go(e.path,new Vi)}isEqual(e){return e instanceof n}},BI=class n extends Hr{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){let t=pP(this,e,!0),r=this.vc.map(o=>es(o,t)),i=new Ur(r);return new Go(e.path,i)}isEqual(e){return e instanceof n&&xd(this.vc,e.vc)}},UI=class n extends Hr{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){let t=pP(this,e,!0),r=this.vc.map(o=>es(o,t)),i=new $r(r);return new Go(e.path,i)}isEqual(e){return e instanceof n&&xd(this.vc,e.vc)}},$I=class n extends Hr{constructor(e,t){super(e),this.Cc=t}_toFieldTransform(e){let t=new ji(e.serializer,YR(e.serializer,this.Cc));return new Go(e.path,t)}isEqual(e){return e instanceof n&&this.Cc===e.Cc}};function FD(n,e,t,r){let i=n.Dc(1,e,t);VD("Data must be an object, but it was:",i,r);let o=[],s=Lt.empty();Gi(r,(u,l)=>{let f=jD(e,u,t);l=Ge(l);let p=i.gc(f);if(l instanceof Xl)o.push(f);else{let m=es(l,p);m!=null&&(o.push(f),s.set(f,m))}});let a=new mn(o);return new bg(s,a,i.fieldTransforms)}function LD(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[HI(e,r,t)],u=[i];if(o.length%2!=0)throw new O(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(HI(e,o[m])),u.push(o[m+1]);let l=[],f=Lt.empty();for(let m=a.length-1;m>=0;--m)if(!vP(l,a[m])){let y=a[m],b=u[m];b=Ge(b);let M=s.gc(y);if(b instanceof Xl)l.push(y);else{let x=es(b,M);x!=null&&(l.push(y),f.set(y,x))}}let p=new mn(l);return new bg(f,p,s.fieldTransforms)}function gP(n,e,t,r=!1){return es(t,n.Dc(r?4:3,e))}function es(n,e){if(yP(n=Ge(n)))return VD("Unsupported field value:",e,n),mP(n,e);if(n instanceof Hr)return(function(r,i){if(!hP(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=es(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=Ge(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return YR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=je.fromDate(r);return{timestampValue:Ga(i.serializer,o)}}if(r instanceof je){let o=new je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ga(i.serializer,o)}}if(r instanceof fr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof yn)return{bytesValue:oN(i.serializer,r._byteString)};if(r instanceof Ne){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:fD(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ri)return(function(s,a){return{mapValue:{fields:{[sD]:{stringValue:aD},[Ua]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return dD(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${Pg(r)}`)})(n,e)}function mP(n,e){let t={};return SR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gi(n,(r,i)=>{let o=es(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function yP(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof je||n instanceof fr||n instanceof yn||n instanceof Ne||n instanceof Hr||n instanceof Ri)}function VD(n,e,t){if(!yP(t)||!lR(t)){let r=Pg(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function HI(n,e,t){if((e=Ge(e))instanceof qn)return e._internalPath;if(typeof e=="string")return jD(n,e);throw Sg("Field path arguments must be of type string or ",n,!1,void 0,t)}var Q$=new RegExp("[~\\*/\\[\\]]");function jD(n,e,t){if(e.search(Q$)>=0)throw Sg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new qn(...e.split("."))._internalPath}catch{throw Sg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Sg(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new O(R.INVALID_ARGUMENT,a+n+u)}function vP(n,e){return n.some(t=>t.isEqual(e))}var Zo=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ne(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new qI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(qg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},qI=class extends Zo{data(){return super.data()}};function qg(n,e){return typeof e=="string"?jD(n,e):e instanceof qn?e._internalPath:e._delegate._internalPath}function _P(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new O(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ed=class{},Jo=class extends ed{};function Gr(n,e,...t){let r=[];e instanceof ed&&r.push(e),r=r.concat(t),(function(o){let s=o.filter(u=>u instanceof zI).length,a=o.filter(u=>u instanceof Ag).length;if(s>1||s>0&&a>0)throw new O(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var Ag=class n extends Jo{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return MP(e._query,t),new Ct(e.firestore,e.converter,_w(e._query,t))}_parse(e){let t=Xo(e.firestore);return(function(o,s,a,u,l,f,p){let m;if(l.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new O(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){oR(p,f);let b=[];for(let M of p)b.push(iR(u,o,M));m={arrayValue:{values:b}}}else m=iR(u,o,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||oR(p,f),m=gP(a,s,p,f==="in"||f==="not-in");return ye.create(l,f,m)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function EP(n,e,t){let r=e,i=qg("where",n);return Ag._create(i,r,t)}var zI=class n extends ed{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Re.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)MP(s,u),s=_w(s,u)})(e._query,t),new Ct(e.firestore,e.converter,_w(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var GI=class n extends Jo{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,o,s){if(i.startAt!==null)throw new O(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new O(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qo(o,s)})(e._query,this._field,this._direction);return new Ct(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new Un(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function wP(n,e="asc"){let t=e,r=qg("orderBy",n);return GI._create(r,t)}var Mg=class n extends Jo{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Ct(e.firestore,e.converter,Gp(e._query,this._limit,this._limitType))}};function IP(n){return dR("limit",n),Mg._create("limit",n,"F")}function DP(n){return dR("limitToLast",n),Mg._create("limitToLast",n,"L")}var xg=class n extends Jo{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=AP(e,this.type,this._docOrFields,this._inclusive);return new Ct(e.firestore,e.converter,(function(i,o){return new Un(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)})(e._query,t))}};function CP(...n){return xg._create("startAt",n,!0)}function bP(...n){return xg._create("startAfter",n,!1)}var Rg=class n extends Jo{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=AP(e,this.type,this._docOrFields,this._inclusive);return new Ct(e.firestore,e.converter,(function(i,o){return new Un(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)})(e._query,t))}};function TP(...n){return Rg._create("endBefore",n,!1)}function SP(...n){return Rg._create("endAt",n,!0)}function AP(n,e,t,r){if(t[0]=Ge(t[0]),t[0]instanceof Zo)return(function(o,s,a,u,l){if(!u)throw new O(R.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let f=[];for(let p of Na(o))if(p.field.isKeyField())f.push(Ho(s,u.key));else{let m=u.data.field(p.field);if(Lg(m))throw new O(R.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let y=p.field.canonicalString();throw new O(R.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}f.push(m)}return new pr(f,l)})(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Xo(n.firestore);return(function(s,a,u,l,f,p){let m=s.explicitOrderBy;if(f.length>m.length)throw new O(R.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let b=0;b<f.length;b++){let M=f[b];if(m[b].field.isKeyField()){if(typeof M!="string")throw new O(R.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof M}`);if(!cD(s)&&M.indexOf("/")!==-1)throw new O(R.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${M}' contains a slash.`);let x=s.path.child(Ee.fromString(M));if(!G.isDocumentKey(x))throw new O(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${x}' is not because it contains an odd number of segments.`);let j=new G(x);y.push(Ho(a,j))}else{let x=gP(u,l,M);y.push(x)}}return new pr(y,p)})(n._query,n.firestore._databaseId,i,e,t,r)}}function iR(n,e,t){if(typeof(t=Ge(t))=="string"){if(t==="")throw new O(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cD(e)&&t.indexOf("/")!==-1)throw new O(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Ee.fromString(t));if(!G.isDocumentKey(r))throw new O(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ho(n,new G(r))}if(t instanceof Ne)return Ho(n,t._key);throw new O(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pg(t)}.`)}function oR(n,e){if(!Array.isArray(n)||n.length===0)throw new O(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function MP(n,e){let t=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new O(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new O(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var nu=class{convertValue(e,t="none"){switch(Fi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Br(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw K(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Gi(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Ua].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>ze(s.doubleValue));return new Ri(o)}convertGeoPoint(e){return new fr(ze(e.latitude),ze(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Vg(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ll(e));default:return null}}convertTimestamp(e){let t=jr(e);return new je(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ee.fromString(e);J(mN(r),9688,{name:e});let i=new ki(r.get(1),r.get(3)),o=new G(r.popFirst(5));return i.isEqual(t)||Je(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function zg(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var WI=class extends nu{constructor(e){super(),this.firestore=e}convertBytes(e){return new yn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ne(this.firestore,null,t)}};var Vr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Wt=class n extends Zo{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ni(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(qg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new O(R.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Wt._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wt._jsonSchema={type:at("string",Wt._jsonSchemaVersion),bundleSource:at("string","DocumentSnapshot"),bundleName:at("string"),bundle:at("string")};var Ni=class extends Wt{data(e={}){return super.data(e)}},nn=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Vr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ni(this._firestore,this._userDataWriter,r.key,r,new Vr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new O(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Ni(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Vr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Ni(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Vr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,f=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),f=s.indexOf(a.doc.key)),{type:Y$(a.type),doc:u,oldIndex:l,newIndex:f}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new O(R.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=xl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Y$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K(61501,{type:n})}}function BD(n,e){return n instanceof Wt&&e instanceof Wt?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof nn&&e instanceof nn&&n._firestore===e._firestore&&kD(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function xP(n){n=Ce(n,Ne);let e=Ce(n.firestore,We);return YN(bt(e),n._key).then(t=>qD(e,n,t))}nn._jsonSchemaVersion="firestore/querySnapshot/1.0",nn._jsonSchema={type:at("string",nn._jsonSchemaVersion),bundleSource:at("string","QuerySnapshot"),bundleName:at("string"),bundle:at("string")};var qr=class extends nu{constructor(e){super(),this.firestore=e}convertBytes(e){return new yn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ne(this.firestore,null,t)}};function RP(n){n=Ce(n,Ne);let e=Ce(n.firestore,We),t=bt(e),r=new qr(e);return H$(t,n._key).then(i=>new Wt(e,r,n._key,i,new Vr(i!==null&&i.hasLocalMutations,!0),n.converter))}function NP(n){n=Ce(n,Ne);let e=Ce(n.firestore,We);return YN(bt(e),n._key,{source:"server"}).then(t=>qD(e,n,t))}function PP(n){n=Ce(n,Ct);let e=Ce(n.firestore,We),t=bt(e),r=new qr(e);return _P(n._query),ZN(t,n._query).then(i=>new nn(e,r,n,i))}function OP(n){n=Ce(n,Ct);let e=Ce(n.firestore,We),t=bt(e),r=new qr(e);return q$(t,n._query).then(i=>new nn(e,r,n,i))}function kP(n){n=Ce(n,Ct);let e=Ce(n.firestore,We),t=bt(e),r=new qr(e);return ZN(t,n._query,{source:"server"}).then(i=>new nn(e,r,n,i))}function UD(n,e,t){n=Ce(n,Ne);let r=Ce(n.firestore,We),i=zg(n.converter,e,t);return cu(r,[Hg(Xo(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ye.none())])}function $D(n,e,t,...r){n=Ce(n,Ne);let i=Ce(n.firestore,We),o=Xo(i),s;return s=typeof(e=Ge(e))=="string"||e instanceof qn?LD(o,"updateDoc",n._key,e,t,r):FD(o,"updateDoc",n._key,e),cu(i,[s.toMutation(n._key,Ye.exists(!0))])}function FP(n){return cu(Ce(n.firestore,We),[new Ui(n._key,Ye.none())])}function LP(n,e){let t=Ce(n.firestore,We),r=cd(n),i=zg(n.converter,e);return cu(t,[Hg(Xo(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ye.exists(!1))]).then(()=>r)}function HD(n,...e){var t,r,i;n=Ge(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||kI(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(kI(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,f;if(n instanceof Ne)l=Ce(n.firestore,We),f=iu(n._key.path),u={next:p=>{e[s]&&e[s](qD(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=Ce(n,Ct);l=Ce(p.firestore,We),f=p._query;let m=new qr(l);u={next:y=>{e[s]&&e[s](new nn(l,m,p,y))},error:e[s+1],complete:e[s+2]},_P(n._query)}return(function(m,y,b,M){let x=new eu(M),j=new Jl(y,x,b);return m.asyncQueue.enqueueAndForget(()=>P(null,null,function*(){return ED(yield tu(m),j)})),()=>{x.Ou(),m.asyncQueue.enqueueAndForget(()=>P(null,null,function*(){return wD(yield tu(m),j)}))}})(bt(l),f,a,u)}function VP(n,e){return z$(bt(n=Ce(n,We)),kI(e)?e:{next:e})}function cu(n,e){return(function(r,i){let o=new pt;return r.asyncQueue.enqueueAndForget(()=>P(null,null,function*(){return C$(yield ND(r),i,o)})),o.promise})(bt(n),e)}function qD(n,e,t){let r=t.docs.get(e._key),i=new qr(n);return new Wt(n,i,e._key,r,new Vr(t.hasPendingWrites,t.fromCache),e.converter)}var Z$={maxAttempts:5};var Ng=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Xo(e)}set(e,t,r){this._verifyNotCommitted();let i=Mi(e,this._firestore),o=zg(i.converter,t,r),s=Hg(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Ye.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Mi(e,this._firestore),s;return s=typeof(t=Ge(t))=="string"||t instanceof qn?LD(this._dataReader,"WriteBatch.update",o._key,t,r,i):FD(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Ye.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Mi(e,this._firestore);return this._mutations=this._mutations.concat(new Ui(t._key,Ye.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new O(R.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Mi(n,e){if((n=Ge(n)).firestore!==e)throw new O(R.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var KI=class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Xo(e)}get(e){let t=Mi(e,this._firestore),r=new WI(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||i.length!==1)return K(24041);let o=i[0];if(o.isFoundDocument())return new Zo(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new Zo(this._firestore,r,t._key,null,t.converter);throw K(18433,{doc:o})})}set(e,t,r){let i=Mi(e,this._firestore),o=zg(i.converter,t,r),s=Hg(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,t,r,...i){let o=Mi(e,this._firestore),s;return s=typeof(t=Ge(t))=="string"||t instanceof qn?LD(this._dataReader,"Transaction.update",o._key,t,r,i):FD(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,s),this}delete(e){let t=Mi(e,this._firestore);return this._transaction.delete(t._key),this}};var QI=class extends KI{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Mi(e,this._firestore),r=new qr(this._firestore);return super.get(e).then(i=>new Wt(this._firestore,r,t._key,i._document,new Vr(!1,!1),t.converter))}};function jP(n,e,t){n=Ce(n,We);let r=Object.assign(Object.assign({},Z$),t);return(function(o){if(o.maxAttempts<1)throw new O(R.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(o,s,a){let u=new pt;return o.asyncQueue.enqueueAndForget(()=>P(null,null,function*(){let l=yield B$(o);new PI(o.asyncQueue,l,a,s,u).zu()})),u.promise})(bt(n),i=>e(new QI(n,i)),r)}function BP(){return new Xl("deleteField")}function UP(){return new jI("serverTimestamp")}function $P(...n){return new BI("arrayUnion",n)}function HP(...n){return new UI("arrayRemove",n)}function qP(n){return new $I("increment",n)}(function(e,t=!0){(function(i){ru=i})(f0),Pu(new Xi("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new We(new GE(r.getProvider("auth-internal")),new QE(s,r.getProvider("app-check-internal")),(function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new O(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ki(l.options.projectId,f)})(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Zr(qM,zM,e),Zr(qM,zM,"esm2017")})();var J$="@firebase/firestore-compat",X$="0.3.53";function YD(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new O("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function zP(){if(typeof Uint8Array>"u")throw new O("unimplemented","Uint8Arrays are not available in this environment.")}function GP(){if(!AR())throw new O("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Gg=class n{constructor(e){this._delegate=e}static fromBase64String(e){return GP(),new n(yn.fromBase64String(e))}static fromUint8Array(e){return zP(),new n(yn.fromUint8Array(e))}toBase64(){return GP(),this._delegate.toBase64()}toUint8Array(){return zP(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function zD(n){return eH(n,["next","error","complete"])}function eH(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var GD=class{enableIndexedDbPersistence(e,t){return iP(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return oP(e._delegate)}clearIndexedDbPersistence(e){return aP(e._delegate)}},Wg=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ki||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&rn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){eP(this._delegate,e,t,r)}enableNetwork(){return cP(this._delegate)}disableNetwork(){return lP(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,XI("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return uP(this._delegate)}onSnapshotsInSync(e){return VP(this._delegate,e)}get app(){if(!this._appCompat)throw new O("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new fu(this,PD(this._delegate,e))}catch(t){throw Kt(t,"collection()","Firestore.collection()")}}doc(e){try{return new gr(this,cd(this._delegate,e))}catch(t){throw Kt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new is(this,tP(this._delegate,e))}catch(t){throw Kt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return jP(this._delegate,t=>e(new Kg(this,t)))}batch(){return bt(this._delegate),new Qg(new Ng(this._delegate,e=>cu(this._delegate,e)))}loadBundle(e){return dP(this._delegate,e)}namedQuery(e){return fP(this._delegate,e).then(t=>t?new is(this,t):null)}},lu=class extends nu{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gg(new yn(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return gr.forKey(t,this.firestore,null)}};function tH(n){sR(n)}var Kg=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new lu(e)}get(e){let t=ts(e);return this._delegate.get(t).then(r=>new ns(this._firestore,new Wt(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=ts(e);return r?(YD("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=ts(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=ts(e);return this._delegate.delete(t),this}},Qg=class{constructor(e){this._delegate=e}set(e,t,r){let i=ts(e);return r?(YD("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=ts(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=ts(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},du=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Ni(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new rs(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new lu(e),t),i.set(t,o)),o}};du.INSTANCES=new WeakMap;var gr=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new lu(e)}static forPath(e,t,r){if(e.length%2!==0)throw new O("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Ne(t._delegate,r,new G(e)))}static forKey(e,t,r){return new n(t,new Ne(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new fu(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new fu(this.firestore,PD(this._delegate,e))}catch(t){throw Kt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ge(e),e instanceof Ne?OD(this._delegate,e):!1}set(e,t){t=YD("DocumentReference.set",t);try{return t?UD(this._delegate,e,t):UD(this._delegate,e)}catch(r){throw Kt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?$D(this._delegate,e):$D(this._delegate,e,t,...r)}catch(i){throw Kt(i,"updateDoc()","DocumentReference.update()")}}delete(){return FP(this._delegate)}onSnapshot(...e){let t=WP(e),r=KP(e,i=>new ns(this.firestore,new Wt(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return HD(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=RP(this._delegate):e?.source==="server"?t=NP(this._delegate):t=xP(this._delegate),t.then(r=>new ns(this.firestore,new Wt(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(du.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Kt(n,e,t){return n.message=n.message.replace(e,t),n}function WP(n){for(let e of n)if(typeof e=="object"&&!zD(e))return e;return{}}function KP(n,e){var t,r;let i;return zD(n[0])?i=n[0]:zD(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var ns=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new gr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return BD(this._delegate,e._delegate)}},rs=class extends ns{data(e){let t=this._delegate.data(e);return this._delegate._converter||uR(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},is=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new lu(e)}where(e,t,r){try{return new n(this.firestore,Gr(this._delegate,EP(e,t,r)))}catch(i){throw Kt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,Gr(this._delegate,wP(e,t)))}catch(r){throw Kt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,Gr(this._delegate,IP(e)))}catch(t){throw Kt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,Gr(this._delegate,DP(e)))}catch(t){throw Kt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,Gr(this._delegate,CP(...e)))}catch(t){throw Kt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,Gr(this._delegate,bP(...e)))}catch(t){throw Kt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,Gr(this._delegate,TP(...e)))}catch(t){throw Kt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,Gr(this._delegate,SP(...e)))}catch(t){throw Kt(t,"endAt()","Query.endAt()")}}isEqual(e){return kD(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=OP(this._delegate):e?.source==="server"?t=kP(this._delegate):t=PP(this._delegate),t.then(r=>new ld(this.firestore,new nn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=WP(e),r=KP(e,i=>new ld(this.firestore,new nn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return HD(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(du.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},WD=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new rs(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},ld=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new is(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new rs(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new WD(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new rs(this._firestore,r))})}isEqual(e){return BD(this._delegate,e._delegate)}},fu=class n extends is{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new gr(this.firestore,e):null}doc(e){try{return e===void 0?new gr(this.firestore,cd(this._delegate)):new gr(this.firestore,cd(this._delegate,e))}catch(t){throw Kt(t,"doc()","CollectionReference.doc()")}}add(e){return LP(this._delegate,e).then(t=>new gr(this.firestore,t))}isEqual(e){return OD(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(du.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function ts(n){return Ce(n,Ne)}var KD=class n{constructor(...e){this._delegate=new qn(...e)}static documentId(){return new n(Xe.keyField().canonicalString())}isEqual(e){return e=Ge(e),e instanceof qn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var QD=class n{static serverTimestamp(){let e=UP();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=BP();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=$P(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=HP(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=qP(e);return t._methodName="FieldValue.increment",new n(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}};var nH={Firestore:Wg,GeoPoint:fr,Timestamp:je,Blob:Gg,Transaction:Kg,WriteBatch:Qg,DocumentReference:gr,DocumentSnapshot:ns,Query:is,QueryDocumentSnapshot:rs,QuerySnapshot:ld,CollectionReference:fu,FieldPath:KD,FieldValue:QD,setLogLevel:tH,CACHE_SIZE_UNLIMITED:nP};function rH(n,e){n.INTERNAL.registerComponent(new Xi("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},nH)))}function iH(n){rH(n,(e,t)=>new Wg(e,t,new GD)),n.registerVersion(J$,X$)}iH(Ut);function oH(n,e=$u){return new ue(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function QP(n,e){return oH(n,e)}function sH(n,e){return QP(n,e).pipe(io(void 0),Gu(),ne(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function XD(n,e){return QP(n,e).pipe(ne(t=>({payload:t,type:"query"})))}var Yg=class{ref;afs;injector=k(Ve);constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=e1(r,t);return new Jg(i,o,this.afs)}snapshotChanges(){return sH(this.ref,this.afs.schedulers.outsideAngular).pipe(Xt(this.injector))}valueChanges(e={}){return this.snapshotChanges().pipe(ne(({payload:t})=>e.idField?le(B({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return we(this.ref.get(e)).pipe(Xt(this.injector))}};function Zg(n,e){return XD(n,e).pipe(io(void 0),Gu(),ne(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),f=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&f&&JSON.stringify(f.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function YP(n,e,t){return Zg(n,t).pipe(ro((r,i)=>aH(r,i.map(o=>o.payload),e),[]),dy(),ne(r=>r.map(i=>({type:i.type,payload:i}))))}function aH(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=uH(n,r))}),n}function ZD(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function uH(n,e){switch(e.type){case"added":if(!n[e.newIndex]?.doc.ref.isEqual(e.doc.ref))return ZD(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return ZD(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]?.doc.ref.isEqual(e.doc.ref))return ZD(n,e.oldIndex,1);break}return n}function ZP(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Jg=class{ref;query;afs;injector=k(Ve);constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Zg(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(ne(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(io(void 0),Gu(),ct(([r,i])=>i.length>0||!r),ne(([,r])=>r),Xt(this.injector))}auditTrail(e){return this.stateChanges(e).pipe(ro((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=ZP(e);return YP(this.query,t,this.afs.schedulers.outsideAngular).pipe(Xt(this.injector))}valueChanges(e={}){return XD(this.query,this.afs.schedulers.outsideAngular).pipe(ne(t=>t.payload.docs.map(r=>e.idField?le(B({},r.data()),{[e.idField]:r.id}):r.data())),Xt(this.injector))}get(e){return we(this.query.get(e)).pipe(Xt(this.injector))}add(e){return this.ref.add(e)}doc(e){return new Yg(this.ref.doc(e),this.afs)}},JD=class{query;afs;injector=k(Ve);constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Zg(this.query,this.afs.schedulers.outsideAngular).pipe(Xt(this.injector)):Zg(this.query,this.afs.schedulers.outsideAngular).pipe(ne(t=>t.filter(r=>e.indexOf(r.type)>-1)),ct(t=>t.length>0),Xt(this.injector))}auditTrail(e){return this.stateChanges(e).pipe(ro((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=ZP(e);return YP(this.query,t,this.afs.schedulers.outsideAngular).pipe(Xt(this.injector))}valueChanges(e={}){return XD(this.query,this.afs.schedulers.outsideAngular).pipe(ne(r=>r.payload.docs.map(i=>e.idField?B({[e.idField]:i.id},i.data()):i.data())),Xt(this.injector))}get(e){return we(this.query.get(e)).pipe(Xt(this.injector))}},JP=new Q("angularfire2.enableFirestorePersistence"),XP=new Q("angularfire2.firestore.persistenceSettings"),cH=new Q("angularfire2.firestore.settings"),lH=new Q("angularfire2.firestore.use-emulator");function e1(n,e=t=>t){return{query:e(n),ref:n}}var os=(()=>{class n{schedulers;firestore;persistenceEnabled$;ngZone=k(Ae);constructor(t,r,i,o,s,a,u,l,f,p,m,y,b,M,x,j,Y){this.schedulers=u;let U=pl(t,a,r),re=f;p&&xE(U,a,m,b,M,x,y,j),[this.firestore,this.persistenceEnabled$]=gp(`${U.name}.firestore`,"AngularFirestore",U.name,()=>{let se=a.runOutsideAngular(()=>U.firestore());if(o&&se.settings(o),re&&se.useEmulator(...re),i&&!Ch(s)){let ae=()=>{try{return we(se.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(w){return typeof console<"u"&&console.warn(w),ee(!1)}};return[se,a.runOutsideAngular(ae)]}else return[se,ee(!1)]},[o,re,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=e1(i,r),a=this.ngZone.run(()=>o);return new Jg(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new JD(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.ngZone.run(()=>r);return new Yg(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(z(ga),z(ma,8),z(JP,8),z(cH,8),z(Dn),z(Ae),z(dl),z(XP,8),z(lH,8),z(hn,8),z(CE,8),z(bE,8),z(TE,8),z(SE,8),z(AE,8),z(ME,8),z(pa,8))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Xg=(()=>{class n{constructor(){Ut.registerVersion("angularfire",Ii.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:JP,useValue:!0},{provide:XP,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ot({type:n});static \u0275inj=wt({providers:[os]})}return n})();var em=class n{constructor(e,t,r){this.afAuth=e;this.firestore=t;this.router=r}onRegister(e,t,r,i){this.afAuth.createUserWithEmailAndPassword(r,i).then(o=>this.firestore.collection("users").doc(o.user?.uid).set({name:e,surname:t,email:r,createdAt:new Date})).then(()=>this.router.navigate(["/profile"])).catch(o=>alert(o.message))}static \u0275fac=function(t){return new(t||n)(Ie(hn),Ie(os),Ie(rt))};static \u0275cmp=_e({type:n,selectors:[["app-register"]],decls:31,vars:0,consts:[["nameInput",""],["surnameInput",""],["emailInput",""],["passwordInput",""],[1,"container","mt-5"],[1,"row","py-5"],[1,"col-md-5","mx-auto"],[1,"form-card","p-5"],[1,"text-center","mb-4"],[3,"submit"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","placeholder","Enter your first name","required","",1,"form-control","form-input"],["for","surname",1,"form-label"],["type","text","id","surname","placeholder","Enter your surname","required","",1,"form-control","form-input"],["for","email",1,"form-label"],["type","email","name","email","id","email","placeholder","Enter your email","required","",1,"form-control","form-input"],["for","password",1,"form-label"],["type","password","name","password","id","password","placeholder","Enter your password","required","",1,"form-control","form-input"],["type","submit",1,"btn","btn-custom","w-100","mt-4"],["href","/login",1,"d-block","mt-3","text-center","text-decoration-none","link-custom"]],template:function(t,r){if(t&1){let i=bo();$(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"h1",8),T(5,"Register"),H(),$(6,"form",9),Cn("submit",function(s){ui(i);let a=Nr(11),u=Nr(16),l=Nr(21),f=Nr(26);return r.onRegister(a.value,u.value,l.value,f.value),ci(s.preventDefault())}),$(7,"div",10)(8,"label",11),T(9,"First Name"),H(),Fe(10,"input",12,0),H(),$(12,"div",10)(13,"label",13),T(14,"Surname"),H(),Fe(15,"input",14,1),H(),$(17,"div",10)(18,"label",15),T(19,"Email"),H(),Fe(20,"input",16,2),H(),$(22,"div",10)(23,"label",17),T(24,"Password"),H(),Fe(25,"input",18,3),H(),$(27,"button",19),T(28,"Register"),H(),$(29,"a",20),T(30,"Already have an account? Sign In"),H()()()()()()}},dependencies:[fa,cp,up,ll,ht,mp,Xg],styles:[".form-card[_ngcontent-%COMP%]{background:linear-gradient(145deg,#ffe3ec,#fff0f5);border-radius:20px;box-shadow:0 6px 25px #c680b426;transition:all .3s ease}.form-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 10px 30px #c680b440}.form-input[_ngcontent-%COMP%]{border-radius:12px;border:1px solid #ffcce0;padding:.75rem 1rem;height:50px;transition:all .3s ease}.form-input[_ngcontent-%COMP%]:focus{border-color:#d67fa1;box-shadow:0 0 8px #d67fa133;outline:none}.btn-custom[_ngcontent-%COMP%]{background:#d67fa1;color:#fff;font-weight:600;border-radius:20px;padding:.7rem;transition:all .3s ease}.btn-custom[_ngcontent-%COMP%]:hover{background:#a75b85;transform:translateY(-2px)}.link-custom[_ngcontent-%COMP%]{color:#d67fa1;font-weight:500;transition:color .3s ease}.link-custom[_ngcontent-%COMP%]:hover{color:#d67fa1;text-decoration:underline}"]})};var tm=class n{constructor(e,t){this.afAuth=e;this.router=t}onLogin(e,t){this.afAuth.signInWithEmailAndPassword(e,t).then(()=>{this.router.navigate(["/profile"])}).catch(r=>alert(r.message))}static \u0275fac=function(t){return new(t||n)(Ie(hn),Ie(rt))};static \u0275cmp=_e({type:n,selectors:[["app-login"]],decls:21,vars:0,consts:[["emailInput",""],["passwordInput",""],[1,"container","mt-5"],[1,"row","py-5"],[1,"col-md-5","mx-auto"],[1,"form-card","p-5"],[1,"text-center","mb-4"],[3,"submit"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","placeholder","Enter your email","required","",1,"form-control","form-input"],["for","password",1,"form-label"],["type","password","id","password","placeholder","Enter your password","required","",1,"form-control","form-input"],["type","submit",1,"btn","btn-custom","w-100","mt-4"],["href","/register",1,"d-block","mt-3","text-center","text-decoration-none","link-custom"]],template:function(t,r){if(t&1){let i=bo();$(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h1",6),T(5,"Log In"),H(),$(6,"form",7),Cn("submit",function(){ui(i);let s=Nr(11),a=Nr(16);return ci(r.onLogin(s.value,a.value))}),$(7,"div",8)(8,"label",9),T(9,"Email"),H(),Fe(10,"input",10,0),H(),$(12,"div",8)(13,"label",11),T(14,"Password"),H(),Fe(15,"input",12,1),H(),$(17,"button",13),T(18,"Login"),H(),$(19,"a",14),T(20,"Don't have an account? Sign Up"),H()()()()()()}},dependencies:[fa,cp,up,ll,ht],styles:[".form-card[_ngcontent-%COMP%]{background:linear-gradient(145deg,#ffe3ec,#fff0f5);border-radius:20px;box-shadow:0 6px 25px #c680b426;transition:all .3s ease}.form-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 10px 30px #c680b440}.form-input[_ngcontent-%COMP%]{border-radius:12px;border:1px solid #ffcce0;padding:.75rem 1rem;height:50px;transition:all .3s ease}.form-input[_ngcontent-%COMP%]:focus{border-color:#d67fa1;box-shadow:0 0 8px #d67fa133;outline:none}.btn-custom[_ngcontent-%COMP%]{background:#d67fa1;color:#fff;font-weight:600;border-radius:20px;padding:.7rem;transition:all .3s ease}.btn-custom[_ngcontent-%COMP%]:hover{background:#a75b85;transform:translateY(-2px)}.link-custom[_ngcontent-%COMP%]{color:#d67fa1;font-weight:500;transition:color .3s ease}.link-custom[_ngcontent-%COMP%]:hover{color:#d67fa1;text-decoration:underline}"]})};var nm=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=_e({type:n,selectors:[["app-about"]],decls:23,vars:0,consts:[[1,"about-section"],[1,"about-container"],[1,"about-title"],[1,"divider"],[1,"about-text"],[1,"features"],[1,"feature-card"]],template:function(t,r){t&1&&(L(0,"section",0)(1,"div",1)(2,"h1",2),T(3,"About SheConnect"),V(),xe(4,"div",3),L(5,"p",4),T(6," SheConnect is a vibrant community dedicated to empowering women in tech, business, and beyond. Our mission is to create a space where inspiration meets action, knowledge meets creativity, and connection leads to growth. We believe every woman has the power to shine \u2014 and together, we rise higher. "),V(),L(7,"div",5)(8,"div",6)(9,"h3"),T(10,"Connect"),V(),L(11,"p"),T(12,"Network with like-minded women and industry leaders."),V()(),L(13,"div",6)(14,"h3"),T(15,"Learn"),V(),L(16,"p"),T(17,"Access resources, workshops, and expert insights."),V()(),L(18,"div",6)(19,"h3"),T(20,"Grow"),V(),L(21,"p"),T(22,"Turn ideas into action and celebrate your successes."),V()()()()())},styles:[".about-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffe3ec,#fff0f5);padding:100px 20px;text-align:center;color:#3e3050}.about-container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto}.about-title[_ngcontent-%COMP%]{font-family:Playfair Display,serif;font-size:2.8rem;font-weight:700;margin-bottom:.5rem;color:#d67fa1}.divider[_ngcontent-%COMP%]{width:80px;height:4px;background-color:#d67fa1;border-radius:10px;margin:1rem auto 2rem}.about-text[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-size:1.15rem;line-height:1.7;opacity:.95;margin-bottom:3rem}.features[_ngcontent-%COMP%]{display:flex;gap:2rem;justify-content:center;flex-wrap:wrap}.feature-card[_ngcontent-%COMP%]{background:linear-gradient(145deg,#fff0f5,#ffe3ec);border-radius:20px;padding:2rem 1.5rem;width:250px;box-shadow:0 6px 20px #c680b426;transition:all .3s ease;text-align:center}.feature-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#d67fa1;font-weight:600;margin-bottom:.5rem}.feature-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem;opacity:.85}.feature-card[_ngcontent-%COMP%]:hover{transform:translateY(-6px);box-shadow:0 10px 25px #c680b440}@media (max-width: 768px){.features[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.feature-card[_ngcontent-%COMP%]{width:80%}}"]})};var rm=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=_e({type:n,selectors:[["app-addprofile"]],decls:38,vars:0,consts:[[1,"profile-section"],[1,"profile-container"],[1,"section-title"],[1,"divider"],[1,"profile-form"],[1,"form-group"],["for","firstName"],["type","text","id","firstName","placeholder","Enter first name","required",""],["for","lastName"],["type","text","id","lastName","placeholder","Enter surname","required",""],["for","email"],["type","email","id","email","placeholder","Enter Gmail address","required",""],["for","password"],["type","password","id","password","placeholder","Enter password","required",""],["type","submit",1,"btn-add"],[1,"profile-preview"],[1,"profile-card"],[1,"profile-options"],["routerLink","/edit",1,"nav-link"]],template:function(t,r){t&1&&(L(0,"section",0)(1,"div",1)(2,"h1",2),T(3,"Add a New Profile"),V(),xe(4,"div",3),L(5,"form",4)(6,"div",5)(7,"label",6),T(8,"First Name"),V(),xe(9,"input",7),V(),L(10,"div",5)(11,"label",8),T(12,"Surname"),V(),xe(13,"input",9),V(),L(14,"div",5)(15,"label",10),T(16,"Gmail"),V(),xe(17,"input",11),V(),L(18,"div",5)(19,"label",12),T(20,"Password"),V(),xe(21,"input",13),V(),L(22,"button",14),T(23,"Add Profile"),V()(),L(24,"div",15)(25,"h2"),T(26,"Visible Profiles"),V(),L(27,"div",16)(28,"h3"),T(29,"Jane Doe"),V(),L(30,"p"),T(31,"janedoe@gmail.com"),V(),L(32,"div",17)(33,"button"),T(34,"Edit"),V(),L(35,"button")(36,"a",18),T(37,"Delete"),V()()()()()()())},styles:[".profile-section[_ngcontent-%COMP%]{background:linear-gradient(145deg,#ffe3ec,#fff0f5);padding:80px 20px;text-align:center;color:#3e3050}.profile-container[_ngcontent-%COMP%]{max-width:700px;margin:0 auto}.section-title[_ngcontent-%COMP%]{font-family:Playfair Display,serif;font-size:2.5rem;color:#d67fa1}.divider[_ngcontent-%COMP%]{width:80px;height:4px;background-color:#d67fa1;border-radius:10px;margin:1rem auto 2rem}.profile-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;margin-bottom:3rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:left}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:500}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.75rem 1rem;border-radius:12px;border:1px solid #ffcce0;outline:none;transition:all .3s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#d67fa1;box-shadow:0 0 8px #d67fa14d}.btn-add[_ngcontent-%COMP%]{padding:.8rem 1.5rem;border:none;border-radius:20px;background:#d67fa1;color:#fff;font-weight:600;cursor:pointer;transition:all .3s ease}.btn-add[_ngcontent-%COMP%]:hover{background:#a75b85}.profile-preview[_ngcontent-%COMP%]{margin-top:3rem;text-align:left}.profile-card[_ngcontent-%COMP%]{background:#fff0f5;border-radius:18px;padding:1rem 1.5rem;margin-bottom:1rem;box-shadow:0 4px 15px #c680b41a;display:flex;justify-content:space-between;align-items:center}.profile-options[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:.5rem;padding:.5rem 1rem;border-radius:12px;border:none;background:#d67fa1;color:#fff;cursor:pointer;transition:all .3s ease}.profile-options[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#a75b85}@media (max-width: 768px){.profile-card[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.profile-options[_ngcontent-%COMP%]{margin-top:.5rem}}"]})};var im=class n{constructor(e,t){this.afAuth=e;this.router=t}logout(){this.afAuth.signOut().then(()=>this.router.navigate(["/login"]))}static \u0275fac=function(t){return new(t||n)(Ie(hn),Ie(rt))};static \u0275cmp=_e({type:n,selectors:[["app-settings"]],decls:12,vars:0,consts:[[1,"container","mt-5"],[1,"row","py-5"],[1,"col-md-6","mx-auto"],[1,"form-card","p-5","text-center"],[1,"mb-4"],["routerLink","/edit-profile",1,"btn","btn-custom","w-100","mb-3"],[1,"btn","btn-outline-light","w-100",3,"click"]],template:function(t,r){t&1&&($(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),T(5,"Settings"),H(),$(6,"p"),T(7,"Manage your account and preferences."),H(),$(8,"a",5),T(9,"Edit Profile"),H(),$(10,"button",6),Cn("click",function(){return r.logout()}),T(11,"Logout"),H()()()()())},dependencies:[Jt,ht,_i],styles:[".form-card[_ngcontent-%COMP%]{background:linear-gradient(145deg,#ffeff6,#fff);border-radius:20px;box-shadow:0 4px 15px #ffafcacc;padding:2rem}.btn-custom[_ngcontent-%COMP%]{background-color:#ffdfe6;color:#000;border-radius:8px}.btn-custom[_ngcontent-%COMP%]:hover{background-color:#ffcad4}"]})};var om=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=_e({type:n,selectors:[["app-resources"]],decls:34,vars:0,consts:[[1,"resources-section"],[1,"container"],[1,"section-title"],[1,"divider"],[1,"resource-cards"],[1,"resource-card"],["href","#","target","_blank"]],template:function(t,r){t&1&&(L(0,"section",0)(1,"div",1)(2,"h1",2),T(3,"Resources & Guides"),V(),xe(4,"div",3),L(5,"div",4)(6,"div",5)(7,"h3"),T(8,"10 Tips for Mindful Living"),V(),L(9,"p"),T(10,"Improve mental wellness with these actionable tips."),V(),L(11,"a",6),T(12,"Read Article"),V()(),L(13,"div",5)(14,"h3"),T(15,"Beginner's Fitness Guide"),V(),L(16,"p"),T(17,"Step-by-step workout plans and nutrition advice."),V(),L(18,"a",6),T(19,"Read Article"),V()(),L(20,"div",5)(21,"h3"),T(22,"Boost Your Motivation"),V(),L(23,"p"),T(24,"Practical ways to stay inspired and productive every day."),V(),L(25,"a",6),T(26,"Read Article"),V()(),L(27,"div",5)(28,"h3"),T(29,"Career Growth Strategies"),V(),L(30,"p"),T(31,"Networking, skill-building, and professional development."),V(),L(32,"a",6),T(33,"Read Article"),V()()()()())},styles:[".resources-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff0f5,#ffe3ec);padding:80px 20px;text-align:center;color:#3e3050}.resource-cards[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:2rem;justify-content:center;margin-top:2rem}.resource-card[_ngcontent-%COMP%]{background:#fff0f5;border-radius:20px;padding:2rem 1.5rem;width:250px;box-shadow:0 6px 18px #c680b41f;text-align:center;transition:all .3s ease}.resource-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#d67fa1;font-weight:600;margin-bottom:.5rem}.resource-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem;opacity:.85;margin-bottom:1rem}.resource-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#fff;background:#d67fa1;padding:.6rem 1.3rem;border-radius:20px;display:inline-block;transition:all .3s ease}.resource-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#a75b85;transform:translateY(-3px)}"]})};var sm=class n{constructor(e,t,r){this.afAuth=e;this.firestore=t;this.router=r;this.afAuth.authState.subscribe(i=>{i?(this.uid=i.uid,this.firestore.collection("users").doc(i.uid).valueChanges().subscribe(o=>{this.name=o.name,this.surname=o.surname,this.email=o.email})):this.router.navigate(["/login"])})}name="";surname="";email="";uid="";saveChanges(){this.firestore.collection("users").doc(this.uid).update({name:this.name,surname:this.surname,email:this.email}).then(()=>alert("Profile updated!")).catch(e=>alert(e.message))}static \u0275fac=function(t){return new(t||n)(Ie(hn),Ie(os),Ie(rt))};static \u0275cmp=_e({type:n,selectors:[["app-edit"]],decls:24,vars:0,consts:[["nameInput",""],["surnameInput",""],["emailInput",""],[1,"container","mt-5"],[1,"row","py-5"],[1,"col-md-6","mx-auto"],[1,"form-card","p-5"],[1,"mb-4","text-center"],[3,"submit"],[1,"mb-3"],[1,"form-label"],["type","text","name","name","required","",1,"form-control","form-input"],["type","text","name","surname","required","",1,"form-control","form-input"],["type","email","name","email","required","",1,"form-control","form-input"],["type","submit",1,"btn","btn-custom","w-100","mt-4"]],template:function(t,r){if(t&1){let i=bo();L(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"h2",7),T(5,"Edit Profile"),V(),L(6,"form",8),yh("submit",function(s){return ui(i),r.saveChanges(),ci(s.preventDefault())}),L(7,"div",9)(8,"label",10),T(9,"First Name"),V(),xe(10,"input",11,0),V(),L(12,"div",9)(13,"label",10),T(14,"Surname"),V(),xe(15,"input",12,1),V(),L(17,"div",9)(18,"label",10),T(19,"Email"),V(),xe(20,"input",13,2),V(),L(22,"button",14),T(23,"Save Changes"),V()()()()()()}},dependencies:[Jt,ht],styles:[".form-card[_ngcontent-%COMP%]{background:linear-gradient(145deg,#ffeff6,#fff);border-radius:20px;box-shadow:0 4px 15px #ffafcacc;padding:2rem}.btn-custom[_ngcontent-%COMP%]{background-color:#ffdfe6;color:#000;border-radius:8px}.btn-custom[_ngcontent-%COMP%]:hover{background-color:#ffcad4}.form-input[_ngcontent-%COMP%]{border-radius:8px}"]})};var am=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=_e({type:n,selectors:[["app-events"]],decls:19,vars:0,consts:[[1,"events-section"],[1,"container"],[1,"section-title"],[1,"divider"],[1,"event-card"]],template:function(t,r){t&1&&(L(0,"section",0)(1,"div",1)(2,"h1",2),T(3,"Upcoming Events"),V(),xe(4,"div",3),L(5,"div",4)(6,"h3"),T(7,"SheTech Workshop"),V(),L(8,"p"),T(9,"When: Oct 28, 2025 | Where: Online"),V(),L(10,"p"),T(11,"Learn coding, networking, and empowerment tips from female leaders."),V()(),L(12,"div",4)(13,"h3"),T(14,"Networking Meetup"),V(),L(15,"p"),T(16,"When: Nov 5, 2025 | Where: Cape Town"),V(),L(17,"p"),T(18,"Connect with women entrepreneurs and mentors in your area."),V()()()())},styles:[".events-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff0f5,#ffe3ec);padding:80px 20px;color:#3e3050;text-align:center}.event-card[_ngcontent-%COMP%]{background:#fff0f5;border-radius:18px;padding:1.8rem 1.5rem;margin:1rem auto;max-width:700px;box-shadow:0 4px 15px #c680b41f;transition:all .3s ease}.event-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 20px #c680b433}"]})};var um=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=_e({type:n,selectors:[["app-createpost"]],decls:2,vars:0,template:function(t,r){t&1&&(L(0,"p"),T(1,"createpost works!"),V())},encapsulation:2})};var cm=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=_e({type:n,selectors:[["app-findmentor"]],decls:56,vars:0,consts:[[1,"mentors-section"],[1,"container"],[1,"section-title"],[1,"divider"],[1,"mentor-cards"],[1,"mentor-card"],["src","mentor1.jpg","alt","Mentor"],["src","mentor2.jpg","alt","Mentor"]],template:function(t,r){t&1&&(L(0,"section",0)(1,"div",1)(2,"h1",2),T(3,"Find a Mentor"),V(),xe(4,"div",3),L(5,"div",4)(6,"div",5),xe(7,"img",6),L(8,"h3"),T(9,"Jane Smith"),V(),L(10,"p"),T(11,"Software Engineer | Mentor"),V(),L(12,"button"),T(13,"Connect"),V()(),L(14,"div",5),xe(15,"img",7),L(16,"h3"),T(17,"Sarah Lee"),V(),L(18,"p"),T(19,"Entrepreneur | Mentor"),V(),L(20,"button"),T(21,"Connect"),V()(),L(22,"div",5),xe(23,"img",7),L(24,"h3"),T(25,"Sam Soap"),V(),L(26,"p"),T(27,"Entrepreneur | Mentor"),V(),L(28,"button"),T(29,"Connect"),V()()(),xe(30,"div",3),L(31,"div",4)(32,"div",5),xe(33,"img",6),L(34,"h3"),T(35,"Maya Smith"),V(),L(36,"p"),T(37,"Software Engineer | Mentor"),V(),L(38,"button"),T(39,"Connect"),V()(),L(40,"div",5),xe(41,"img",7),L(42,"h3"),T(43,"Sarah Moore"),V(),L(44,"p"),T(45,"Entrepreneur | Mentor"),V(),L(46,"button"),T(47,"Connect"),V()(),L(48,"div",5),xe(49,"img",7),L(50,"h3"),T(51,"Belinda Smoek"),V(),L(52,"p"),T(53,"Entrepreneur | Mentor"),V(),L(54,"button"),T(55,"Connect"),V()()()()())},styles:[".mentors-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffe3ec,#fff0f5);padding:80px 20px;color:#3e3050;text-align:center}.mentor-cards[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:2rem;justify-content:center;margin-top:2rem}.mentor-card[_ngcontent-%COMP%]{background:#fff0f5;border-radius:20px;padding:1.5rem;width:220px;box-shadow:0 4px 15px #c680b41a;transition:all .3s ease;text-align:center}.mentor-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;margin-bottom:1rem}.mentor-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem 1.2rem;border:none;border-radius:20px;background:#d67fa1;color:#fff;cursor:pointer;margin-top:.8rem;transition:all .3s ease}.mentor-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#a75b85}"]})};var lm=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=_e({type:n,selectors:[["app-joinprogram"]],decls:34,vars:0,consts:[[1,"programs-section"],[1,"container"],[1,"section-title"],[1,"divider"],[1,"program-cards"],[1,"program-card"]],template:function(t,r){t&1&&(L(0,"section",0)(1,"div",1)(2,"h1",2),T(3,"Join a Program"),V(),xe(4,"div",3),L(5,"div",4)(6,"div",5)(7,"h3"),T(8,"Health & Fitness"),V(),L(9,"p"),T(10,"Workouts, nutrition tips, and holistic wellness guidance."),V(),L(11,"button"),T(12,"Join"),V()(),L(13,"div",5)(14,"h3"),T(15,"Mental Wellbeing"),V(),L(16,"p"),T(17,"Mindfulness exercises, stress relief, and therapy resources."),V(),L(18,"button"),T(19,"Join"),V()(),L(20,"div",5)(21,"h3"),T(22,"Motivation & Growth"),V(),L(23,"p"),T(24,"Goal setting, productivity tips, and motivational talks."),V(),L(25,"button"),T(26,"Join"),V()(),L(27,"div",5)(28,"h3"),T(29,"Career & Skills"),V(),L(30,"p"),T(31,"Professional development, networking, and mentorship programs."),V(),L(32,"button"),T(33,"Join"),V()()()()())},styles:[".programs-section[_ngcontent-%COMP%]{background:linear-gradient(145deg,#ffe3ec,#fff0f5);padding:80px 20px;text-align:center;color:#3e3050}.program-cards[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:2rem;justify-content:center;margin-top:2rem}.program-card[_ngcontent-%COMP%]{background:#fff0f5;border-radius:20px;padding:2rem 1.5rem;width:250px;box-shadow:0 6px 18px #c680b41f;transition:all .3s ease;text-align:center}.program-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#d67fa1;font-weight:600;margin-bottom:.5rem}.program-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem;opacity:.85;margin-bottom:1.2rem}.program-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.7rem 1.5rem;border-radius:20px;border:none;background:#d67fa1;color:#fff;font-weight:600;cursor:pointer;transition:all .3s ease}.program-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#a75b85;transform:translateY(-3px)}"]})};var dm=class n{constructor(e,t,r){this.afAuth=e;this.firestore=t;this.router=r;this.afAuth.authState.subscribe(i=>{i?this.firestore.collection("users").doc(i.uid).valueChanges().subscribe(o=>{this.userData=o}):this.router.navigate(["/login"])})}userData;logout(){this.afAuth.signOut().then(()=>{this.router.navigate(["/login"])})}static \u0275fac=function(t){return new(t||n)(Ie(hn),Ie(os),Ie(rt))};static \u0275cmp=_e({type:n,selectors:[["app-profile"]],decls:1,vars:0,template:function(t,r){t&1&&Fe(0,"app-header")},dependencies:[Jt,ht,ha],styles:[".header-section[_ngcontent-%COMP%]{background:linear-gradient(145deg,#ffeaee,#ffbfcb);color:#000;text-align:center;padding:80px 20px 60px;border-radius:30px;box-shadow:6px 6px 25px #ffc0cfe3;margin-top:20px}.profile-card[_ngcontent-%COMP%]{background:linear-gradient(145deg,#ffeef3,#fff);border-radius:20px;box-shadow:0 6px 20px #ffafcacc;max-width:400px;text-align:center;transition:transform .3s ease,box-shadow .3s ease}.profile-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 25px #ff96b499}.profile-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#a37edc;margin-bottom:10px}.profile-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0}.btn-outline-light[_ngcontent-%COMP%]{color:#000;background-color:#fff3f3;border:1px solid #ffd4dd}.btn-outline-light[_ngcontent-%COMP%]:hover{background-color:#ffe8ec}"]})};var t1=[{path:"",component:dp},{path:"login",component:tm},{path:"register",component:em},{path:"about",component:nm},{path:"edit",component:sm},{path:"addprofile",component:rm},{path:"settings",component:im},{path:"resources",component:om},{path:"events",component:am},{path:"createpost",component:um},{path:"findmentor",component:cm},{path:"joinprogram",component:lm},{path:"profile",component:dm}];var n1={production:!1,firebase:{apiKey:"AIzaSyAIg3573FRzi4sqIPf-QH2pz8TCb8hu8D8",authDomain:"she-connect-3f9f6.firebaseapp.com",projectId:"she-connect-3f9f6",storageBucket:"she-connect-3f9f6.firebasestorage.app",messagingSenderId:"475869608115",appId:"1:475869608115:web:43f2c9258e9826f84158c6",measurementId:"G-DYQ3RYH1XT"}};R_(lp,{providers:[oE(t1),bf(UM.initializeApp(n1.firebase),mp,Xg)]});
